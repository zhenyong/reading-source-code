{
  "3401f6b460196ce254a73df05ce571802b365054": {
    "content": "## UML\n\n## observer\n![](https://tuychuang-1258994924.cos.ap-guangzhou.myqcloud.com/observer.png)\n\n## core\n\n![](https://tuychuang-1258994924.cos.ap-guangzhou.myqcloud.com/core.png)\n\n## EN\n\n- Semicolons  AmE ˈsɛmiˌkoʊlən noun 分号\n-  Implicit | AmE ɪmˈplɪsɪt | adjective 隐含的````\n- aka: also know as 又称为\n\n## Linux\n\n### 特殊变量\n\n- $_  在此之前执行的命令或者脚本的最后一个参数",
    "date": 1650263548154,
    "files": [
      {
        "sha": "20fa3c8083962785b8a909ad6f9f4cab85f902b7",
        "filename": ".gitignore",
        "status": "added",
        "additions": 5,
        "deletions": 0,
        "changes": 5,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/.gitignore",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/.gitignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/.gitignore?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,5 @@\n+dist\n+.DS_Store\n+node_modules\n+explorations\n+TODOs.md",
        "custom": { "status": "done", "notes": "" }
      },
      {
        "sha": "f5a1bdcdd2daf271a87314a475c36ca723c0b499",
        "filename": ".prettierrc",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/.prettierrc",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/.prettierrc",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/.prettierrc?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+semi: false\n+singleQuote: true\n+printWidth: 80",
        "custom": { "status": "done" }
      },
      {
        "sha": "25fa6215fdd332935998f5a4b2293e98665581de",
        "filename": ".vscode/settings.json",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/.vscode%2Fsettings.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/.vscode%2Fsettings.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/.vscode%2Fsettings.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+{\n+  \"typescript.tsdk\": \"node_modules/typescript/lib\"\n+}",
        "custom": { "status": "done" }
      },
      {
        "sha": "e8701ac92cdb27c4bff39bde9b3a31c54248cb37",
        "filename": "lerna.json",
        "status": "added",
        "additions": 6,
        "deletions": 0,
        "changes": 6,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/lerna.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/lerna.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/lerna.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,6 @@\n+{\n+  \"packages\": [\n+    \"packages/*\"\n+  ],\n+  \"version\": \"3.0.0-alpha.1\"\n+}",
        "custom": { "status": "done" }
      },
      {
        "sha": "9e5ef914d0303aed7aa1d751e358f546d3117d0d",
        "filename": "package.json",
        "status": "added",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/package.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/package.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/package.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,26 @@\n+{\n+  \"private\": true,\n+  \"workspaces\": [\n+    \"packages/*\"\n+  ],\n+  \"scripts\": {\n+    \"dev\": \"node scripts/dev.js\",\n+    \"build\": \"node scripts/build.js\",\n+    \"lint\": \"prettier --write --parser typescript 'packages/*/src/**/*.ts'\"\n+  },\n+  \"devDependencies\": {\n+    \"chalk\": \"^2.4.1\",\n+    \"dts-bundle\": \"^0.7.3\",\n+    \"execa\": \"^1.0.0\",\n+    \"fs-extra\": \"^7.0.0\",\n+    \"lerna\": \"^3.4.0\",\n+    \"minimist\": \"^1.2.0\",\n+    \"prettier\": \"^1.14.2\",\n+    \"rollup\": \"^0.65.0\",\n+    \"rollup-plugin-alias\": \"^1.4.0\",\n+    \"rollup-plugin-replace\": \"^2.0.0\",\n+    \"rollup-plugin-terser\": \"^2.0.2\",\n+    \"rollup-plugin-typescript2\": \"^0.17.0\",\n+    \"typescript\": \"^3.0.3\"\n+  }\n+}",
        "custom": {
          "status": "done",
          "notes": "## package.json\n\n### workspace 用法\n```json\n{\n    workspaces: ['packages/*']\n}\n```\n\n主要两方面：\n1. 依赖的时候自动链接到对应子目录包，`node_module/pakcages/a -> ./packages/a`\n2. 各种操作可以指定 wokspace，例如安装包 `npm install lodash -w a --save`\n\n### 包\n- `chalk` 命令行文字样式``\n- `dst-bundle` 把TS项目中d.ts文件单独打成-个npm包\n- `execa` 提升child_ process的体验，如跨平台\n- `fs-extra` fs 升级\n- `minimist` 轻量命令行解析引擎\n- `rollup-plugin-alias` 依赖包别名\n- `rollup-plugin- replace` 字面量替换\n- `rollup-plugin-terser` 利用terser库压缩生成es模块\n"
        }
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/core/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2F.npmignore?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "48d5587a7d0a710be64d9829150583873c4565b2",
        "filename": "packages/core/README.md",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2FREADME.md?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+# @vue/core\n+\n+> This package is published only for typing and building custom renderers. It is NOT meant to be used in applications."
      },
      {
        "sha": "435663ad40b848f8e214f5c8550b2c0148ea4f09",
        "filename": "packages/core/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Findex.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/core.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/core.cjs.js')\n+}"
      },
      {
        "sha": "9d27e66cb7146f03ea5c832c8cce27076560fef8",
        "filename": "packages/core/package.json",
        "status": "added",
        "additions": 24,
        "deletions": 0,
        "changes": 24,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fpackage.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,24 @@\n+{\n+  \"name\": \"@vue/core\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/core\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/core.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/core#readme\",\n+  \"dependencies\": {\n+    \"@vue/observer\": \"3.0.0-alpha.1\"\n+  }\n+}"
      },
      {
        "sha": "54cb0874f0e09040c8b910e31d4a0324946cc09c",
        "filename": "packages/core/src/component.ts",
        "status": "added",
        "additions": 171,
        "deletions": 0,
        "changes": 171,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fcomponent.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fcomponent.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2Fcomponent.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,171 @@\n+import { EMPTY_OBJ } from './utils'\n+import { VNode, Slots, RenderNode, RenderFragment } from './vdom'\n+import {\n+  Data,\n+  RenderFunction,\n+  ComponentOptions,\n+  ComponentPropsOptions\n+} from './componentOptions'\n+import { setupWatcher } from './componentWatch'\n+import { Autorun, DebuggerEvent, ComputedGetter } from '@vue/observer'\n+\n+type Flatten<T> = { [K in keyof T]: T[K] }\n+\n+export interface ComponentClass extends Flatten<typeof Component> {\n+  new <D = Data, P = Data>(): MountedComponent<D, P> & D & P\n+}\n+\n+export interface FunctionalComponent<P = Data> extends RenderFunction<P> {\n+  pure?: boolean\n+  props?: ComponentPropsOptions<P>\n+}\n+\n+// this interface is merged with the class type\n+// to represent a mounted component\n+export interface MountedComponent<D = Data, P = Data> extends Component {\n+  $vnode: VNode\n+  $data: D\n+  $props: P\n+  $computed: Data\n+  $slots: Slots\n+  $root: MountedComponent\n+  $children: MountedComponent[]\n+  $options: ComponentOptions<D, P>\n+\n+  render: RenderFunction<P>\n+  data?(): Partial<D>\n+  beforeCreate?(): void\n+  created?(): void\n+  beforeMount?(): void\n+  mounted?(): void\n+  beforeUpdate?(e: DebuggerEvent): void\n+  updated?(): void\n+  beforeDestroy?(): void\n+  destroyed?(): void\n+\n+  _updateHandle: Autorun\n+  $forceUpdate: () => void\n+\n+  _self: MountedComponent<D, P> // on proxies only\n+}\n+\n+export class Component {\n+  public static options?: ComponentOptions\n+\n+  public get $el(): RenderNode | RenderFragment | null {\n+    return this.$vnode && this.$vnode.el\n+  }\n+\n+  public $vnode: VNode | null = null\n+  public $parentVNode: VNode | null = null\n+  public $data: Data | null = null\n+  public $props: Data | null = null\n+  public $computed: Data | null = null\n+  public $slots: Slots | null = null\n+  public $root: MountedComponent | null = null\n+  public $parent: MountedComponent | null = null\n+  public $children: MountedComponent[] = []\n+  public $options: any\n+  public $proxy: any = null\n+  public $forceUpdate: (() => void) | null = null\n+\n+  public _rawData: Data | null = null\n+  public _computedGetters: Record<string, ComputedGetter> | null = null\n+  public _watchHandles: Set<Autorun> | null = null\n+  public _mounted: boolean = false\n+  public _destroyed: boolean = false\n+  public _events: { [event: string]: Function[] | null } | null = null\n+  public _updateHandle: Autorun | null = null\n+  public _revokeProxy: () => void\n+  public _isVue: boolean = true\n+\n+  constructor(options?: ComponentOptions) {\n+    this.$options = options || (this.constructor as any).options || EMPTY_OBJ\n+    // root instance\n+    if (options !== void 0) {\n+      // mount this\n+    }\n+  }\n+\n+  $watch(\n+    this: MountedComponent,\n+    keyOrFn: string | (() => any),\n+    cb: () => void\n+  ) {\n+    return setupWatcher(this, keyOrFn, cb)\n+  }\n+\n+  // eventEmitter interface\n+  $on(event: string, fn: Function): Component {\n+    if (Array.isArray(event)) {\n+      for (let i = 0; i < event.length; i++) {\n+        this.$on(event[i], fn)\n+      }\n+    } else {\n+      const events = this._events || (this._events = Object.create(null))\n+      ;(events[event] || (events[event] = [])).push(fn)\n+    }\n+    return this\n+  }\n+\n+  $once(event: string, fn: Function): Component {\n+    const onceFn = (...args: any[]) => {\n+      this.$off(event, onceFn)\n+      fn.apply(this, args)\n+    }\n+    ;(onceFn as any).fn = fn\n+    return this.$on(event, onceFn)\n+  }\n+\n+  $off(event?: string, fn?: Function) {\n+    if (this._events) {\n+      if (!event && !fn) {\n+        this._events = null\n+      } else if (Array.isArray(event)) {\n+        for (let i = 0; i < event.length; i++) {\n+          this.$off(event[i], fn)\n+        }\n+      } else if (!fn) {\n+        this._events[event as string] = null\n+      } else {\n+        const fns = this._events[event as string]\n+        if (fns) {\n+          for (let i = 0; i < fns.length; i++) {\n+            const f = fns[i]\n+            if (fn === f || fn === (f as any).fn) {\n+              fns.splice(i, 1)\n+              break\n+            }\n+          }\n+        }\n+      }\n+    }\n+    return this\n+  }\n+\n+  $emit(this: MountedComponent, name: string, ...payload: any[]) {\n+    const parentListener =\n+      this.$props['on' + name] || this.$props['on' + name.toLowerCase()]\n+    if (parentListener) {\n+      invokeListeners(parentListener, payload)\n+    }\n+    if (this._events) {\n+      const handlers = this._events[name]\n+      if (handlers) {\n+        invokeListeners(handlers, payload)\n+      }\n+    }\n+    return this\n+  }\n+}\n+\n+function invokeListeners(value: Function | Function[], payload: any[]) {\n+  // TODO handle error\n+  if (Array.isArray(value)) {\n+    for (let i = 0; i < value.length; i++) {\n+      value[i](...payload)\n+    }\n+  } else {\n+    value(...payload)\n+  }\n+}",
        "custom": {
          "notes": "定义 Component class 和 各种组件和属性类型\n\n## Class / interface\n### Flatten\n\n  ```ts\n type Flatten<T> = { [K in keyof T]: T[K] }\n ```\n\n如果 T 是一个 class type，拿到 static 字段和 prototype\n\n### ComponentClass\n\n```ts\nexport interface ComponentClass extends Flatten<typeof Component> {\n  new <D = Data, P = Data>(): MountedComponent<D, P> & D & P\n}\n```\n\nComponentClass 类型能被识别为 `{ prototype: Comopnent, options: xx}`，其中 options 是 Component 的 static 属性，接着补上一个构造方法。如果直接 `extends Component`是拿不到 static 字段，这里 Flatten 很巧妙的解决了继承 static 字段。\n\n### FunctionalComponent\n\n```ts\nexport interface FunctionalComponent<P = Data> extends RenderFunction<P> {\n  pure?: boolean\n  props?: ComponentPropsOptions<P>\n}\n```\n\n比起 RenderFunction：\n\n- pure: 跟 React 的 PureComponent 类似，定义了一个 shouldUpdate 策略，通过 props 的浅比较（第一层字段强等于）来判断是否要 update\n- props: 定义了组件的 props，最终在 render 方法里面使用的 props 类型\n\n\n### MountedComponent\n\n```ts\nexport interface MountedComponent<D = Data, P = Data> extends Component {\n  $vnode: VNode\n  $data: D\n  $props: P\n  $computed: Data\n  $slots: Slots\n  $root: MountedComponent\n  $children: MountedComponent[]\n  $options: ComponentOptions<D, P>\n\n  render: RenderFunction<P>\n  data?(): Partial<D>\n  beforeCreate?(): void\n  created?(): void\n  beforeMount?(): void\n  mounted?(): void\n  beforeUpdate?(e: DebuggerEvent): void\n  updated?(): void\n  beforeDestroy?(): void\n  destroyed?(): void\n\n  _updateHandle: Autorun\n  $forceUpdate: () => void\n\n  _self: MountedComponent<D, P> // on proxies only\n}\n```\n\n名称强调了  Mounted 是因为服务端渲染组件，是没有 vnode 等概念（没有 dom diff 呀），毕竟只需要一个纯纯的 render 就输出 html 了。\n\n### class Component\n\n```ts\nexport class Component {\n  public static options?: ComponentOptions\n\n  public get $el(): RenderNode | RenderFragment | null {\n    return this.$vnode && this.$vnode.el\n  }\n\n  public $vnode: VNode | null = null\n  public $parentVNode: VNode | null = null\n  public $data: Data | null = null\n  public $props: Data | null = null\n  public $computed: Data | null = null\n  public $slots: Slots | null = null\n  public $root: MountedComponent | null = null\n  public $parent: MountedComponent | null = null\n  public $children: MountedComponent[] = []\n  public $options: any\n  public $proxy: any = null\n  public $forceUpdate: (() => void) | null = null\n\n  public _rawData: Data | null = null\n  public _computedGetters: Record<string, ComputedGetter> | null = null\n  public _watchHandles: Set<Autorun> | null = null\n  public _mounted: boolean = false\n  public _destroyed: boolean = false\n  public _events: { [event: string]: Function[] | null } | null = null\n  public _updateHandle: Autorun | null = null\n  public _revokeProxy: () => void\n  public _isVue: boolean = true\n\n  constructor(options?: ComponentOptions) {\n  }\n\n  $watch(\n    this: MountedComponent,\n    keyOrFn: string | (() => any),\n    cb: () => void\n  ) {\n    return setupWatcher(this, keyOrFn, cb)\n  }\n\n  // eventEmitter interface\n  $on(event: string, fn: Function)\n\n  $once(event: string, fn: Function)\n\n  $off(event?: string, fn?: Function) \n\n  $emit(this: MountedComponent, name: string, ...payload: any[])\n}\n```\n\n",
          "status": "done"
        }
      },
      {
        "sha": "ab88958bc6e26ca34d0e4c1200e5f57aee73f649",
        "filename": "packages/core/src/componentComputed.ts",
        "status": "added",
        "additions": 65,
        "deletions": 0,
        "changes": 65,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentComputed.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentComputed.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentComputed.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,65 @@\n+import { EMPTY_OBJ } from './utils'\n+import { computed, ComputedGetter } from '@vue/observer'\n+import { Component, ComponentClass } from './component'\n+import { ComponentComputedOptions } from './componentOptions'\n+\n+const extractionCache: WeakMap<\n+  ComponentClass,\n+  ComponentComputedOptions\n+> = new WeakMap()\n+\n+export function getComputedOptions(\n+  comp: ComponentClass\n+): ComponentComputedOptions {\n+  let computedOptions = extractionCache.get(comp)\n+  if (computedOptions) {\n+    return computedOptions\n+  }\n+  computedOptions = {}\n+  const descriptors = Object.getOwnPropertyDescriptors(comp.prototype as any)\n+  for (const key in descriptors) {\n+    const d = descriptors[key]\n+    if (d.get) {\n+      computedOptions[key] = d.get\n+      // there's no need to do anything for the setter\n+      // as it's already defined on the prototype\n+    }\n+  }\n+  return computedOptions\n+}\n+\n+export function initializeComputed(\n+  instance: Component,\n+  computedOptions: ComponentComputedOptions | undefined\n+) {\n+  if (!computedOptions) {\n+    instance.$computed = EMPTY_OBJ\n+    return\n+  }\n+  const handles: Record<\n+    string,\n+    ComputedGetter\n+  > = (instance._computedGetters = {})\n+  const proxy = instance.$proxy\n+  for (const key in computedOptions) {\n+    handles[key] = computed(computedOptions[key], proxy)\n+  }\n+  instance.$computed = new Proxy(\n+    {},\n+    {\n+      get(_, key: any) {\n+        return handles[key]()\n+      }\n+      // TODO should be readonly\n+    }\n+  )\n+}\n+\n+export function teardownComputed(instance: Component) {\n+  const handles = instance._computedGetters\n+  if (handles !== null) {\n+    for (const key in handles) {\n+      handles[key].stop()\n+    }\n+  }\n+}",
        "custom": {
          "notes": "处理组件 computed 配置：获取组件配置、初始化包装、销毁\n\n## 方法\n\n### initializeComputed\n\n1. 遍历 computed 配置对象，对每个 value 进行 computed 包装，包装成新的 handler 对象\n2. 设置组件 $component 为新 Proxy，get() 返回 handler 对象里面的值\n\n### getComputedOptions\n\n通过一个组件 Class，拿到 computed 配置\n\n```ts\n const descriptors = Object.getOwnPropertyDescriptors(comp.prototype as any)\n```\n\ncomp 通常是一个组件类，这么重新拿一遍又拼成新对象，主要是保证每个组件实例的 computed 都是单独的，另外外层也会做缓存。\n\ngetOwnPropertyDescriptors 的用途实验：\n\n```ts\nconst obj = {get name(){return 'peter'}};\nObject.getOwnPropertyDescriptors(obj).name.get // ƒ name(){return 'peter'}\n```\n\n### teardownComputed\n\ninitializeComputed 过程中，computed 包装返回的都带有一个 stop 方法，内部会把computed 属性的 get（runner）相关关联清空。\n\nnote：一个  computed 属性对应一个 runner，依赖了其他 data 属性的话，则 computed runner 会跟 data 属性的依赖集合关联，stop 实际就是清空彼此关联，以后 data 属性变化引起 trigger 也不会执行相应 runner。\n",
          "status": "done"
        }
      },
      {
        "sha": "2bcbf1a3503a7ef00ad6b4a2a634e9f30877d6bf",
        "filename": "packages/core/src/componentOptions.ts",
        "status": "added",
        "additions": 51,
        "deletions": 0,
        "changes": 51,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentOptions.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentOptions.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentOptions.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,51 @@\n+import { Slots } from './vdom'\n+import { MountedComponent } from './component'\n+\n+export type Data = Record<string, any>\n+\n+export interface RenderFunction<P = Data> {\n+  (props: P, slots: Slots): any\n+}\n+\n+export interface ComponentOptions<D = Data, P = Data> {\n+  data?: () => Partial<D>\n+  props?: ComponentPropsOptions<P>\n+  computed?: ComponentComputedOptions<D, P>\n+  watch?: ComponentWatchOptions<D, P>\n+  render?: RenderFunction<P>\n+  // TODO other options\n+  readonly [key: string]: any\n+}\n+\n+export type ComponentPropsOptions<P = Data> = {\n+  [K in keyof P]: PropValidator<P[K]>\n+}\n+\n+export type NormalizedPropsOptions<P = Data> = {\n+  [K in keyof P]: PropOptions<P[K]>\n+}\n+\n+export type Prop<T> = { (): T } | { new (...args: any[]): T & object }\n+\n+export type PropType<T> = Prop<T> | Prop<T>[]\n+\n+export type PropValidator<T> = PropOptions<T> | PropType<T>\n+\n+export interface PropOptions<T = any> {\n+  type?: PropType<T>\n+  required?: boolean\n+  default?: T | null | undefined | (() => T | null | undefined)\n+  validator?(value: T): boolean\n+}\n+\n+export interface ComponentComputedOptions<D = Data, P = Data> {\n+  [key: string]: (this: MountedComponent<D, P> & D & P, c: any) => any\n+}\n+\n+export interface ComponentWatchOptions<D = Data, P = Data> {\n+  [key: string]: (\n+    this: MountedComponent<D, P> & D & P,\n+    oldValue: any,\n+    newValue: any\n+  ) => void\n+}",
        "custom": {
          "notes": "## 方法&类型\n\n### RenderFunction\n\n```ts\nexport interface RenderFunction<P = Data> {\n  (props: P, slots: Slots): any\n}\n```\n\n表示组件最终 render 的方法。有的组件可以用一个 function 表示，例如:\n\n```ts\nconst renderComp = () => <div>Hello World!</div>\n```\n\n### ComponentOptions\n\n```ts\n\nexport interface ComponentOptions<D = Data, P = Data> {\n  data?: () => Partial<D>\n  props?: ComponentPropsOptions<P>\n  computed?: ComponentComputedOptions<D, P>\n  watch?: ComponentWatchOptions<D, P>\n  render?: RenderFunction<P>\n  // TODO other options\n  readonly [key: string]: any\n}\n```\n\nliteral component 风格\n\n\n### ComponentPropsOptions\n\n```ts\nexport type ComponentPropsOptions<P = Data> = {\n  [K in keyof P]: PropValidator<P[K]>\n}\n```\n\n`P[K]` 对应 props 声明某个值类型\n\n### PropValidator\n\n```ts\nexport type PropValidator<T> = PropOptions<T> | PropType<T>\n```\n\n### PropOptions\n\n```ts\nexport interface PropOptions<T = any> {\n  type?: PropType<T>\n  required?: boolean\n  default?: T | null | undefined | (() => T | null | undefined)\n  validator?(value: T): boolean\n}\n```\n\n### PropType\n\n```ts\n// prop 类型支持定义一种或者多重\nexport type PropType<T> = Prop<T> | Prop<T>[]\n\n// 前者表示一个方法返回 T\n// 后者表示 T 类型的构造函数（类）\nexport type Prop<T> = { (): T } | { new (...args: any[]): T & object }\n```\n\n### ComponentComputedOptions\n\n```ts\nexport interface ComponentComputedOptions<D = Data, P = Data> {\n  [key: string]: (this: MountedComponent<D, P> & D & P, c: any) => any\n}\n```\n\n`MountedComponent<D, P> & D & P` 保证了在 computed 的 getter 方法里面，可以访问 data 和 props，同时 MountedComponent 也保证了 this 是 MountedComponent 类型，& 是把所有对象属性都包括了。\n\n\n### ComponentWatchOptions\n\n```ts\nexport interface ComponentWatchOptions<D = Data, P = Data> {\n  [key: string]: (\n    this: MountedComponent<D, P> & D & P,\n    oldValue: any,\n    newValue: any\n  ) => void\n}\n```",
          "status": "done"
        }
      },
      {
        "sha": "bfcec057b9b6386064c0cc977e3bf300846af861",
        "filename": "packages/core/src/componentProps.ts",
        "status": "added",
        "additions": 103,
        "deletions": 0,
        "changes": 103,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentProps.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentProps.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentProps.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,103 @@\n+import { EMPTY_OBJ, isReservedProp } from './utils'\n+import { Component, ComponentClass, MountedComponent } from './component'\n+import { immutable, unwrap, lock, unlock } from '@vue/observer'\n+import {\n+  Data,\n+  ComponentPropsOptions,\n+  NormalizedPropsOptions,\n+  PropValidator,\n+  PropOptions\n+} from './componentOptions'\n+\n+export function initializeProps(instance: Component, props: Data | null) {\n+  instance.$props = immutable(props || {})\n+}\n+\n+export function updateProps(instance: MountedComponent, nextProps: Data) {\n+  // instance.$props is an observable that should not be replaced.\n+  // instead, we mutate it to match latest props, which will trigger updates\n+  // if any value has changed.\n+  if (nextProps != null) {\n+    const props = instance.$props\n+    const rawProps = unwrap(props)\n+    // unlock to temporarily allow mutatiing props\n+    unlock()\n+    for (const key in rawProps) {\n+      if (!nextProps.hasOwnProperty(key)) {\n+        delete props[key]\n+      }\n+    }\n+    for (const key in nextProps) {\n+      props[key] = nextProps[key]\n+    }\n+    lock()\n+  }\n+}\n+\n+// This is called for every component vnode created. This also means the data\n+// on every component vnode is guarunteed to be a fresh object.\n+export function normalizeComponentProps(\n+  raw: any,\n+  options: ComponentPropsOptions,\n+  Component: ComponentClass\n+): Data {\n+  if (!raw) {\n+    return EMPTY_OBJ\n+  }\n+  const res: Data = {}\n+  const normalizedOptions = options && normalizePropsOptions(options)\n+  for (const key in raw) {\n+    if (isReservedProp(key)) {\n+      continue\n+    }\n+    if (__DEV__ && normalizedOptions != null) {\n+      validateProp(key, raw[key], normalizedOptions[key], Component)\n+    } else {\n+      res[key] = raw[key]\n+    }\n+  }\n+  // set default values\n+  if (normalizedOptions != null) {\n+    for (const key in normalizedOptions) {\n+      if (res[key] === void 0) {\n+        const opt = normalizedOptions[key]\n+        if (opt != null && opt.hasOwnProperty('default')) {\n+          const defaultValue = opt.default\n+          res[key] =\n+            typeof defaultValue === 'function' ? defaultValue() : defaultValue\n+        }\n+      }\n+    }\n+  }\n+  return res\n+}\n+\n+const normalizeCache: WeakMap<\n+  ComponentPropsOptions,\n+  NormalizedPropsOptions\n+> = new WeakMap()\n+function normalizePropsOptions(\n+  raw: ComponentPropsOptions\n+): NormalizedPropsOptions {\n+  let cached = normalizeCache.get(raw)\n+  if (cached) {\n+    return cached\n+  }\n+  const normalized: NormalizedPropsOptions = {}\n+  for (const key in raw) {\n+    const opt = raw[key]\n+    normalized[key] =\n+      typeof opt === 'function' ? { type: opt } : (opt as PropOptions)\n+  }\n+  normalizeCache.set(raw, normalized)\n+  return normalized\n+}\n+\n+function validateProp(\n+  key: string,\n+  value: any,\n+  validator: PropValidator<any>,\n+  Component: ComponentClass\n+) {\n+  // TODO\n+}",
        "custom": {
          "notes": "## 方法\n\n### initializeProps\n\n把组件的 props 包装成 immutable。运行过程能够 track 到属性，但是不能设置。挂到组件的 `.$props`\n\n### updateProps\n更新组件内部 `.$props`，vue 组件的 props 只有通过父组件传值带修改，不允许开发者手动去设置，`.$props` 是 immutable，默认不能设置，但是内置一个全局变量 LOCK，updateProps 方法内会临时关闭 LOCKED，然后就可以更新了\n\n1. unwrap .$props 拿到.raw target\n2. 解锁\n3. nextProps 没有的则干掉 raw\n4. nextProps 覆盖 raw\n5. 上锁\n\n#### normalizePropsOptions\n\n把 raw prop 变成统一格式\n\n```ts\nexport interface PropOptions<T = any> {\n  type?: PropType<T>\n  required?: boolean\n  default?: T | null | undefined | (() => T | null | undefined)\n  validator?(value: T): boolean\n```\n\n### normalizeComponentProps\n\n1. normalizePropsOptions\n2. 过滤保留 key\n3. dev 阶段校验\n4. 保证 default 值\n\n\n\n",
          "status": "done"
        }
      },
      {
        "sha": "7b764395003781809371f9a2bbe7d052f3563f67",
        "filename": "packages/core/src/componentProxy.ts",
        "status": "added",
        "additions": 82,
        "deletions": 0,
        "changes": 82,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentProxy.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentProxy.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentProxy.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,82 @@\n+import { Component, MountedComponent } from './component'\n+\n+const bindCache = new WeakMap()\n+\n+function getBoundMethod(fn: Function, target: any, receiver: any): Function {\n+  let boundMethodsForTarget = bindCache.get(target)\n+  if (boundMethodsForTarget === void 0) {\n+    bindCache.set(target, (boundMethodsForTarget = new Map()))\n+  }\n+  let boundFn = boundMethodsForTarget.get(fn)\n+  if (boundFn === void 0) {\n+    boundMethodsForTarget.set(fn, (boundFn = fn.bind(receiver)))\n+  }\n+  return boundFn\n+}\n+\n+const renderProxyHandlers = {\n+  get(target: MountedComponent, key: string, receiver: any) {\n+    if (key === '_self') {\n+      return target\n+    } else if (\n+      target._rawData !== null &&\n+      target._rawData.hasOwnProperty(key)\n+    ) {\n+      // data\n+      return target.$data[key]\n+    } else if (\n+      target.$options.props != null &&\n+      target.$options.props.hasOwnProperty(key)\n+    ) {\n+      // props are only proxied if declared\n+      return target.$props[key]\n+    } else if (\n+      target._computedGetters !== null &&\n+      target._computedGetters.hasOwnProperty(key)\n+    ) {\n+      // computed\n+      return target._computedGetters[key]()\n+    } else {\n+      if (__DEV__ && !(key in target)) {\n+        // TODO warn non-present property\n+      }\n+      const value = Reflect.get(target, key, receiver)\n+      if (typeof value === 'function') {\n+        // auto bind\n+        return getBoundMethod(value, target, receiver)\n+      } else {\n+        return value\n+      }\n+    }\n+  },\n+  set(\n+    target: MountedComponent,\n+    key: string,\n+    value: any,\n+    receiver: any\n+  ): boolean {\n+    if (__DEV__) {\n+      if (typeof key === 'string' && key[0] === '$') {\n+        // TODO warn setting immutable properties\n+        return false\n+      }\n+      if (\n+        target.$options.props != null &&\n+        target.$options.props.hasOwnProperty(key)\n+      ) {\n+        // TODO warn props are immutable\n+        return false\n+      }\n+    }\n+    if (target._rawData !== null && target._rawData.hasOwnProperty(key)) {\n+      target.$data[key] = value\n+      return true\n+    } else {\n+      return Reflect.set(target, key, value, receiver)\n+    }\n+  }\n+}\n+\n+export function createRenderProxy(instance: Component): MountedComponent {\n+  return new Proxy(instance, renderProxyHandlers) as MountedComponent\n+}",
        "custom": {
          "notes": "用于 render vue 实例，创建一个 proxy 拦截 get/set 返回和设置合适值。\n\n## 方法对象\n\n### renderProxyHandlers\n\nget 方法\n\n1. key 为 _self 返回 target\n2. key 在 _rawData 返回 target.$date[key]\n3. key 在 .$options.props 返回 target.$props[key]\n4. key 在 .__computedGetters，返回 target._computedGetters\\[key]()\n5. Reflect.get(target, key, receiver) 获取值\n    1. 如果值是function，则返回一个绑定为 receiver 的方法，并缓存（保证vue实例下的所有代理方法里的 this 都是实例本身）\n    2. 其他值则直接返回\n\nset 方法\n\n1. $开头和 props 中的属性，忽略。\n2. 如果 _rawData 有，则直接在 data 代理上设置 target.$data[key] = value\n3. 其他就直接在 target 上设置 Reflect.set(target, key, value, receiver)\n\n\n",
          "status": "done"
        }
      },
      {
        "sha": "1adcd1d41c5da25b01fb70538e9a616184acfb53",
        "filename": "packages/core/src/componentState.ts",
        "status": "added",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentState.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentState.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentState.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,12 @@\n+import { EMPTY_OBJ } from './utils'\n+import { MountedComponent } from './component'\n+import { observable } from '@vue/observer'\n+\n+export function initializeState(instance: MountedComponent) {\n+  if (instance.data) {\n+    instance._rawData = instance.data()\n+    instance.$data = observable(instance._rawData)\n+  } else {\n+    instance.$data = EMPTY_OBJ\n+  }\n+}",
        "custom": {
          "notes": "通过 observable 方法 把 data 配置变成响应式对象 挂到 instance.$data 上",
          "status": "done"
        }
      },
      {
        "sha": "fe0e43af063dbf8ffe0a0c17f114f37147f6cc22",
        "filename": "packages/core/src/componentUtils.ts",
        "status": "added",
        "additions": 180,
        "deletions": 0,
        "changes": 180,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentUtils.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentUtils.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentUtils.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,180 @@\n+import { VNodeFlags } from './flags'\n+import { EMPTY_OBJ } from './utils'\n+import { VNode, createFragment } from './vdom'\n+import { Component, MountedComponent, ComponentClass } from './component'\n+import { createTextVNode, cloneVNode } from './vdom'\n+import { initializeState } from './componentState'\n+import { initializeProps } from './componentProps'\n+import {\n+  initializeComputed,\n+  getComputedOptions,\n+  teardownComputed\n+} from './componentComputed'\n+import { initializeWatch, teardownWatch } from './componentWatch'\n+import { Data, ComponentOptions } from './componentOptions'\n+import { createRenderProxy } from './componentProxy'\n+\n+export function createComponentInstance(\n+  vnode: VNode,\n+  Component: ComponentClass,\n+  parentComponent: MountedComponent | null\n+): MountedComponent {\n+  const instance = (vnode.children = new Component()) as MountedComponent\n+  instance.$parentVNode = vnode\n+\n+  // renderProxy\n+  const proxy = (instance.$proxy = createRenderProxy(instance))\n+\n+  // pointer management\n+  if (parentComponent) {\n+    instance.$parent = parentComponent.$proxy\n+    instance.$root = parentComponent.$root\n+    parentComponent.$children.push(proxy)\n+  } else {\n+    instance.$root = proxy\n+  }\n+\n+  // lifecycle\n+  if (instance.beforeCreate) {\n+    instance.beforeCreate.call(proxy)\n+  }\n+  // TODO provide/inject\n+  initializeProps(instance, vnode.data)\n+  initializeState(instance)\n+  initializeComputed(instance, getComputedOptions(Component))\n+  initializeWatch(instance, instance.$options.watch)\n+  instance.$slots = vnode.slots || EMPTY_OBJ\n+  if (instance.created) {\n+    instance.created.call(proxy)\n+  }\n+\n+  return instance as MountedComponent\n+}\n+\n+export function renderInstanceRoot(instance: MountedComponent) {\n+  // TODO handle render error\n+  return normalizeComponentRoot(\n+    instance.render.call(instance.$proxy, instance.$props, instance.$slots),\n+    instance.$parentVNode\n+  )\n+}\n+\n+export function teardownComponentInstance(instance: MountedComponent) {\n+  const parentComponent = instance.$parent && instance.$parent._self\n+  if (parentComponent && !parentComponent._destroyed) {\n+    parentComponent.$children.splice(\n+      parentComponent.$children.indexOf(instance.$proxy),\n+      1\n+    )\n+  }\n+  teardownComputed(instance)\n+  teardownWatch(instance)\n+}\n+\n+export function normalizeComponentRoot(\n+  vnode: any,\n+  componentVNode: VNode | null\n+): VNode {\n+  if (vnode == null) {\n+    vnode = createTextVNode('')\n+  } else if (typeof vnode !== 'object') {\n+    vnode = createTextVNode(vnode + '')\n+  } else if (Array.isArray(vnode)) {\n+    vnode = createFragment(vnode)\n+  } else {\n+    const { flags } = vnode\n+    // parentVNode data merge down\n+    if (\n+      componentVNode &&\n+      (flags & VNodeFlags.COMPONENT || flags & VNodeFlags.ELEMENT)\n+    ) {\n+      const parentData = componentVNode.data || EMPTY_OBJ\n+      const childData = vnode.data || EMPTY_OBJ\n+      let extraData: any = null\n+      for (const key in parentData) {\n+        // class/style bindings on parentVNode are merged down to child\n+        // component root.\n+        if (key === 'class') {\n+          ;(extraData || (extraData = {})).class = childData.class\n+            ? [].concat(childData.class, parentData.class)\n+            : parentData.class\n+        } else if (key === 'style') {\n+          ;(extraData || (extraData = {})).style = childData.style\n+            ? [].concat(childData.style, parentData.style)\n+            : parentData.style\n+        } else if (key.startsWith('nativeOn')) {\n+          // nativeOn* handlers are merged down to child root as native listeners\n+          const event = 'on' + key.slice(8)\n+          ;(extraData || (extraData = {}))[event] = childData.event\n+            ? [].concat(childData.event, parentData[key])\n+            : parentData[key]\n+        }\n+      }\n+      if (extraData) {\n+        vnode = cloneVNode(vnode, extraData)\n+      }\n+      if (vnode.el) {\n+        vnode = cloneVNode(vnode)\n+      }\n+      if (flags & VNodeFlags.COMPONENT) {\n+        vnode.parentVNode = componentVNode\n+      }\n+    } else if (vnode.el) {\n+      vnode = cloneVNode(vnode)\n+    }\n+  }\n+  return vnode\n+}\n+\n+export function shouldUpdateFunctionalComponent(\n+  prevProps: Data | null,\n+  nextProps: Data | null\n+): boolean {\n+  if (prevProps === nextProps) {\n+    return false\n+  }\n+  if (prevProps === null) {\n+    return nextProps !== null\n+  }\n+  if (nextProps === null) {\n+    return prevProps !== null\n+  }\n+  let shouldUpdate = true\n+  const nextKeys = Object.keys(nextProps)\n+  if (nextKeys.length === Object.keys(prevProps).length) {\n+    shouldUpdate = false\n+    for (let i = 0; i < nextKeys.length; i++) {\n+      const key = nextKeys[i]\n+      if (nextProps[key] !== prevProps[key]) {\n+        shouldUpdate = true\n+      }\n+    }\n+  }\n+  return shouldUpdate\n+}\n+\n+export function createComponentClassFromOptions(\n+  options: ComponentOptions\n+): ComponentClass {\n+  class ObjectComponent extends Component {\n+    constructor() {\n+      super()\n+      this.$options = options\n+    }\n+  }\n+  for (const key in options) {\n+    const value = options[key]\n+    if (typeof value === 'function') {\n+      ;(ObjectComponent.prototype as any)[key] = value\n+    }\n+    if (key === 'computed') {\n+      const isGet = typeof value === 'function'\n+      Object.defineProperty(ObjectComponent.prototype, key, {\n+        configurable: true,\n+        get: isGet ? value : value.get,\n+        set: isGet ? undefined : value.set\n+      })\n+    }\n+  }\n+  return ObjectComponent as ComponentClass\n+}",
        "custom": {
          "notes": "## 方法\n\n### createComponentInstance\n\n```\nexport function createComponentInstance(\n  vnode: VNode,\n  Component: ComponentClass,\n  parentComponent: MountedComponent | null\n)\n```\n\n- 第一个参数可以理解为是 jsx 中标签对应的 vnode\n- 第二个参数就是组件的 Class 类\n- 第三个参数是父组件实例。\n\n创建一个组件实例的核心流程\n1. new ComponentClass\n2. instance.$proxy = createRenderProxy(instance)\n3. 关联 parent 相关\n4. *lifecycle*: beforeCreate\n5. 初始化 props\n6. 初始化 data\n7. 初始化 computed\n9. 初始化 watch\n11. *lifecycle*: created\n12. \n### normalizeComponentRoot\n\n```ts\nexport function renderInstanceRoot(instance: MountedComponent) {\n  return normalizeComponentRoot(\n    instance.render.call(instance.$proxy, instance.$props, instance.$slots),\n    instance.$parentVNode\n  )\n}\n```\n\n### teardownComponentInstance\n销毁组件资源\n1. 移除跟父组件关联\n2. 销毁 computed 相关资源\n3. 销毁 watch 相关资源\n\n### normalizeComponentRoot\n\n这里有个 $parentVNode 容易混淆概念，\n\n```jsx\n<Comp/>\n```\n\n这里 `<Comp/>` 节点本身对应一个 vnode，渲染组件的时候，组件实例本身也有一个 vnode，所以 render 过程中，会把 <Comp> 这个节点作为组件实例的 $parentVNode，所以方法内会把 parentNode 的 data merge 到 vnode data。\n\n从\n```ts\n      if (flags & VNodeFlags.COMPONENT) {\n        vnode.parentVNode = componentVNode\n      }\n```  \n\n可以看出，只有这种有组件标签占位的情况，组件实例的 vnode 就会有 parentVNode 指向组件标签占位的 vnode。\n\n梳理流程：\n1. 若 vnode 为 null，则返回空串 text node\n2. 若 vnode 非 object，则当作文本返回 text node\n3. 若 vnode 是数组，则创建 fragment，内部会 normalize 数组为子vnode\n4. 其他\n    1. 如果有占位 vnode，并且flags 为 COMPONENT or ELEMENT\n        1. 把占位 vnode 的 class\\style\\nativeOn merge 到组件实例 vnode\n        2. cloneVNode 方法创建 vnode\n        3. 如果是 COMPONENT，则设置 parentVNode\n    2. 如果有 el，直接返回 cloneVNode\n5. 直接返回参数 vnode\n\n@思考 TODO\n为什么在 normalize 过程中碰到 el 就要 cloneVNode 一下？\n\n### shouldUpdateFunctionalComponent\n\n当带有 pure 的组件时，生成一个第一层属性浅比较更新策略的组件。\n\n@思考 TODO\n循环比较 prop 的过程，如果有了 true，为啥不 return，故意保证所有 prop 都 get 到？\n```ts\n      if (nextProps[key] !== prevProps[key]) {\n        shouldUpdate = true\n      }\n```\n\n### createComponentClassFromOptions\n\n通过组件配置对象，生成一个 class。过程：\n\n1. extends Component 得到一个 class ObjectComponent\n2. 把参数 options 方法部分扩展到 ObjectComponent 的原型，把 computed 重新包装，其他key不管。\n\n```ts\n    if (key === 'computed') {\n      const isGet = typeof value === 'function'\n      Object.defineProperty(ObjectComponent.prototype, key, {\n        configurable: true,\n        get: isGet ? value : value.get,\n        set: isGet ? undefined : value.set\n      })\n    }\n```\n\n@思考 TODO\n这里对 computed 重新定义的目的是什么？实现也没明白。\n",
          "status": "done"
        }
      },
      {
        "sha": "a8387021dac718a1519ca1806bf7148d652e4cd3",
        "filename": "packages/core/src/componentWatch.ts",
        "status": "added",
        "additions": 50,
        "deletions": 0,
        "changes": 50,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentWatch.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcomponentWatch.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentWatch.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,50 @@\n+import { MountedComponent } from './component'\n+import { ComponentWatchOptions } from './componentOptions'\n+import { autorun, stop, Autorun } from '@vue/observer'\n+\n+export function initializeWatch(\n+  instance: MountedComponent,\n+  options: ComponentWatchOptions | undefined\n+) {\n+  if (options !== void 0) {\n+    for (const key in options) {\n+      setupWatcher(instance, key, options[key])\n+    }\n+  }\n+}\n+\n+// TODO deep watch\n+export function setupWatcher(\n+  instance: MountedComponent,\n+  keyOrFn: string | Function,\n+  cb: Function\n+): () => void {\n+  const handles = instance._watchHandles || (instance._watchHandles = new Set())\n+  const proxy = instance.$proxy\n+  const rawGetter =\n+    typeof keyOrFn === 'string'\n+      ? () => proxy[keyOrFn]\n+      : () => keyOrFn.call(proxy)\n+  let oldValue: any\n+  const runner = autorun(rawGetter, {\n+    scheduler: (runner: Autorun) => {\n+      const newValue = runner()\n+      if (newValue !== oldValue) {\n+        cb(newValue, oldValue)\n+        oldValue = newValue\n+      }\n+    }\n+  })\n+  oldValue = runner()\n+  handles.add(runner)\n+  return () => {\n+    stop(runner)\n+    handles.delete(runner)\n+  }\n+}\n+\n+export function teardownWatch(instance: MountedComponent) {\n+  if (instance._watchHandles !== null) {\n+    instance._watchHandles.forEach(stop)\n+  }\n+}",
        "custom": {
          "notes": "实现 watch 配置功能\n\n## 方法\n\n### setupWatcher\n\n1. instance._watchHandles 作为 集合 存放对应 runner\n2. 定义一个类似 computed 的 getter，可能是 proxy[key] 或者是 function 返回 watch 值\n3. 创建 runner，scheduler里面执行 runner 对比新旧，如果有变化就调用回调\n4. 提前执行一次 runner，以便依赖侦测\n5. 提供销毁的相关方法（集合移除 runner，stop runner）\n\n",
          "status": "done"
        }
      },
      {
        "sha": "5bf816be9a464bb8bf224c7ad8ff1e439b0dc113",
        "filename": "packages/core/src/createRenderer.ts",
        "status": "added",
        "additions": 1309,
        "deletions": 0,
        "changes": 1309,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcreateRenderer.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FcreateRenderer.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcreateRenderer.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,1309 @@\n+import { autorun, stop } from '@vue/observer'\n+import { VNodeFlags, ChildrenFlags } from './flags'\n+import { EMPTY_OBJ, isReservedProp } from './utils'\n+import {\n+  VNode,\n+  MountedVNode,\n+  MountedVNodes,\n+  RenderNode,\n+  createTextVNode,\n+  cloneVNode,\n+  Ref,\n+  VNodeChildren,\n+  RenderFragment\n+} from './vdom'\n+import {\n+  MountedComponent,\n+  FunctionalComponent,\n+  ComponentClass\n+} from './component'\n+import { updateProps } from './componentProps'\n+import {\n+  renderInstanceRoot,\n+  createComponentInstance,\n+  teardownComponentInstance,\n+  normalizeComponentRoot,\n+  shouldUpdateFunctionalComponent\n+} from './componentUtils'\n+\n+interface RendererOptions {\n+  queueJob: (fn: () => void, postFlushJob?: () => void) => void\n+  nodeOps: {\n+    createElement: (tag: string, isSVG?: boolean) => any\n+    createText: (text: string) => any\n+    setText: (node: any, text: string) => void\n+    appendChild: (parent: any, child: any) => void\n+    insertBefore: (parent: any, child: any, ref: any) => void\n+    replaceChild: (parent: any, oldChild: any, newChild: any) => void\n+    removeChild: (parent: any, child: any) => void\n+    clearContent: (node: any) => void\n+    parentNode: (node: any) => any\n+    nextSibling: (node: any) => any\n+    querySelector: (selector: string) => any\n+  }\n+  patchData: (\n+    el: any,\n+    key: string,\n+    prevValue: any,\n+    nextValue: any,\n+    preVNode: VNode | null,\n+    nextVNode: VNode,\n+    isSVG: boolean,\n+    // passed for DOM operations that removes child content\n+    // e.g. innerHTML & textContent\n+    unmountChildren: (children: VNode[], childFlags: ChildrenFlags) => void\n+  ) => void\n+  teardownVNode?: (vnode: VNode) => void\n+}\n+\n+// The whole mounting / patching / unmouting logic is placed inside this\n+// single function so that we can create multiple renderes with different\n+// platform definitions. This allows for use cases like creating a test\n+// renderer alongside an actual renderer.\n+export function createRenderer(options: RendererOptions) {\n+  const {\n+    queueJob,\n+    nodeOps: {\n+      createElement: platformCreateElement,\n+      createText: platformCreateText,\n+      setText: platformSetText,\n+      appendChild: platformAppendChild,\n+      insertBefore: platformInsertBefore,\n+      replaceChild: platformReplaceChild,\n+      removeChild: platformRemoveChild,\n+      clearContent: platformClearContent,\n+      parentNode: platformParentNode,\n+      nextSibling: platformNextSibling,\n+      querySelector: platformQuerySelector\n+    },\n+    patchData: platformPatchData,\n+    teardownVNode\n+  } = options\n+\n+  // Node operations (shimmed to handle virtual fragments) ---------------------\n+\n+  function appendChild(container: RenderNode, el: RenderNode | RenderFragment) {\n+    if (el.$f) {\n+      for (let i = 0; i < el.children.length; i++) {\n+        appendChild(container, el.children[i])\n+      }\n+    } else {\n+      platformAppendChild(container, el)\n+    }\n+  }\n+\n+  function insertBefore(\n+    container: RenderNode,\n+    el: RenderNode | RenderFragment,\n+    ref: RenderNode | RenderFragment\n+  ) {\n+    while (ref.$f) {\n+      ref = ref.children[0]\n+    }\n+    if (el.$f) {\n+      for (let i = 0; i < el.children.length; i++) {\n+        insertBefore(container, el.children[i], ref)\n+      }\n+    } else {\n+      platformInsertBefore(container, el, ref)\n+    }\n+  }\n+\n+  function removeChild(container: RenderNode, el: RenderNode | RenderFragment) {\n+    if (el.$f) {\n+      for (let i = 0; i < el.children.length; i++) {\n+        removeChild(container, el.children[i])\n+      }\n+    } else {\n+      platformRemoveChild(container, el)\n+    }\n+  }\n+\n+  function replaceChild(\n+    container: RenderNode,\n+    oldChild: RenderNode | RenderFragment,\n+    newChild: RenderNode | RenderFragment\n+  ) {\n+    if (oldChild.$f || newChild.$f) {\n+      insertOrAppend(container, newChild, oldChild)\n+      removeChild(container, oldChild)\n+    } else {\n+      platformReplaceChild(container, oldChild, newChild)\n+    }\n+  }\n+\n+  function parentNode(el: RenderNode | RenderFragment): RenderNode {\n+    while (el.$f) {\n+      el = el.children[0]\n+    }\n+    return platformParentNode(el)\n+  }\n+\n+  function insertOrAppend(\n+    container: RenderNode,\n+    newNode: RenderNode | RenderFragment,\n+    refNode: RenderNode | RenderFragment | null\n+  ) {\n+    // TODO special case for Fragment\n+    if (refNode === null) {\n+      appendChild(container, newNode)\n+    } else {\n+      insertBefore(container, newNode, refNode)\n+    }\n+  }\n+\n+  // lifecycle hooks -----------------------------------------------------------\n+\n+  const hooks: Function[] = []\n+\n+  function queueHook(fn: Function) {\n+    hooks.push(fn)\n+  }\n+\n+  function flushHooks() {\n+    let fn\n+    while ((fn = hooks.shift())) {\n+      fn()\n+    }\n+  }\n+\n+  // mounting ------------------------------------------------------------------\n+\n+  function mount(\n+    vnode: VNode,\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ): RenderNode | RenderFragment {\n+    const { flags } = vnode\n+    if (flags & VNodeFlags.ELEMENT) {\n+      return mountElement(vnode, container, parentComponent, isSVG, endNode)\n+    } else if (flags & VNodeFlags.COMPONENT) {\n+      return mountComponent(vnode, container, parentComponent, isSVG, endNode)\n+    } else if (flags & VNodeFlags.TEXT) {\n+      return mountText(vnode, container, endNode)\n+    } else if (flags & VNodeFlags.FRAGMENT) {\n+      return mountFragment(vnode, container, parentComponent, isSVG, endNode)\n+    } else if (flags & VNodeFlags.PORTAL) {\n+      return mountPortal(vnode, container, parentComponent)\n+    } else {\n+      return platformCreateText('')\n+    }\n+  }\n+\n+  function mountArrayChildren(\n+    children: VNode[],\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ) {\n+    for (let i = 0; i < children.length; i++) {\n+      let child = children[i]\n+      if (child.el) {\n+        children[i] = child = cloneVNode(child)\n+      }\n+      mount(children[i], container, parentComponent, isSVG, endNode)\n+    }\n+  }\n+\n+  function mountElement(\n+    vnode: VNode,\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ): RenderNode {\n+    const { flags, tag, data, children, childFlags, ref } = vnode\n+    isSVG = isSVG || (flags & VNodeFlags.ELEMENT_SVG) > 0\n+    const el = (vnode.el = platformCreateElement(tag as string, isSVG))\n+    if (data != null) {\n+      for (const key in data) {\n+        patchData(el, key, null, data[key], null, vnode, isSVG)\n+      }\n+    }\n+    if (childFlags !== ChildrenFlags.NO_CHILDREN) {\n+      const hasSVGChildren = isSVG && tag !== 'foreignObject'\n+      if (childFlags & ChildrenFlags.SINGLE_VNODE) {\n+        mount(children as VNode, el, parentComponent, hasSVGChildren, endNode)\n+      } else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\n+        mountArrayChildren(\n+          children as VNode[],\n+          el,\n+          parentComponent,\n+          hasSVGChildren,\n+          endNode\n+        )\n+      }\n+    }\n+    if (container != null) {\n+      insertOrAppend(container, el, endNode)\n+    }\n+    if (ref) {\n+      mountRef(ref, el)\n+    }\n+    return el\n+  }\n+\n+  function mountRef(ref: Ref, el: RenderNode | MountedComponent) {\n+    queueHook(() => {\n+      ref(el)\n+    })\n+  }\n+\n+  function mountComponent(\n+    vnode: VNode,\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ): RenderNode | RenderFragment {\n+    let el: RenderNode | RenderFragment\n+    const { flags, tag, data, slots } = vnode\n+    if (flags & VNodeFlags.COMPONENT_STATEFUL) {\n+      el = mountComponentInstance(\n+        vnode,\n+        tag as ComponentClass,\n+        container,\n+        parentComponent,\n+        isSVG,\n+        endNode\n+      )\n+    } else {\n+      // functional component\n+      const subTree = (vnode.children = normalizeComponentRoot(\n+        (tag as FunctionalComponent)(data || EMPTY_OBJ, slots || EMPTY_OBJ),\n+        vnode\n+      ))\n+      el = vnode.el = mount(subTree, null, parentComponent, isSVG, null)\n+    }\n+    if (container != null) {\n+      insertOrAppend(container, el, endNode)\n+    }\n+    return el\n+  }\n+\n+  function mountText(\n+    vnode: VNode,\n+    container: RenderNode | null,\n+    endNode: RenderNode | RenderFragment | null\n+  ): RenderNode {\n+    const el = (vnode.el = platformCreateText(vnode.children as string))\n+    if (container != null) {\n+      insertOrAppend(container, el, endNode)\n+    }\n+    return el\n+  }\n+\n+  function mountFragment(\n+    vnode: VNode,\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ): RenderFragment {\n+    const { children, childFlags } = vnode\n+    const fragment: RenderFragment = (vnode.el = {\n+      $f: true,\n+      children: []\n+    })\n+    const fragmentChildren = fragment.children\n+    if (childFlags & ChildrenFlags.SINGLE_VNODE) {\n+      fragmentChildren.push(\n+        mount(children as VNode, container, parentComponent, isSVG, endNode)\n+      )\n+    } else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\n+      mountArrayChildren(\n+        children as VNode[],\n+        container,\n+        parentComponent,\n+        isSVG,\n+        endNode\n+      )\n+      for (let i = 0; i < (children as MountedVNodes).length; i++) {\n+        fragmentChildren.push((children as MountedVNodes)[i].el)\n+      }\n+    } else {\n+      // ensure at least one children so that it can be used as a ref node\n+      // during insertions\n+      fragmentChildren.push(mountText(createTextVNode(''), container, endNode))\n+    }\n+    return fragment\n+  }\n+\n+  function mountPortal(\n+    vnode: VNode,\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null\n+  ): RenderNode {\n+    const { tag, children, childFlags, ref } = vnode\n+    const target = typeof tag === 'string' ? platformQuerySelector(tag) : tag\n+\n+    if (__DEV__ && !target) {\n+      // TODO warn poartal target not found\n+    }\n+\n+    if (childFlags & ChildrenFlags.SINGLE_VNODE) {\n+      mount(\n+        children as VNode,\n+        target as RenderNode,\n+        parentComponent,\n+        false,\n+        null\n+      )\n+    } else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\n+      mountArrayChildren(\n+        children as VNode[],\n+        target as RenderNode,\n+        parentComponent,\n+        false,\n+        null\n+      )\n+    }\n+    if (ref) {\n+      mountRef(ref, target as RenderNode)\n+    }\n+    return (vnode.el = mountText(createTextVNode(''), container, null))\n+  }\n+\n+  // patching ------------------------------------------------------------------\n+\n+  function patchData(\n+    el: RenderNode,\n+    key: string,\n+    prevValue: any,\n+    nextValue: any,\n+    preVNode: VNode | null,\n+    nextVNode: VNode,\n+    isSVG: boolean\n+  ) {\n+    if (isReservedProp(key)) {\n+      return\n+    }\n+    platformPatchData(\n+      el,\n+      key,\n+      prevValue,\n+      nextValue,\n+      preVNode,\n+      nextVNode,\n+      isSVG,\n+      unmountChildren\n+    )\n+  }\n+\n+  function patch(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean\n+  ) {\n+    const nextFlags = nextVNode.flags\n+    const prevFlags = prevVNode.flags\n+\n+    if (prevFlags !== nextFlags) {\n+      replaceVNode(prevVNode, nextVNode, container, parentComponent, isSVG)\n+    } else if (nextFlags & VNodeFlags.ELEMENT) {\n+      patchElement(prevVNode, nextVNode, container, parentComponent, isSVG)\n+    } else if (nextFlags & VNodeFlags.COMPONENT) {\n+      patchComponent(prevVNode, nextVNode, container, parentComponent, isSVG)\n+    } else if (nextFlags & VNodeFlags.TEXT) {\n+      patchText(prevVNode, nextVNode)\n+    } else if (nextFlags & VNodeFlags.FRAGMENT) {\n+      patchFragment(prevVNode, nextVNode, container, parentComponent, isSVG)\n+    } else if (nextFlags & VNodeFlags.PORTAL) {\n+      patchPortal(prevVNode, nextVNode, parentComponent)\n+    }\n+  }\n+\n+  function patchElement(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean\n+  ) {\n+    const { flags, tag } = nextVNode\n+    isSVG = isSVG || (flags & VNodeFlags.ELEMENT_SVG) > 0\n+\n+    if (prevVNode.tag !== tag) {\n+      replaceVNode(prevVNode, nextVNode, container, parentComponent, isSVG)\n+      return\n+    }\n+\n+    const el = (nextVNode.el = prevVNode.el) as RenderNode\n+\n+    // data\n+    const prevData = prevVNode.data\n+    const nextData = nextVNode.data\n+    if (prevData !== nextData) {\n+      const prevDataOrEmpty = prevData || EMPTY_OBJ\n+      const nextDataOrEmpty = nextData || EMPTY_OBJ\n+      if (nextDataOrEmpty !== EMPTY_OBJ) {\n+        for (const key in nextDataOrEmpty) {\n+          const prevValue = prevDataOrEmpty[key]\n+          const nextValue = nextDataOrEmpty[key]\n+          if (prevValue !== nextValue) {\n+            patchData(\n+              el,\n+              key,\n+              prevValue,\n+              nextValue,\n+              prevVNode,\n+              nextVNode,\n+              isSVG\n+            )\n+          }\n+        }\n+      }\n+      if (prevDataOrEmpty !== EMPTY_OBJ) {\n+        for (const key in prevDataOrEmpty) {\n+          const prevValue = prevDataOrEmpty[key]\n+          if (prevValue != null && !nextDataOrEmpty.hasOwnProperty(key)) {\n+            patchData(el, key, prevValue, null, prevVNode, nextVNode, isSVG)\n+          }\n+        }\n+      }\n+    }\n+\n+    // children\n+    patchChildren(\n+      prevVNode.childFlags,\n+      nextVNode.childFlags,\n+      prevVNode.children,\n+      nextVNode.children,\n+      el,\n+      parentComponent,\n+      isSVG && nextVNode.tag !== 'foreignObject',\n+      null\n+    )\n+  }\n+\n+  function patchComponent(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean\n+  ) {\n+    const { tag, flags } = nextVNode\n+    if (tag !== prevVNode.tag) {\n+      replaceVNode(prevVNode, nextVNode, container, parentComponent, isSVG)\n+    } else if (flags & VNodeFlags.COMPONENT_STATEFUL) {\n+      patchStatefulComponent(prevVNode, nextVNode)\n+    } else {\n+      patchFunctionalComponent(\n+        prevVNode,\n+        nextVNode,\n+        container,\n+        parentComponent,\n+        isSVG\n+      )\n+    }\n+  }\n+\n+  function patchStatefulComponent(prevVNode: VNode, nextVNode: VNode) {\n+    const { childFlags: prevChildFlags } = prevVNode\n+    const {\n+      data: nextProps,\n+      slots: nextSlots,\n+      childFlags: nextChildFlags\n+    } = nextVNode\n+\n+    const instance = (nextVNode.children =\n+      prevVNode.children) as MountedComponent\n+    instance.$slots = nextSlots || EMPTY_OBJ\n+    instance.$parentVNode = nextVNode\n+\n+    // Update props. This will trigger child update if necessary.\n+    if (nextProps !== null) {\n+      updateProps(instance, nextProps)\n+    }\n+\n+    // If has different slots content, or has non-compiled slots,\n+    // the child needs to be force updated. It's ok to call $forceUpdate\n+    // again even if props update has already queued an update, as the\n+    // scheduler will not queue the same update twice.\n+    const shouldForceUpdate =\n+      prevChildFlags !== nextChildFlags ||\n+      (nextChildFlags & ChildrenFlags.DYNAMIC_SLOTS) > 0\n+    if (shouldForceUpdate) {\n+      instance.$forceUpdate()\n+    } else if (instance.$vnode.flags & VNodeFlags.COMPONENT) {\n+      instance.$vnode.parentVNode = nextVNode\n+    }\n+    nextVNode.el = instance.$vnode.el\n+  }\n+\n+  function patchFunctionalComponent(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean\n+  ) {\n+    // functional component tree is stored on the vnode as `children`\n+    const { data: prevProps, slots: prevSlots } = prevVNode\n+    const { data: nextProps, slots: nextSlots } = nextVNode\n+    const render = nextVNode.tag as FunctionalComponent\n+    const prevTree = prevVNode.children as VNode\n+\n+    let shouldUpdate = true\n+    if (render.pure && prevSlots == null && nextSlots == null) {\n+      shouldUpdate = shouldUpdateFunctionalComponent(prevProps, nextProps)\n+    }\n+\n+    if (shouldUpdate) {\n+      const nextTree = (nextVNode.children = normalizeComponentRoot(\n+        render(nextProps || EMPTY_OBJ, nextSlots || EMPTY_OBJ),\n+        nextVNode\n+      ))\n+      patch(prevTree, nextTree, container, parentComponent, isSVG)\n+      nextVNode.el = nextTree.el\n+    } else if (prevTree.flags & VNodeFlags.COMPONENT) {\n+      // functional component returned another component\n+      prevTree.parentVNode = nextVNode\n+    }\n+  }\n+\n+  function patchFragment(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean\n+  ) {\n+    // determine the tail node of the previous fragment,\n+    // then retrieve its next sibling to use as the end node for patchChildren.\n+    let prevElement = prevVNode.el as RenderNode | RenderFragment\n+    while (prevElement.$f) {\n+      prevElement = prevElement.children[prevElement.children.length - 1]\n+    }\n+    const { children, childFlags } = nextVNode\n+    patchChildren(\n+      prevVNode.childFlags,\n+      childFlags,\n+      prevVNode.children,\n+      children,\n+      container,\n+      parentComponent,\n+      isSVG,\n+      platformNextSibling(prevElement)\n+    )\n+    nextVNode.el = prevVNode.el as RenderFragment\n+    const fragmentChildren: (\n+      | RenderNode\n+      | RenderFragment)[] = (nextVNode.el.children = [])\n+    if (childFlags & ChildrenFlags.SINGLE_VNODE) {\n+      fragmentChildren.push((children as MountedVNode).el)\n+    } else if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\n+      for (let i = 0; i < (children as MountedVNodes).length; i++) {\n+        fragmentChildren.push((children as MountedVNodes)[i].el)\n+      }\n+    } else {\n+      fragmentChildren.push(mountText(createTextVNode(''), null, null))\n+    }\n+  }\n+\n+  function patchText(prevVNode: VNode, nextVNode: VNode) {\n+    const el = (nextVNode.el = prevVNode.el) as RenderNode\n+    const nextText = nextVNode.children\n+    if (nextText !== prevVNode.children) {\n+      platformSetText(el, nextText as string)\n+    }\n+  }\n+\n+  function patchPortal(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    parentComponent: MountedComponent | null\n+  ) {\n+    const prevContainer = prevVNode.tag as RenderNode\n+    const nextContainer = nextVNode.tag as RenderNode\n+    const nextChildren = nextVNode.children\n+    patchChildren(\n+      prevVNode.childFlags,\n+      nextVNode.childFlags,\n+      prevVNode.children,\n+      nextChildren,\n+      prevContainer,\n+      parentComponent,\n+      false,\n+      null\n+    )\n+    nextVNode.el = prevVNode.el\n+    if (nextContainer !== prevContainer) {\n+      switch (nextVNode.childFlags) {\n+        case ChildrenFlags.SINGLE_VNODE:\n+          appendChild(nextContainer, (nextChildren as MountedVNode).el)\n+          break\n+        case ChildrenFlags.NO_CHILDREN:\n+          break\n+        default:\n+          for (let i = 0; i < (nextChildren as MountedVNodes).length; i++) {\n+            appendChild(nextContainer, (nextChildren as MountedVNodes)[i].el)\n+          }\n+          break\n+      }\n+    }\n+  }\n+\n+  function replaceVNode(\n+    prevVNode: VNode,\n+    nextVNode: VNode,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean\n+  ) {\n+    unmount(prevVNode)\n+    replaceChild(\n+      container,\n+      prevVNode.el as RenderNode | RenderFragment,\n+      mount(nextVNode, null, parentComponent, isSVG, null)\n+    )\n+  }\n+\n+  function patchChildren(\n+    prevChildFlags: ChildrenFlags,\n+    nextChildFlags: ChildrenFlags,\n+    prevChildren: VNodeChildren,\n+    nextChildren: VNodeChildren,\n+    container: RenderNode,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ) {\n+    switch (prevChildFlags) {\n+      case ChildrenFlags.SINGLE_VNODE:\n+        switch (nextChildFlags) {\n+          case ChildrenFlags.SINGLE_VNODE:\n+            patch(\n+              prevChildren as VNode,\n+              nextChildren as VNode,\n+              container,\n+              parentComponent,\n+              isSVG\n+            )\n+            break\n+          case ChildrenFlags.NO_CHILDREN:\n+            remove(prevChildren as VNode, container)\n+            break\n+          default:\n+            remove(prevChildren as VNode, container)\n+            mountArrayChildren(\n+              nextChildren as VNode[],\n+              container,\n+              parentComponent,\n+              isSVG,\n+              endNode\n+            )\n+            break\n+        }\n+        break\n+      case ChildrenFlags.NO_CHILDREN:\n+        switch (nextChildFlags) {\n+          case ChildrenFlags.SINGLE_VNODE:\n+            mount(\n+              nextChildren as VNode,\n+              container,\n+              parentComponent,\n+              isSVG,\n+              endNode\n+            )\n+            break\n+          case ChildrenFlags.NO_CHILDREN:\n+            break\n+          default:\n+            mountArrayChildren(\n+              nextChildren as VNode[],\n+              container,\n+              parentComponent,\n+              isSVG,\n+              endNode\n+            )\n+            break\n+        }\n+        break\n+      default:\n+        // MULTIPLE_CHILDREN\n+        if (nextChildFlags === ChildrenFlags.SINGLE_VNODE) {\n+          removeAll(prevChildren as MountedVNodes, container, endNode)\n+          mount(\n+            nextChildren as VNode,\n+            container,\n+            parentComponent,\n+            isSVG,\n+            endNode\n+          )\n+        } else if (nextChildFlags === ChildrenFlags.NO_CHILDREN) {\n+          removeAll(prevChildren as MountedVNodes, container, endNode)\n+        } else {\n+          const prevLength = (prevChildren as VNode[]).length\n+          const nextLength = (nextChildren as VNode[]).length\n+          if (prevLength === 0) {\n+            if (nextLength > 0) {\n+              mountArrayChildren(\n+                nextChildren as VNode[],\n+                container,\n+                parentComponent,\n+                isSVG,\n+                endNode\n+              )\n+            }\n+          } else if (nextLength === 0) {\n+            removeAll(prevChildren as MountedVNodes, container, endNode)\n+          } else if (\n+            prevChildFlags === ChildrenFlags.KEYED_VNODES &&\n+            nextChildFlags === ChildrenFlags.KEYED_VNODES\n+          ) {\n+            patchKeyedChildren(\n+              prevChildren as VNode[],\n+              nextChildren as VNode[],\n+              container,\n+              prevLength,\n+              nextLength,\n+              parentComponent,\n+              isSVG,\n+              endNode\n+            )\n+          } else {\n+            patchNonKeyedChildren(\n+              prevChildren as VNode[],\n+              nextChildren as VNode[],\n+              container,\n+              prevLength,\n+              nextLength,\n+              parentComponent,\n+              isSVG,\n+              endNode\n+            )\n+          }\n+        }\n+        break\n+    }\n+  }\n+\n+  function patchNonKeyedChildren(\n+    prevChildren: VNode[],\n+    nextChildren: VNode[],\n+    container: RenderNode,\n+    prevLength: number,\n+    nextLength: number,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ) {\n+    const commonLength = prevLength > nextLength ? nextLength : prevLength\n+    let i = 0\n+    let nextChild\n+    let prevChild\n+    for (i; i < commonLength; i++) {\n+      nextChild = nextChildren[i]\n+      prevChild = prevChildren[i]\n+      if (nextChild.el) {\n+        nextChildren[i] = nextChild = cloneVNode(nextChild)\n+      }\n+      patch(prevChild, nextChild, container, parentComponent, isSVG)\n+      prevChildren[i] = nextChild\n+    }\n+    if (prevLength < nextLength) {\n+      for (i = commonLength; i < nextLength; i++) {\n+        nextChild = nextChildren[i]\n+        if (nextChild.el) {\n+          nextChildren[i] = nextChild = cloneVNode(nextChild)\n+        }\n+        mount(nextChild, container, parentComponent, isSVG, endNode)\n+      }\n+    } else if (prevLength > nextLength) {\n+      for (i = commonLength; i < prevLength; i++) {\n+        remove(prevChildren[i], container)\n+      }\n+    }\n+  }\n+\n+  function patchKeyedChildren(\n+    prevChildren: VNode[],\n+    nextChildren: VNode[],\n+    container: RenderNode,\n+    prevLength: number,\n+    nextLength: number,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ) {\n+    let prevEnd = prevLength - 1\n+    let nextEnd = nextLength - 1\n+    let i\n+    let j = 0\n+    let prevVNode = prevChildren[j]\n+    let nextVNode = nextChildren[j]\n+    let nextPos\n+\n+    outer: {\n+      // Sync nodes with the same key at the beginning.\n+      while (prevVNode.key === nextVNode.key) {\n+        if (nextVNode.el) {\n+          nextChildren[j] = nextVNode = cloneVNode(nextVNode)\n+        }\n+        patch(prevVNode, nextVNode, container, parentComponent, isSVG)\n+        prevChildren[j] = nextVNode\n+        j++\n+        if (j > prevEnd || j > nextEnd) {\n+          break outer\n+        }\n+        prevVNode = prevChildren[j]\n+        nextVNode = nextChildren[j]\n+      }\n+\n+      prevVNode = prevChildren[prevEnd]\n+      nextVNode = nextChildren[nextEnd]\n+\n+      // Sync nodes with the same key at the end.\n+      while (prevVNode.key === nextVNode.key) {\n+        if (nextVNode.el) {\n+          nextChildren[nextEnd] = nextVNode = cloneVNode(nextVNode)\n+        }\n+        patch(prevVNode, nextVNode, container, parentComponent, isSVG)\n+        prevChildren[prevEnd] = nextVNode\n+        prevEnd--\n+        nextEnd--\n+        if (j > prevEnd || j > nextEnd) {\n+          break outer\n+        }\n+        prevVNode = prevChildren[prevEnd]\n+        nextVNode = nextChildren[nextEnd]\n+      }\n+    }\n+\n+    if (j > prevEnd) {\n+      if (j <= nextEnd) {\n+        nextPos = nextEnd + 1\n+        const nextNode =\n+          nextPos < nextLength ? nextChildren[nextPos].el : endNode\n+        while (j <= nextEnd) {\n+          nextVNode = nextChildren[j]\n+          if (nextVNode.el) {\n+            nextChildren[j] = nextVNode = cloneVNode(nextVNode)\n+          }\n+          j++\n+          mount(nextVNode, container, parentComponent, isSVG, nextNode)\n+        }\n+      }\n+    } else if (j > nextEnd) {\n+      while (j <= prevEnd) {\n+        remove(prevChildren[j++], container)\n+      }\n+    } else {\n+      let prevStart = j\n+      const nextStart = j\n+      const prevLeft = prevEnd - j + 1\n+      const nextLeft = nextEnd - j + 1\n+      const sources: number[] = []\n+      for (i = 0; i < nextLeft; i++) {\n+        sources.push(0)\n+      }\n+      // Keep track if its possible to remove whole DOM using textContent = ''\n+      let canRemoveWholeContent = prevLeft === prevLength\n+      let moved = false\n+      let pos = 0\n+      let patched = 0\n+\n+      // When sizes are small, just loop them through\n+      if (nextLength < 4 || (prevLeft | nextLeft) < 32) {\n+        for (i = prevStart; i <= prevEnd; i++) {\n+          prevVNode = prevChildren[i]\n+          if (patched < nextLeft) {\n+            for (j = nextStart; j <= nextEnd; j++) {\n+              nextVNode = nextChildren[j]\n+              if (prevVNode.key === nextVNode.key) {\n+                sources[j - nextStart] = i + 1\n+                if (canRemoveWholeContent) {\n+                  canRemoveWholeContent = false\n+                  while (i > prevStart) {\n+                    remove(prevChildren[prevStart++], container)\n+                  }\n+                }\n+                if (pos > j) {\n+                  moved = true\n+                } else {\n+                  pos = j\n+                }\n+                if (nextVNode.el) {\n+                  nextChildren[j] = nextVNode = cloneVNode(nextVNode)\n+                }\n+                patch(prevVNode, nextVNode, container, parentComponent, isSVG)\n+                patched++\n+                break\n+              }\n+            }\n+            if (!canRemoveWholeContent && j > nextEnd) {\n+              remove(prevVNode, container)\n+            }\n+          } else if (!canRemoveWholeContent) {\n+            remove(prevVNode, container)\n+          }\n+        }\n+      } else {\n+        const keyIndex: Record<string, number> = {}\n+\n+        // Map keys by their index\n+        for (i = nextStart; i <= nextEnd; i++) {\n+          keyIndex[nextChildren[i].key as string] = i\n+        }\n+\n+        // Try to patch same keys\n+        for (i = prevStart; i <= prevEnd; i++) {\n+          prevVNode = prevChildren[i]\n+\n+          if (patched < nextLeft) {\n+            j = keyIndex[prevVNode.key as string]\n+\n+            if (j !== void 0) {\n+              if (canRemoveWholeContent) {\n+                canRemoveWholeContent = false\n+                while (i > prevStart) {\n+                  remove(prevChildren[prevStart++], container)\n+                }\n+              }\n+              nextVNode = nextChildren[j]\n+              sources[j - nextStart] = i + 1\n+              if (pos > j) {\n+                moved = true\n+              } else {\n+                pos = j\n+              }\n+              if (nextVNode.el) {\n+                nextChildren[j] = nextVNode = cloneVNode(nextVNode)\n+              }\n+              patch(prevVNode, nextVNode, container, parentComponent, isSVG)\n+              patched++\n+            } else if (!canRemoveWholeContent) {\n+              remove(prevVNode, container)\n+            }\n+          } else if (!canRemoveWholeContent) {\n+            remove(prevVNode, container)\n+          }\n+        }\n+      }\n+      // fast-path: if nothing patched remove all old and add all new\n+      if (canRemoveWholeContent) {\n+        removeAll(prevChildren as MountedVNodes, container, endNode)\n+        mountArrayChildren(\n+          nextChildren,\n+          container,\n+          parentComponent,\n+          isSVG,\n+          endNode\n+        )\n+      } else {\n+        if (moved) {\n+          const seq = lis(sources)\n+          j = seq.length - 1\n+          for (i = nextLeft - 1; i >= 0; i--) {\n+            if (sources[i] === 0) {\n+              pos = i + nextStart\n+              nextVNode = nextChildren[pos]\n+              if (nextVNode.el) {\n+                nextChildren[pos] = nextVNode = cloneVNode(nextVNode)\n+              }\n+              nextPos = pos + 1\n+              mount(\n+                nextVNode,\n+                container,\n+                parentComponent,\n+                isSVG,\n+                nextPos < nextLength ? nextChildren[nextPos].el : endNode\n+              )\n+            } else if (j < 0 || i !== seq[j]) {\n+              pos = i + nextStart\n+              nextVNode = nextChildren[pos]\n+              nextPos = pos + 1\n+              insertOrAppend(\n+                container,\n+                nextVNode.el as RenderNode | RenderFragment,\n+                nextPos < nextLength ? nextChildren[nextPos].el : endNode\n+              )\n+            } else {\n+              j--\n+            }\n+          }\n+        } else if (patched !== nextLeft) {\n+          // when patched count doesn't match b length we need to insert those\n+          // new ones loop backwards so we can use insertBefore\n+          for (i = nextLeft - 1; i >= 0; i--) {\n+            if (sources[i] === 0) {\n+              pos = i + nextStart\n+              nextVNode = nextChildren[pos]\n+              if (nextVNode.el) {\n+                nextChildren[pos] = nextVNode = cloneVNode(nextVNode)\n+              }\n+              nextPos = pos + 1\n+              mount(\n+                nextVNode,\n+                container,\n+                parentComponent,\n+                isSVG,\n+                nextPos < nextLength ? nextChildren[nextPos].el : endNode\n+              )\n+            }\n+          }\n+        }\n+      }\n+    }\n+  }\n+\n+  // https://en.wikipedia.org/wiki/Longest_increasing_subsequence\n+  function lis(arr: number[]): number[] {\n+    const p = arr.slice()\n+    const result = [0]\n+    let i\n+    let j\n+    let u\n+    let v\n+    let c\n+    const len = arr.length\n+    for (i = 0; i < len; i++) {\n+      const arrI = arr[i]\n+      if (arrI !== 0) {\n+        j = result[result.length - 1]\n+        if (arr[j] < arrI) {\n+          p[i] = j\n+          result.push(i)\n+          continue\n+        }\n+        u = 0\n+        v = result.length - 1\n+        while (u < v) {\n+          c = ((u + v) / 2) | 0\n+          if (arr[result[c]] < arrI) {\n+            u = c + 1\n+          } else {\n+            v = c\n+          }\n+        }\n+        if (arrI < arr[result[u]]) {\n+          if (u > 0) {\n+            p[i] = result[u - 1]\n+          }\n+          result[u] = i\n+        }\n+      }\n+    }\n+    u = result.length\n+    v = result[u - 1]\n+    while (u-- > 0) {\n+      result[u] = v\n+      v = p[v]\n+    }\n+    return result\n+  }\n+\n+  // unmounting ----------------------------------------------------------------\n+\n+  function unmount(vnode: VNode) {\n+    const { flags, children, childFlags, ref } = vnode\n+    if (flags & VNodeFlags.ELEMENT || flags & VNodeFlags.FRAGMENT) {\n+      unmountChildren(children as VNodeChildren, childFlags)\n+      if (teardownVNode !== void 0) {\n+        teardownVNode(vnode)\n+      }\n+    } else if (flags & VNodeFlags.COMPONENT) {\n+      if (flags & VNodeFlags.COMPONENT_STATEFUL) {\n+        unmountComponentInstance(children as MountedComponent)\n+      } else {\n+        unmount(children as VNode)\n+      }\n+    } else if (flags & VNodeFlags.PORTAL) {\n+      if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\n+        removeAll(children as MountedVNodes, vnode.tag as RenderNode, null)\n+      } else if (childFlags === ChildrenFlags.SINGLE_VNODE) {\n+        remove(children as VNode, vnode.tag as RenderNode)\n+      }\n+    }\n+    if (ref) {\n+      ref(null)\n+    }\n+  }\n+\n+  function unmountChildren(children: VNodeChildren, childFlags: ChildrenFlags) {\n+    if (childFlags & ChildrenFlags.MULTIPLE_VNODES) {\n+      unmountArrayChildren(children as VNode[])\n+    } else if (childFlags === ChildrenFlags.SINGLE_VNODE) {\n+      unmount(children as VNode)\n+    }\n+  }\n+\n+  function unmountArrayChildren(children: VNode[]) {\n+    for (let i = 0; i < children.length; i++) {\n+      unmount(children[i])\n+    }\n+  }\n+\n+  function remove(vnode: VNode, container: RenderNode) {\n+    unmount(vnode)\n+    if (container && vnode.el) {\n+      removeChild(container, vnode.el)\n+      vnode.el = null\n+    }\n+  }\n+\n+  function removeAll(\n+    children: MountedVNodes,\n+    container: RenderNode,\n+    ref: RenderNode | RenderFragment | null\n+  ) {\n+    unmountArrayChildren(children)\n+    if (ref === null) {\n+      platformClearContent(container)\n+    } else {\n+      for (let i = 0; i < children.length; i++) {\n+        removeChild(container, children[i].el as RenderNode | RenderFragment)\n+      }\n+    }\n+  }\n+\n+  // Component lifecycle -------------------------------------------------------\n+\n+  function mountComponentInstance(\n+    parentVNode: VNode,\n+    Component: ComponentClass,\n+    container: RenderNode | null,\n+    parentComponent: MountedComponent | null,\n+    isSVG: boolean,\n+    endNode: RenderNode | RenderFragment | null\n+  ): RenderNode {\n+    const instance = createComponentInstance(\n+      parentVNode,\n+      Component,\n+      parentComponent\n+    )\n+\n+    const queueUpdate = (instance.$forceUpdate = () => {\n+      queueJob(instance._updateHandle, flushHooks)\n+    })\n+\n+    instance._updateHandle = autorun(\n+      () => {\n+        if (instance._destroyed) {\n+          return\n+        }\n+        if (instance._mounted) {\n+          updateComponentInstance(instance, container, isSVG)\n+        } else {\n+          // this will be executed synchronously right here\n+          instance.$vnode = renderInstanceRoot(instance)\n+          parentVNode.el = mount(\n+            instance.$vnode,\n+            container,\n+            instance,\n+            isSVG,\n+            endNode\n+          )\n+          instance._mounted = true\n+          mountComponentInstanceCallbacks(instance, parentVNode.ref)\n+        }\n+      },\n+      {\n+        scheduler: queueUpdate,\n+        onTrigger:\n+          instance.beforeUpdate && instance.beforeUpdate.bind(instance.$proxy)\n+      }\n+    )\n+\n+    return parentVNode.el as RenderNode\n+  }\n+\n+  function mountComponentInstanceCallbacks(\n+    instance: MountedComponent,\n+    ref: Ref | null\n+  ) {\n+    if (instance.beforeMount) {\n+      instance.beforeMount.call(instance.$proxy)\n+    }\n+    if (ref) {\n+      mountRef(ref, instance)\n+    }\n+    if (instance.mounted) {\n+      queueHook(() => {\n+        ;(instance as any).mounted.call(instance.$proxy)\n+      })\n+    }\n+  }\n+\n+  function updateComponentInstance(\n+    instance: MountedComponent,\n+    container: RenderNode | null,\n+    isSVG: boolean\n+  ) {\n+    // beforeUpdate is called as the onTrack hook of the instance's reactive\n+    // runner\n+    const prevVNode = instance.$vnode\n+    const nextVNode = (instance.$vnode = renderInstanceRoot(instance))\n+    container =\n+      container || parentNode(prevVNode.el as RenderNode | RenderFragment)\n+    patch(prevVNode, nextVNode, container, instance, isSVG)\n+    const el = nextVNode.el as RenderNode\n+\n+    // recursively update parentVNode el for nested HOCs\n+    if ((nextVNode.flags & VNodeFlags.PORTAL) === 0) {\n+      let vnode = instance.$parentVNode\n+      while (vnode !== null) {\n+        if ((vnode.flags & VNodeFlags.COMPONENT) > 0) {\n+          vnode.el = el\n+        }\n+        vnode = vnode.parentVNode\n+      }\n+    }\n+\n+    if (instance.updated) {\n+      queueHook(() => {\n+        ;(instance as any).updated.call(instance.$proxy, nextVNode)\n+      })\n+    }\n+  }\n+\n+  function unmountComponentInstance(instance: MountedComponent) {\n+    if (instance.beforeDestroy) {\n+      instance.beforeDestroy.call(instance.$proxy)\n+    }\n+    if (instance.$vnode) {\n+      unmount(instance.$vnode)\n+    }\n+    stop(instance._updateHandle)\n+    teardownComponentInstance(instance)\n+    instance._destroyed = true\n+    if (instance.destroyed) {\n+      instance.destroyed.call(instance.$proxy)\n+    }\n+  }\n+\n+  // TODO hydrating ------------------------------------------------------------\n+\n+  // API -----------------------------------------------------------------------\n+\n+  function render(vnode: VNode | null, container: RenderNode) {\n+    const prevVNode = container.vnode\n+    if (vnode && vnode.el) {\n+      vnode = cloneVNode(vnode)\n+    }\n+    if (prevVNode == null) {\n+      if (vnode) {\n+        mount(vnode, container, null, false, null)\n+        container.vnode = vnode\n+      }\n+    } else {\n+      if (vnode) {\n+        patch(prevVNode, vnode, container, null, false)\n+        container.vnode = vnode\n+      } else {\n+        remove(prevVNode, container)\n+        container.vnode = null\n+      }\n+    }\n+    flushHooks()\n+  }\n+\n+  return { render }\n+}",
        "custom": {
          "notes": "创建一个渲染器，可以传入不同环境的 dom api，例如浏览器就传入各种浏览器 dom 操作api，底层统一的 vnode api，通过传入不同的宿主 dom api 可以实现不同宿主环境下的 vue 实例渲染，cool！\n\n## isSVG \n|  isSVG   | not  |\n|  ----  | ----  |\n| createElementNS  | createElement |\n| removeAttributeNS  | removeAttribute |\n| setAttributeNS  | setAttribute |\n| el.setAttribute('class' | el.className |\n\n## createRenderer\n\n内容主要分为几块\n1. 各种节点操作的方法\n2. 钩子队列管理\n3. mount 各类组件的方法\n4. patch 各类组件的方法\n5. unmont 各类组件的方法\n6. 组件生命周期\n7. render\n\n### 1. Node operations\n\n\n\n### 2. lifecycle hooks\n\n渲染组件或者元素节点时，如果有 ref 需要拿到对应实例或者 RenderNode的话，需要入口 render 整体 执行完毕，所以 hooks 就是一个队列，待 render 完成后会逐一执行，让开发者拿到对应实例。\n\n#### mountComponentInstance\n\n```ts\nfunction mountComponentInstance(\n    parentVNode: VNode,\n    Component: ComponentClass,\n    container: RenderNode | null,\n    parentComponent: MountedComponent | null,\n    isSVG: boolean,\n    endNode: RenderNode | RenderFragment | null\n)\n```\n\n1. 通过 createComponentInstance 创建一个组件实例\n2. 创建实例的更新器，同时也是一个 runner（！！太巧妙了！！）\n \n```ts\n const queueUpdate = (instance.$forceUpdate = () => {\n  queueJob(instance._updateHandle, flushHooks)\n})\n\ninstance._updateHandle = autorun(\n  () => {\n    ...\n    if (instance._mounted) {\n      updateComponentInstance(instance, container, isSVG)\n    } else {\n      // this will be executed synchronously right here\n      instance.$vnode = renderInstanceRoot(instance)\n      parentVNode.el = mount(\n        instance.$vnode,\n        container,\n        instance,\n        isSVG,\n        endNode\n      )\n      instance._mounted = true\n      mountComponentInstanceCallbacks(instance, parentVNode.ref)\n    }\n  },\n  {\n    scheduler: queueUpdate,\n    onTrigger:\n      instance.beforeUpdate && instance.beforeUpdate.bind(instance.$proxy)\n  }\n)\n```\n\n几个设计很巧妙：\n\n1. 把 updateHandler 的实现当作一个runner，这样就能响应式更新组件\n2. 把异步队列的调度放在 `scheduler: queueUpdate,`，queueUpdate 内再通过一个微任务调度执行。\n\n#### updateComponentInstance\n\n1. 通过 renderInstanceRoot 的到一个新 vnode\n2. patch\n3. 如果 &VNodeFlags.PORTAL, 递归设置 flag 为 VNodeFlags.COMPONENT 的 parentNode.el\n4. 如果最终有更新，则 queueHook 进行 instance.updated 调用（生命周期）\n\n#3\n```ts\nif ((nextVNode.flags & VNodeFlags.PORTAL) === 0) {\n  let vnode = instance.$parentVNode\n  while (vnode !== null) {\n    if ((vnode.flags & VNodeFlags.COMPONENT) > 0) {\n      vnode.el = el\n    }\n    vnode = vnode.parentVNode\n  }\n}\n```\n\n具体例子:\n```\n<div>\n    <CompA>\n        <CompB>\n            <CompC>\n                <TelePort>\n                    ...\n```\n\n当 nextVNode 对应 \\<TelePort> 组件 的 vnode 时，patch 后得到新 el（也可能没变化），需要递归把 parentVNode.el 更新，这里 每一个组件 parentVNode 都指向父组件占位 VNode，只到一个 非 组件的 vnode（\\<div>） 结束。\n\n#### mountComponentInstanceCallbacks\n\n在首次 mount 组件后执行\n\n1. call instance.beforeMount\n2. queueHook ref \n3. queueHook call instance.mounted\n\n#### unmountComponentInstance\n\n1. lifecycle hook: instance.beforeDestroy\n2. unmount(instance.$vnode)\n3. stop runner: instance._updateHandle\n4. teardownComponentInstance\n5. flag _destroyed = true\n6. lifecycle hook: instance.destroyed\n\n### 3. Mounting\n\n#### mount\n```ts\nmount(\n    vnode: VNode,\n    container: RenderNode | null,\n    parentComponent: MountedComponent | null,\n    isSVG: boolean,\n    endNode: RenderNode | RenderFragment | null\n  )\n```\n\n 所有类型 vnode 挂载都通过 mount方法，内部再去根据类型（vnode.flags）分发调用。\n\n- & ELEMENT\n- & COMPONENT\n- & TEXT\n- & FRAGMENT\n- & PORTAL\n\n#### mountElement\n```ts\n  function mountElement(\n    vnode: VNode,\n    container: RenderNode | null,\n    parentComponent: MountedComponent | null,\n    isSVG: boolean,\n    endNode: RenderNode | RenderFragment | null\n  )\n```\n\n1. 通过 platformCreateElement 创建 el\n2. 把 vnode.data patchData 到 el\n3. 若有 children \n    1. 单 node 则调用 mount\n    2. 多 node 则调用 mountArrayChildren\n4. container 非空则插入\n5. 有 ref 则 mountRef\n6. 返回 el\n\n@思考 TODO\nendNode 具体怎么定义？\n\n@知识点 \\<svg> 内 \\<foreignObject> 可以放 html，所以在 #3 判断孩子是否 svg 的时候除了判断当前是否 isSVG，还要判断 tag !== 'foreignObject'，因为 foreignObject 标签的孩子不是 svg。\n\n#### mountArrayChildren\n\n1. 遍历数组，如果有 .el，则 cloneVNode\n2. 调用 mount\n\n#### mountRef\n\nref 就是组件中 `<Comp ref=` 或者html元素中 `<div ref`，mountRef 实现：\n\n```ts\nqueueHook(() => {\n  ref(el)\n})\n```\n\n让开发者可以拿到组件实例或者是一个元素节点（RenderNode），为了保证所有 render 方法里面都 渲染完之后，在 flushHooks 的时候会执行这些队列中的 ref 方法，然后开发者的 ref 值才初始化\n\n#### mountComponent\n\n1. 创建\n    1. 如果是 stateful 组件，则通过 mountComponentInstance 创建得到 el\n    2. 如果是 functional 组件，则通过 normalizeComponentRoot 的到子树节点，然后在 mount 到\n2. 把 el 插入 container\n\n#### mountText\n\n通过 platformCreateText 创建，设置 vnode.el，insertOrAppend 到 container\n\n#### mountFragment\n\n初始化 vnode.el\n```\nvnode.el = {\n  $f: true,\n  children: []\n} as RenderFragment\n```\n\n之后把 children 都 mount 之后，将 children 的 el push 到 vnode.el.children 数组\n\nSINGLE_VNODE 则 mount，MULTIPLE_VNODES 则 mountArrayChildren，否则 mountText 则一个空串 textVNode，至少保证在插入期间，能被作为一个 node引用。\n\n#### mountPortal\n\n跟 mountFragment 几乎差不多，isSvg 为 false，没有 endNode，然后mount 的时候指定 container 为 vnode.tag 作为「选择器」得到的元素\n\n### 4. Patching\n#### patch\n\n```ts\n  function patch(\n    prevVNode: VNode,\n    nextVNode: VNode,\n    container: RenderNode,\n    parentComponent: MountedComponent | null,\n    isSVG: boolean\n  )\n```\n\n策略: 优先判断 flag 类型，如果不同则 replaceVNode，否则依次按照类型进行选择：patchElement、patchComponent、patchText、patchFragment、patchPortal\n\n#### patchData\n\nmountElement 的时候用在，在创建完 vnode.el 之后，会把 vnode.data 遍历 给 el patchData，内部实现就是确保 key 不是保留关键字，然后用 platformPatchData 执行。\n\n```ts\n function patchData(\n    el: RenderNode,\n    key: string,\n    prevValue: any,\n    nextValue: any,\n    preVNode: VNode | null,\n    nextVNode: VNode,\n    isSVG: boolean\n  )\n```\n\n其中 `vnode.data` :\n```ts\nexport interface VNodeData {\n  key?: Key | null\n  ref?: Ref | null\n  slots?: Slots | null\n  [key: string]: any\n}\n```\n\n#### patchElement\n\n1. 如果 vnode.tag 不一样，则 replaceVNode，结束\n2. 遍历 nextVNode.data，如果 value 不一样则 patchData\n3. 然后处理子节点，调用 patchChildren\n\n#### patchComponent\n\n1. 如果 vnode.tag 不一样，则 replaceVNode，结束\n2. COMPONENT_STATEFUL 则 patchStatefulComponent\n3. 其他组件类型则 patchFunctionalComponent\n\n#### patchStatefulComponent\n\n```ts\nfunction patchStatefulComponent(prevVNode: VNode, nextVNode: VNode) \n```\n\n1、更新属性\n\n```\n    instance.$slots = nextSlots || EMPTY_OBJ\n    instance.$parentVNode = nextVNode\n```\n\n2、更新 props\n3、确定 shouldForceUpdate，两种情况为true：childFlag 有变化；next childFlag 有动态 slot；\n4、如果确定要强制更新，则 instance.$forceUpdate()，否则如果是组件，则简单更新下 parentVNode (`instance.$vnode.parentVNode = nextVNode`)\n\nnote: 在 patch 组件之前，已经重新render 一个组件，所以 instance.$vnode 在 patch 之前就是最新的\n5、更新 el：nextVNode.el = instance.$vnode.el\n\n这里参数 nextVNode 是组件标签对应的占位 vnode。\n\n#### patchFunctionalComponent\n\n计算 shouldUpdate，默认 true。如果 pure，则直接浅比较 props 第一层属性值，如果都强等于，则 false。\n\n1. if shouldUpdate\n    1. 重新 render（vnode.tag）执行，参数是 nextProps 和 nextSlots\n    2. 将 render 结果进行 normalizeComponentRoot 之后设置到 nextVNode.children\n    3. patch children（子树）\n    4. nextVNode.el = nextTree.el\n2. 如果不用更新，并且是组件，则简单更新 prevNode.children.parentVNode = nextVNode\n\nnote: functional 组件没有 instance 概念，所以占位 vnode.children 就指向 vnode，而 stateful 组件的 vnode.children 指向 instance。\n    \n#### patchFragment\n\n1、找到 endNode\n\nendNode 的用户在于帮助 insert 的时候有一个参照，查找算法\n```ts\nlet prevElement = prevVNode.el as RenderNode | RenderFragment\nwhile (prevElement.$f) {\n  prevElement = prevElement.children[prevElement.children.length - 1]\n}\n```\n\n实际可能的代码：\n```\nCompA = <div></div><ul></ul>\nCompB = <label></label><input/>\n\nCompC = <CompA><CompB>\n```\n\n这时候最终渲染的 dom，应该是 `<div></div><ul></ul><label></label><input/>`，当我们要向 CompC insert 的时候，对于  ComC 来说，孩子都是打平的节点，此时需要递归条件 $f，找到最后一个 fragment 的最后一个孩子节点，就是 `<input/>`，然后把该节点的 nextSlibling 节点作为 **endNode**\n\n2、patchChildren\n\n3、设置 nextVNode.el，{$f: true, childrend: [ 这里存放孩子的el ]}，如果孩子既不是 VNODE，则push 一个空串 textNode\n\n#### patchText\n\n更新 el，判断 children (文本内容)不一样则用 platformSetText 更新\n\n#### patchPortal\n\n1、对 children 进行 patchChildren\n2、更新 el\n3、如果 vnode.tag 不强等\n    - SINGLE_VNODE：appendChild\n    - 忽略 NO_CHILDREN\n    - 其他则遍历再 appendChild\n\n#### replaceVNode\n\n1、unmount 旧 vnode\n2、mount 得到新 RenderNode\n3、操作node：replaceChild\n\n#### patchChildren\n对 childFlag 不同组合处理不同\n| prev \\ next | single | NO_CHILDREN | multiple \n| --- | --- | --- | -- |\n| single |  patch | remove | remove & mountArrayChildren\n| NO_CHILDREN | mount | - | mountArrayChildren\n| multiple  | removeAll & mount| removeAll | 「详解」\n\n两者都是 mul children 情况：\n\n- 旧长度 0，则 mountArrayChildren\n- 新长度 0，则 removeAll\n- 两者 children 都是带 key 的，则走 patchKeyedChildren 方法\n- 其他走 patchNonKeyedChildren 方法\n\n#### patchNonKeyedChildren\n\n1. 遍历，次数以长度取短者\n   1. 旧的 children 元素 cloneVNod\n   2. patch 对应位置旧孩子\n   3. 替换旧数组元素\n2. 处理剩余元素\n    - 新的剩余则 cloneVNode 然后 mount\n    - 旧的剩余则 remove\n\n#### patchKeyedChildren\n\n算法：\n\n1. 从前一遍，从后一遍，直到key不一样，cloneVNode & patch，从尾部也走一遍的优势如情况三\n2. xx\n    1. 如果从头的时候 prev 完了，next 没完 *情况一*\n        - 则遍历剩下 next ，进行 cloneVNode & patch\n    2.  如果从头的时候，next 完了 prev 没完 *情况二*\n        - 则遍历剩下 prev 进行 remove\n    3. 初始化 sources 数组，长度为 nextLeft 长度\n    4. prev 或者 next 都没走完，分两种策略\n        - *策略一*：长度小于阈值，两层遍历，把 key 相同的节点 patch\n            + 外层遍历 prev 剩余部分\n                1.  patched 计数 < nextLeft长度\n                    1. 则内层遍历 next 剩余部分， if key 相等：\n                        - canRemoveWholeContent 设置为 false，让下次匹配到时，就不要把之前的 prev 都干掉了，因为已经有匹配到的 prev node 还要用的。\n                        - 把 prev 当前索引之前的元素 remove（因为prev从头的时候没匹配到，当后续片段中有一个匹配到，则认为匹配往前的部分都废弃）\n                        - 设置标识，表示有patch 的元素移动过位置\n                        - 然后 cloneVNode(当前 nextNode) 设置nextChildren结果数组里\n                        - patch\n                        - **break** 内层的 next 遍历就结束了 @思考 why?\n                    2.  内层next遍历结束后，如果之前有next 匹配过 key，并且这次内层next遍历走到底都没配匹配，则干掉当前没用的 prev node\n                2. nextLeft 都 patch 完的话，remove 当前 prev node\n        - *策略二 *：核心逻辑一样，改用 <nextChildre[i].key, i> 来匹配 prevChildren 元素的key\n    5. 如果 canRemoveWholeContent 还是 true（意味着没有 prev 匹配到），直接 removeAll prev然后 mountArrayChildren next\n    6. 处理剩下的 next\n        + 如果有移动过（next patch 过程发现匹配 key 有移动）\n            - 找到 sources 的最长递增序列，并且取出最后一个值（增序序列里面最大的索引值）\n            - 倒遍历 next left  列表[i]\n                - 如果 sources[i] 为0（就是对应 next node 没有匹配 key）,cloneVNode & mount 对应 next 中 node\n                - 如果 i 还没到 增序序列尾游标，则 insertOrAppend\n                - 此时就是 i 碰到了增序序列尾巴，增序序列尾游标往前（意图就是保留匹配的key的一个最大序列元素不用动，其他节点挪动到合适位置，结果是一样，成本更低）\n        +  如果没有移动过，则把 next 剩余列表里，没有匹配key的逐一 cloneVNode & mount\n\n```ts\n// 情况一\nA1 B1\nA2 B2\n   B3\n   B4\n ```\n\n```ts\n//情况二\nA1 B1\nA2 B2\nA3\nA4\n```\n\n```ts\n//情况三 从头走完，再走从尾走一遍，A 列表的key其实都匹配完，此时就直接搞B剩下的\nA1 B1\nA2 B2\nA4 B3\nA5 B4\n   B5\n```\n\n1. 对剩余 nextChildren 生成映射 \n2. \n\n### 5. Unmounting\n\n#### unmount(vnode: VNode)\n\n- 判断 flag 类型\n    - &**ELEMENT** or **FRAGMENT**\n        - **unmountChildren**，之后 通过 RenderOptions 的 teardownVNode，让 runtime 开发者可以销毁 VNode 资源\n    - &**COMPONENT**\n        - **COMPONENT_STATEFUL** 则 `unmountComponentInstance(children as MountedComponent))`\n        - **非 COMPONENT_STATEFUL** 则 `unmount(children as VNode)`\n    - &**PORTAL**，判断 childFlags 类型\n        - **MULTIPLE_VNODES** 则 `removeAll(children as MountedVNodes, vnode.tag as RenderNode, null)`\n        -  **SINGLE_VNODE** 则 `remove(children as VNode, vnode.tag as RenderNode)`\n    - 如果有 ref，则 `ref(null)`，确保引用的实例置空\n\n#### unmountChildren(children: VNodeChildren, childFlags: ChildrenFlags) \n\n- childFlags 为 MULTIPLE_VNODES) 则 遍历children `unmount(children[i] as VNode)`\n- childFlags 为 SINGLE_VNODE) 则 `unmount(children as VNode)`\n\n#### remove(vnode: VNode, container: RenderNode) \n\n1. `unmount(vnode)`\n2. `removeChild(container, vnode.el); vnode.el = null`\n\n#### removeAll\n\n```ts\nfunction removeAll(\n    children: MountedVNodes,\n    container: RenderNode,\n    ref: RenderNode | RenderFragment | null\n)\n```\n\n1. unmountArrayChildren(children)\n2. 判断 ref 存在\n    - 不存在则，platformClearContent(container)\n    - 存在则，遍历 children `removeChild(container, children[i].el as RenderNode | RenderFragment)`\n\n@思考  这里 ref 通常是什么时候传入\n\n搜索目前所有 removeAll 调用，发现：只有在 unmount 一个 **PORTAL** 类型 vnode 的时候，ref 是不存在。暂时推测：Portal 的孩子都是放在组件占位 el 以外的地方，对于这部分 children，只管清楚内容即可，而组件本身 vnode 在if &Comopnent 会处理。\n\nrender(h(App), document.getElementById('app'))\n```\n\n当使用 vnode，常规操作有 el 就 cloneVNode。render 完成后，会把 vnode 挂到 container\n```\nconst prevVNode = container.vnode\nif (vnode && vnode.el) {\n    vnode = cloneVNode(vnode)\n}\n```\n\n如果是第一次把 vnode mount 到 container。\n```ts\nif (prevVNode == null) {\n  if (vnode) {\n    mount(vnode, container, null, false, null)\n    container.vnode = vnode\n  }\n}\n```\n\n如果是后续更新，则把新的 vnode 信息（可能只是props） patch 到之前的 vnode；\n如果是删除，则移除（umount 和 remove dom）\n```ts\nelse {\n  if (vnode) {\n    patch(prevVNode, vnode, container, null, false)\n    container.vnode = vnode\n  } else {\n    remove(prevVNode, container)\n    container.vnode = null\n  }\n}\n```\n\n完成了render后，执行队列钩子\n```ts\nflushHooks()\n```",
          "status": "done"
        }
      },
      {
        "sha": "7714bcf45fc3e5edb80b5cdda59068b44c7c7ff0",
        "filename": "packages/core/src/errorHandling.ts",
        "status": "added",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FerrorHandling.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2FerrorHandling.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FerrorHandling.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,26 @@\n+import { MountedComponent } from './component'\n+\n+export const enum ErrorTypes {\n+  LIFECYCLE = 1,\n+  RENDER = 2,\n+  NATIVE_EVENT_HANDLER = 3,\n+  COMPONENT_EVENT_HANDLER = 4\n+}\n+\n+const globalHandlers: Function[] = []\n+\n+export function globalHandleError(handler: () => void) {\n+  globalHandlers.push(handler)\n+  return () => {\n+    globalHandlers.splice(globalHandlers.indexOf(handler), 1)\n+  }\n+}\n+\n+export function handleError(\n+  err: Error,\n+  instance: MountedComponent,\n+  type: ErrorTypes,\n+  code: number\n+) {\n+  // TODO\n+}",
        "custom": {
          "notes": "错误类型枚举、注册全局错误处理器的方法",
          "status": "done"
        }
      },
      {
        "sha": "c248c4e5a7c842ea48ea5734ea4dcabcd30bf8bc",
        "filename": "packages/core/src/flags.ts",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fflags.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fflags.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2Fflags.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,31 @@\n+// vnode flags\n+export const enum VNodeFlags {\n+  ELEMENT_HTML = 1,\n+  ELEMENT_SVG = 1 << 1,\n+  ELEMENT = ELEMENT_HTML | ELEMENT_SVG,\n+\n+  COMPONENT_UNKNOWN = 1 << 2,\n+  COMPONENT_STATEFUL = 1 << 3,\n+  COMPONENT_FUNCTIONAL = 1 << 4,\n+  COMPONENT_ASYNC = 1 << 5,\n+  COMPONENT = COMPONENT_UNKNOWN |\n+    COMPONENT_STATEFUL |\n+    COMPONENT_FUNCTIONAL |\n+    COMPONENT_ASYNC,\n+\n+  TEXT = 1 << 6,\n+  FRAGMENT = 1 << 7,\n+  PORTAL = 1 << 8\n+}\n+\n+export const enum ChildrenFlags {\n+  UNKNOWN_CHILDREN = 0,\n+  NO_CHILDREN = 1,\n+  SINGLE_VNODE = 1 << 1,\n+  KEYED_VNODES = 1 << 2,\n+  NONE_KEYED_VNODES = 1 << 3,\n+  STABLE_SLOTS = 1 << 4,\n+  DYNAMIC_SLOTS = 1 << 5,\n+  HAS_SLOTS = STABLE_SLOTS | DYNAMIC_SLOTS,\n+  MULTIPLE_VNODES = KEYED_VNODES | NONE_KEYED_VNODES\n+}",
        "custom": {
          "notes": "vnode 类型和孩子类型做了枚举，有个编码技巧，使用二进制中每一位标识一个单独类型，有一些类型可以是单独类型的合集，可以方便通过二进制位中是否为1来判断类型。",
          "status": "done"
        }
      },
      {
        "sha": "99adfac60077d58e81f98375f1a3d4c2ff552fba",
        "filename": "packages/core/src/h.ts",
        "status": "added",
        "additions": 104,
        "deletions": 0,
        "changes": 104,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fh.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fh.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2Fh.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,104 @@\n+import { ChildrenFlags } from './flags'\n+import { ComponentClass, FunctionalComponent } from './component'\n+import { ComponentOptions } from './componentOptions'\n+import {\n+  VNode,\n+  createElementVNode,\n+  createComponentVNode,\n+  createTextVNode,\n+  createFragment,\n+  createPortal\n+} from './vdom'\n+\n+export const Fragment = Symbol()\n+export const Portal = Symbol()\n+\n+type ElementType =\n+  | string\n+  | FunctionalComponent\n+  | ComponentClass\n+  | ComponentOptions\n+  | typeof Fragment\n+  | typeof Portal\n+\n+export interface createElement {\n+  (tag: ElementType, data: any, children: any): VNode\n+  c: typeof createComponentVNode\n+  e: typeof createElementVNode\n+  t: typeof createTextVNode\n+  f: typeof createFragment\n+  p: typeof createPortal\n+}\n+\n+export const h = ((tag: ElementType, data: any, children: any): VNode => {\n+  if (Array.isArray(data) || (data !== void 0 && typeof data !== 'object')) {\n+    children = data\n+    data = null\n+  }\n+\n+  // TODO clone data if it is observed\n+\n+  let key = null\n+  let ref = null\n+  let portalTarget = null\n+  if (data != null) {\n+    if (data.slots != null) {\n+      children = data.slots\n+    }\n+    if (data.key != null) {\n+      ;({ key } = data)\n+    }\n+    if (data.ref != null) {\n+      ;({ ref } = data)\n+    }\n+    if (data.target != null) {\n+      portalTarget = data.target\n+    }\n+  }\n+\n+  if (typeof tag === 'string') {\n+    // element\n+    return createElementVNode(\n+      tag,\n+      data,\n+      children,\n+      ChildrenFlags.UNKNOWN_CHILDREN,\n+      key,\n+      ref\n+    )\n+  } else if (tag === Fragment) {\n+    if (__DEV__ && ref) {\n+      // TODO warn fragment cannot have ref\n+    }\n+    return createFragment(children, ChildrenFlags.UNKNOWN_CHILDREN, key)\n+  } else if (tag === Portal) {\n+    if (__DEV__ && !portalTarget) {\n+      // TODO warn portal must have a target\n+    }\n+    return createPortal(\n+      portalTarget,\n+      children,\n+      ChildrenFlags.UNKNOWN_CHILDREN,\n+      key,\n+      ref\n+    )\n+  } else {\n+    // TODO: handle fragment & portal types\n+    // TODO: warn ref on fragment\n+    // component\n+    return createComponentVNode(\n+      tag,\n+      data,\n+      children,\n+      ChildrenFlags.UNKNOWN_CHILDREN,\n+      key,\n+      ref\n+    )\n+  }\n+}) as createElement\n+\n+h.c = createComponentVNode\n+h.e = createElementVNode\n+h.t = createTextVNode\n+h.f = createFragment\n+h.p = createPortal",
        "custom": {
          "status": "done",
          "notes": "提供创建 VNode 的总入口，统一的创建方法 h: createElement，里面通过判断参数类型，然后使用对应的方法创建不同类型的 VNode。并且把不同类型 VNode 的创建方法挂到 h 上。"
        }
      },
      {
        "sha": "f37e98e324434b081db9bf4d23ba002047959e16",
        "filename": "packages/core/src/index.ts",
        "status": "added",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2Findex.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,29 @@\n+// render api\n+export { h, Fragment, Portal } from './h'\n+export { cloneVNode, createPortal, createFragment } from './vdom'\n+export { createRenderer } from './createRenderer'\n+\n+import { Component as InternalComponent, ComponentClass } from './component'\n+\n+// the public component constructor with proper type inference.\n+export const Component = InternalComponent as ComponentClass\n+\n+// observer api\n+export {\n+  autorun,\n+  stop,\n+  observable,\n+  immutable,\n+  computed,\n+  isObservable,\n+  isImmutable,\n+  markImmutable,\n+  markNonReactive,\n+  unwrap\n+} from '@vue/observer'\n+\n+// flags & types\n+export { FunctionalComponent } from './component'\n+export { ComponentOptions, PropType } from './componentOptions'\n+export { VNodeFlags, ChildrenFlags } from './flags'\n+export { VNode, VNodeData, VNodeChildren, Key, Ref, Slots, Slot } from './vdom'",
        "custom": { "status": "done" }
      },
      {
        "sha": "465c0d9b38fbc09a6116fcbc086d2c08f9e1d376",
        "filename": "packages/core/src/utils.ts",
        "status": "added",
        "additions": 12,
        "deletions": 0,
        "changes": 12,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Futils.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Futils.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2Futils.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,12 @@\n+export const EMPTY_OBJ: { readonly [key: string]: any } = Object.freeze({})\n+\n+export const isReservedProp = (key: string): boolean => {\n+  switch (key) {\n+    case 'key':\n+    case 'ref':\n+    case 'slots':\n+      return true\n+    default:\n+      return key.startsWith('nativeOn')\n+  }\n+}",
        "custom": {
          "status": "done",
          "notes": "一个不可修改的空对象\n\nisReservedProp 判断是否为保留关键字"
        }
      },
      {
        "sha": "519ea095c5038260da1c372ee8c5a15714448bdc",
        "filename": "packages/core/src/vdom.ts",
        "status": "added",
        "additions": 360,
        "deletions": 0,
        "changes": 360,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fvdom.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fcore%2Fsrc%2Fvdom.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2Fvdom.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,360 @@\n+import {\n+  MountedComponent,\n+  ComponentClass,\n+  FunctionalComponent\n+} from './component'\n+import { VNodeFlags, ChildrenFlags } from './flags'\n+import { normalizeComponentProps } from './componentProps'\n+import { createComponentClassFromOptions } from './componentUtils'\n+import { ComponentPropsOptions } from './componentOptions'\n+\n+// Vue core is platform agnostic, so we are not using Element for \"DOM\" nodes.\n+export interface RenderNode {\n+  vnode?: VNode | null\n+  // technically this doesn't exist on platforn render nodes,\n+  // but we list it here so that TS can figure out union types\n+  $f: false\n+}\n+\n+export interface RenderFragment {\n+  children: (RenderNode | RenderFragment)[]\n+  $f: true\n+}\n+\n+export interface VNode {\n+  _isVNode: true\n+  flags: VNodeFlags\n+  tag: string | FunctionalComponent | ComponentClass | RenderNode | null\n+  data: VNodeData | null\n+  children: VNodeChildren\n+  childFlags: ChildrenFlags\n+  key: Key | null\n+  ref: Ref | null\n+  slots: Slots | null\n+  // only on mounted nodes\n+  el: RenderNode | RenderFragment | null\n+  // only on mounted component root nodes\n+  // points to component node in parent tree\n+  parentVNode: VNode | null\n+}\n+\n+export interface MountedVNode extends VNode {\n+  el: RenderNode | RenderFragment\n+}\n+\n+export type MountedVNodes = MountedVNode[]\n+\n+export interface VNodeData {\n+  key?: Key | null\n+  ref?: Ref | null\n+  slots?: Slots | null\n+  [key: string]: any\n+}\n+\n+export type VNodeChildren =\n+  | VNode[] // ELEMENT | PORTAL\n+  | MountedComponent // COMPONENT_STATEFUL\n+  | VNode // COMPONENT_FUNCTIONAL\n+  | string // TEXT\n+  | null\n+\n+export type Key = string | number\n+\n+export type Ref = (t: RenderNode | MountedComponent | null) => void\n+\n+export interface Slots {\n+  [name: string]: Slot\n+}\n+\n+export type Slot = (...args: any[]) => VNode[]\n+\n+export function createVNode(\n+  flags: VNodeFlags,\n+  tag: string | FunctionalComponent | ComponentClass | RenderNode | null,\n+  data: VNodeData | null,\n+  children: VNodeChildren | null,\n+  childFlags: ChildrenFlags,\n+  key: Key | null | undefined,\n+  ref: Ref | null | undefined,\n+  slots: Slots | null | undefined\n+): VNode {\n+  const vnode: VNode = {\n+    _isVNode: true,\n+    flags,\n+    tag,\n+    data,\n+    children,\n+    childFlags,\n+    key: key === void 0 ? null : key,\n+    ref: ref === void 0 ? null : ref,\n+    slots: slots === void 0 ? null : slots,\n+    el: null,\n+    parentVNode: null\n+  }\n+  if (childFlags === ChildrenFlags.UNKNOWN_CHILDREN) {\n+    normalizeChildren(vnode, children)\n+  }\n+  return vnode\n+}\n+\n+export function createElementVNode(\n+  tag: string,\n+  data: VNodeData | null,\n+  children: VNodeChildren,\n+  childFlags: ChildrenFlags,\n+  key?: Key | null,\n+  ref?: Ref | null\n+) {\n+  const flags = tag === 'svg' ? VNodeFlags.ELEMENT_SVG : VNodeFlags.ELEMENT_HTML\n+  return createVNode(flags, tag, data, children, childFlags, key, ref, null)\n+}\n+\n+export function createComponentVNode(\n+  comp: any,\n+  data: VNodeData | null,\n+  children: VNodeChildren,\n+  childFlags: ChildrenFlags,\n+  key?: Key | null,\n+  ref?: Ref | null\n+) {\n+  // resolve type\n+  let flags: VNodeFlags\n+  let propsOptions: ComponentPropsOptions\n+\n+  // flags\n+  const compType = typeof comp\n+  if (__COMPAT__ && compType === 'object') {\n+    if (comp.functional) {\n+      // object literal functional\n+      flags = VNodeFlags.COMPONENT_FUNCTIONAL\n+      const { render } = comp\n+      if (!comp._normalized) {\n+        render.pure = comp.pure\n+        render.props = comp.props\n+        comp._normalized = true\n+      }\n+      comp = render\n+      propsOptions = comp.props\n+    } else {\n+      // object literal stateful\n+      flags = VNodeFlags.COMPONENT_STATEFUL\n+      comp =\n+        comp._normalized ||\n+        (comp._normalized = createComponentClassFromOptions(comp))\n+      propsOptions = comp.options && comp.options.props\n+    }\n+  } else {\n+    // assumes comp is function here now\n+    if (__DEV__ && compType !== 'function') {\n+      // TODO warn invalid comp value in dev\n+    }\n+    if (comp.prototype && comp.prototype.render) {\n+      flags = VNodeFlags.COMPONENT_STATEFUL\n+      propsOptions = comp.options && comp.options.props\n+    } else {\n+      flags = VNodeFlags.COMPONENT_FUNCTIONAL\n+      propsOptions = comp.props\n+    }\n+  }\n+\n+  if (__DEV__ && flags === VNodeFlags.COMPONENT_FUNCTIONAL && ref) {\n+    // TODO warn functional component cannot have ref\n+  }\n+\n+  // props\n+  const props = normalizeComponentProps(data, propsOptions, comp)\n+\n+  // slots\n+  let slots: any\n+  if (childFlags == null) {\n+    childFlags = children\n+      ? ChildrenFlags.DYNAMIC_SLOTS\n+      : ChildrenFlags.NO_CHILDREN\n+    if (children != null) {\n+      const childrenType = typeof children\n+      if (childrenType === 'function') {\n+        // function as children\n+        slots = { default: children }\n+      } else if (childrenType === 'object' && !(children as VNode)._isVNode) {\n+        // slot object as children\n+        slots = children\n+      } else {\n+        slots = { default: () => children }\n+      }\n+      slots = normalizeSlots(slots)\n+    }\n+  }\n+\n+  return createVNode(\n+    flags,\n+    comp,\n+    props,\n+    null, // to be set during mount\n+    childFlags,\n+    key,\n+    ref,\n+    slots\n+  )\n+}\n+\n+export function createTextVNode(text: string): VNode {\n+  return createVNode(\n+    VNodeFlags.TEXT,\n+    null,\n+    null,\n+    text == null ? '' : text,\n+    ChildrenFlags.NO_CHILDREN,\n+    null,\n+    null,\n+    null\n+  )\n+}\n+\n+export function createFragment(\n+  children: VNodeChildren,\n+  childFlags?: ChildrenFlags,\n+  key?: Key | null\n+) {\n+  return createVNode(\n+    VNodeFlags.FRAGMENT,\n+    null,\n+    null,\n+    children,\n+    childFlags === void 0 ? ChildrenFlags.UNKNOWN_CHILDREN : childFlags,\n+    key,\n+    null,\n+    null\n+  )\n+}\n+\n+export function createPortal(\n+  target: RenderNode | string,\n+  children: VNodeChildren,\n+  childFlags?: ChildrenFlags,\n+  key?: Key | null,\n+  ref?: Ref | null\n+): VNode {\n+  return createVNode(\n+    VNodeFlags.PORTAL,\n+    target,\n+    null,\n+    children,\n+    childFlags === void 0 ? ChildrenFlags.UNKNOWN_CHILDREN : childFlags,\n+    key,\n+    ref,\n+    null\n+  )\n+}\n+\n+export function cloneVNode(vnode: VNode, extraData?: VNodeData): VNode {\n+  const { flags, data } = vnode\n+  if (flags & VNodeFlags.ELEMENT || flags & VNodeFlags.COMPONENT) {\n+    let clonedData = data\n+    if (extraData != null) {\n+      clonedData = {}\n+      if (data != null) {\n+        for (const key in data) {\n+          clonedData[key] = data[key]\n+        }\n+      }\n+      for (const key in extraData) {\n+        clonedData[key] = extraData[key]\n+      }\n+    }\n+    return createVNode(\n+      flags,\n+      vnode.tag,\n+      clonedData,\n+      vnode.children,\n+      vnode.childFlags,\n+      vnode.key,\n+      vnode.ref,\n+      vnode.slots\n+    )\n+  } else if (flags & VNodeFlags.TEXT) {\n+    return createTextVNode(vnode.children as string)\n+  } else {\n+    return vnode\n+  }\n+}\n+\n+function normalizeChildren(vnode: VNode, children: any) {\n+  let childFlags\n+  if (Array.isArray(children)) {\n+    const { length } = children\n+    if (length === 0) {\n+      childFlags = ChildrenFlags.NO_CHILDREN\n+      children = null\n+    } else if (length === 1) {\n+      childFlags = ChildrenFlags.SINGLE_VNODE\n+      children = children[0]\n+      if (children.el) {\n+        children = cloneVNode(children)\n+      }\n+    } else {\n+      childFlags = ChildrenFlags.KEYED_VNODES\n+      children = normalizeVNodes(children)\n+    }\n+  } else if (children == null) {\n+    childFlags = ChildrenFlags.NO_CHILDREN\n+  } else if (children._isVNode) {\n+    childFlags = ChildrenFlags.SINGLE_VNODE\n+    if (children.el) {\n+      children = cloneVNode(children)\n+    }\n+  } else {\n+    // primitives or invalid values, cast to string\n+    childFlags = ChildrenFlags.SINGLE_VNODE\n+    children = createTextVNode(children + '')\n+  }\n+  vnode.children = children\n+  vnode.childFlags = childFlags\n+}\n+\n+export function normalizeVNodes(\n+  children: any[],\n+  newChildren: VNode[] = [],\n+  currentPrefix: string = ''\n+): VNode[] {\n+  for (let i = 0; i < children.length; i++) {\n+    const child = children[i]\n+    let newChild\n+    if (child == null) {\n+      newChild = createTextVNode('')\n+    } else if (child._isVNode) {\n+      newChild = child.el ? cloneVNode(child) : child\n+    } else if (Array.isArray(child)) {\n+      normalizeVNodes(child, newChildren, currentPrefix + i + '|')\n+    } else {\n+      newChild = createTextVNode(child + '')\n+    }\n+    if (newChild) {\n+      if (newChild.key == null) {\n+        newChild.key = currentPrefix + i\n+      }\n+      newChildren.push(newChild)\n+    }\n+  }\n+  return newChildren\n+}\n+\n+// ensure all slot functions return Arrays\n+function normalizeSlots(slots: { [name: string]: any }): Slots {\n+  const normalized: Slots = {}\n+  for (const name in slots) {\n+    normalized[name] = (...args) => normalizeSlot(slots[name](...args))\n+  }\n+  return normalized\n+}\n+\n+function normalizeSlot(value: any): VNode[] {\n+  if (value == null) {\n+    return [createTextVNode('')]\n+  } else if (Array.isArray(value)) {\n+    return normalizeVNodes(value)\n+  } else if (value._isVNode) {\n+    return [value]\n+  } else {\n+    return [createTextVNode(value + '')]\n+  }\n+}",
        "custom": {
          "notes": "提供创建各种类型 VNode 的方法\n\n## 方法\n\n### createVNode\n\n```ts\n(\n  flags: VNodeFlags,\n  tag: string | FunctionalComponent | ComponentClass | RenderNode | null,\n  data: VNodeData | null,\n  children: VNodeChildren | null,\n  childFlags: ChildrenFlags,\n  key: Key | null | undefined,\n  ref: Ref | null | undefined,\n  slots: Slots | null | undefined\n)\n```\n\n把参数设置保护一下，然后对 children 进行 normalizeChildren（确保 children 都是 VNode和设置正常 childFlags）\n\n### createElementVNode\n\n透传调用 createVNode，flat 区分 svg 和普通标签。\n\n### createTextVNode\n\nvnode 三个属性，flag 为 VNodeFlags.TEXT，children 为对应内容字符串，childFlags 为 ChildrenFlags.NO_CHILDREN。\n\n### createFragment\n\n透传调用 createVNode，没有：data、slots、标签/组件、ref\n\n### createPortal\n\n透传调用 createVNode，没有 data 和 slots\n\n### normalizeSlot (value: any)\n\n- null 则返回 [空串 TextVNode]\n- 数组 则调用 normalizeVNodes 返回\n- ._isVNode，则 [value]\n- 其他都当作文本，放回 TextVNode\n\n@思考：\nnormalizeSlot 对 ._isVNode 的处理跟 数组情况的 normalizeVNodes 处理的 .isVNode不一样，后者遇到 .isVNode 会 clone 一个 vnode。\n\n### normalizeSlots\n\n遍历数组调用 normalizeSlot\n\n### cloneVNode(vnode: VNode, extraData?: VNodeData)\n\n- 如果是 VNode 类型是 COMPONENT 或 ELEMENT 则通过新的 data 对象调用 createVNode 返回\n- 如果是 TEXT，则 createTextVNode(vnode.children)\n- 其他情况返回 vnode\n\n\n### normalizeVNodes\n\n```ts\nnormalizeVNodes(\n  children: any[],\n  newChildren: VNode[] = [],\n  currentPrefix: string = ''\n)\n```\n\n把嵌套数组元素打平，保证每个元素都是合法的VNode：\n\n- null 则变成 空文本  TextVNode\n- 如果是 VNode，跟 dom 关联的则 clone 一个\n- 保证每个VNode都有 key，\n\n### normalizeChildren (vnode: VNode, children: any)\n\n- 处理 children\n    - 如果 children 是数组\n        - 长度0，则 childrend = null，flag 为 NO_CHILDREN\n        - 长度1，children 为第一个元素，如果跟 dom 关联，则 cloneVNode，flag 为 SINGLE_VNODE\n        - 长度 > 1，走一遍 normalizeVNodes\n    - 如果 children 为 null flag 为 NO_CHILDREN\n    - 如果 childrend 为 VNode，如果跟 dom 关联，则 cloneVNode，flag 为 SINGLE_VNODE\n    - 其他情况当作 TextNode 处理，flag 为 SINGLE_VNODE\n-  设置 vnode.children、vnode.childFlags",
          "status": "done"
        }
      },
      {
        "sha": "11614e940d337e6b3ed58ec071c571a0f678950d",
        "filename": "packages/global.d.ts",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fglobal.d.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fglobal.d.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fglobal.d.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+// Global compile-time constants\n+declare var __DEV__: boolean\n+declare var __COMPAT__: boolean"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/observer/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2F.npmignore?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "a6c7f1002986ca9a94b56e7fca181d03c713ab91",
        "filename": "packages/observer/README.md",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2FREADME.md?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+# @vue/observer\n+\n+> This package is inlined into UMD & Browser ESM builds of user-facing renderers (e.g. `@vue/runtime-dom`), but also published as a package that can be used standalone. The standalone build should not be used alongside a pre-bundled build of a user-facing renderer, as they will have different internal storage for reactivity connections. A user-facing renderer should re-export all APIs from this package.",
        "custom": { "status": "done" }
      },
      {
        "sha": "50a792c2df98377aca1832a2f7fc691cf1ff29c6",
        "filename": "packages/observer/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Findex.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/observer.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/observer.cjs.js')\n+}",
        "custom": { "status": "done" }
      },
      {
        "sha": "81bccff66976b04161d749ae61692abf49378743",
        "filename": "packages/observer/package.json",
        "status": "added",
        "additions": 26,
        "deletions": 0,
        "changes": 26,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fpackage.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,26 @@\n+{\n+  \"name\": \"@vue/observer\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/observer\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/observer.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"unpkg\": \"dist/observer.umd.js\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"buildOptions\": {\n+    \"name\": \"VueObserver\",\n+    \"formats\": [\"esm\", \"cjs\", \"umd\", \"esm-browser\"]\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/observer#readme\"\n+}",
        "custom": {
          "status": "done",
          "notes": "package.json 中 typings 字段表示发包时在一起使用的 ts 声明文件"
        }
      },
      {
        "sha": "6752bf76d05f430bb352f757dd60dfba1dadaa2a",
        "filename": "packages/observer/src/autorun.ts",
        "status": "added",
        "additions": 164,
        "deletions": 0,
        "changes": 164,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Fautorun.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Fautorun.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Fautorun.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,164 @@\n+import { OperationTypes } from './operations'\n+import { Dep, KeyToDepMap, targetMap } from './state'\n+\n+export interface Autorun {\n+  (): any\n+  isAutorun: true\n+  active: boolean\n+  raw: Function\n+  deps: Array<Dep>\n+  scheduler?: Scheduler\n+  onTrack?: Debugger\n+  onTrigger?: Debugger\n+}\n+\n+export interface AutorunOptions {\n+  lazy?: boolean\n+  scheduler?: Scheduler\n+  onTrack?: Debugger\n+  onTrigger?: Debugger\n+}\n+\n+export type Scheduler = (run: () => any) => void\n+\n+export type DebuggerEvent = {\n+  runner: Autorun\n+  target: any\n+  type: OperationTypes\n+  key: string | symbol | undefined\n+}\n+\n+export type Debugger = (event: DebuggerEvent) => void\n+\n+export const activeAutorunStack: Autorun[] = []\n+\n+const ITERATE_KEY = Symbol('iterate')\n+\n+export function createAutorun(fn: Function, options: AutorunOptions): Autorun {\n+  const runner = function runner(...args): any {\n+    return run(runner as Autorun, fn, args)\n+  } as Autorun\n+  runner.active = true\n+  runner.raw = fn\n+  runner.scheduler = options.scheduler\n+  runner.onTrack = options.onTrack\n+  runner.onTrigger = options.onTrigger\n+  runner.deps = []\n+  return runner\n+}\n+\n+function run(runner: Autorun, fn: Function, args: any[]): any {\n+  if (!runner.active) {\n+    return fn(...args)\n+  }\n+  if (activeAutorunStack.indexOf(runner) === -1) {\n+    cleanup(runner)\n+    try {\n+      activeAutorunStack.push(runner)\n+      return fn(...args)\n+    } finally {\n+      activeAutorunStack.pop()\n+    }\n+  }\n+}\n+\n+export function cleanup(runner: Autorun) {\n+  for (let i = 0; i < runner.deps.length; i++) {\n+    runner.deps[i].delete(runner)\n+  }\n+  runner.deps = []\n+}\n+\n+export function track(\n+  target: any,\n+  type: OperationTypes,\n+  key?: string | symbol\n+) {\n+  const runner = activeAutorunStack[activeAutorunStack.length - 1]\n+  if (runner) {\n+    if (type === OperationTypes.ITERATE) {\n+      key = ITERATE_KEY\n+    }\n+    // keyMap must exist because only an observed target can call this function\n+    const depsMap = targetMap.get(target) as KeyToDepMap\n+    let dep = depsMap.get(key as string | symbol)\n+    if (!dep) {\n+      depsMap.set(key as string | symbol, (dep = new Set()))\n+    }\n+    if (!dep.has(runner)) {\n+      dep.add(runner)\n+      runner.deps.push(dep)\n+      if (__DEV__ && runner.onTrack) {\n+        runner.onTrack({\n+          runner,\n+          target,\n+          type,\n+          key\n+        })\n+      }\n+    }\n+  }\n+}\n+\n+export function trigger(\n+  target: any,\n+  type: OperationTypes,\n+  key?: string | symbol,\n+  extraInfo?: any\n+) {\n+  const depsMap = targetMap.get(target) as KeyToDepMap\n+  const runners = new Set()\n+  if (type === OperationTypes.CLEAR) {\n+    // collection being cleared, trigger all runners for target\n+    depsMap.forEach(dep => {\n+      addRunners(runners, dep)\n+    })\n+  } else {\n+    // schedule runs for SET | ADD | DELETE\n+    addRunners(runners, depsMap.get(key as string | symbol))\n+    // also run for iteration key on ADD | DELETE\n+    if (type === OperationTypes.ADD || type === OperationTypes.DELETE) {\n+      const iterationKey = Array.isArray(target) ? 'length' : ITERATE_KEY\n+      addRunners(runners, depsMap.get(iterationKey))\n+    }\n+  }\n+  runners.forEach(runner => {\n+    scheduleRun(runner, target, type, key, extraInfo)\n+  })\n+}\n+\n+function addRunners(\n+  runners: Set<Autorun>,\n+  runnersToAdd: Set<Autorun> | undefined\n+) {\n+  if (runnersToAdd !== void 0) {\n+    runnersToAdd.forEach(runners.add, runners)\n+  }\n+}\n+\n+function scheduleRun(\n+  runner: Autorun,\n+  target: any,\n+  type: OperationTypes,\n+  key: string | symbol | undefined,\n+  extraInfo: any\n+) {\n+  if (__DEV__ && runner.onTrigger) {\n+    runner.onTrigger(\n+      Object.assign(\n+        {\n+          runner,\n+          target,\n+          key,\n+          type\n+        },\n+        extraInfo\n+      )\n+    )\n+  }\n+  if (runner.scheduler !== void 0) {\n+    runner.scheduler(runner)\n+  } else {\n+    runner()\n+  }\n+}",
        "custom": {
          "notes": "![](https://tuychuang-1258994924.cos.ap-guangzhou.myqcloud.com/20220411181654.png)\n\n有一个 runner 栈（数组），跟踪某一个属性的时候，数组中最后一个 runner 对应使用了该属性的方法。Dep 作为 Set 关联了 runner，而 runner.deps 也会存放对应 dep 实例，相关关联。\n\n## 方法\n\n### track 方法\n1. 拿到当前 autorun 栈的最新一个 runner，必须要有（在 runner 执行（active）期间触发的 track 才有意义）\n2. 如果是 ITERATE 操作，key 重置为 'iterate'\n3. 拿到 key 对应的 dep（=Set`<Autorun>）\n4. 如果 dep 还没包含当前 runner，则互相关联\n\n### trigger 方法\n一个响应式的值变化后，通过该方法去触发相关 dep 中的 runner 逐个执行。\n\n1. 找到 target 对应的 depsMap\n2. 如果是 CLEAR 操作（只有 collectionHandler 才会涉及），把 depsMap 里面每个 dep 里面所有 runner 收集\n3. 如果是 其他 操作，则根据 key 取到单个 dep，再把里面的 runner 收集\n    1. 如果是 ADD 或者 DELETE 操作，对数组 target 还要收集 length （作为key）对应的 runner ，对其他集合则收集 iterate（作为key）对应runner。\n4. 执行收集的 runner\n\n###  addRunners 方法\n\n把一个 Set 中的 Autorun 实例全都添加到另一个 runner 中，主要用在获取一个对象的所有 Dep 的时候，不同字段对应的 Dep (Set\\<Autorun>)，可能有重复的 runner，例如图中两个 Dep 都有 AutoRun A。\n### scheduleRun 方法\n\n最终调度执行的方法，dev 环境会执行 runner.onTrigger 用来跟踪 trigger 相关事件。\n执行时，优先执行 runner.scheduler，否则执行 runner()。\n\ncreateAutorun 默认创建返回的 runner 就是包装了 原始 fn 的方法。\n",
          "status": "done"
        }
      },
      {
        "sha": "15240ac7dd5aad412c45392a54670270ea624398",
        "filename": "packages/observer/src/baseHandlers.ts",
        "status": "added",
        "additions": 120,
        "deletions": 0,
        "changes": 120,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2FbaseHandlers.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2FbaseHandlers.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2FbaseHandlers.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,120 @@\n+import { observable, immutable, unwrap } from './index'\n+import { OperationTypes } from './operations'\n+import { track, trigger } from './autorun'\n+import { LOCKED } from './lock'\n+\n+const hasOwnProperty = Object.prototype.hasOwnProperty\n+\n+const builtInSymbols = new Set(\n+  Object.getOwnPropertyNames(Symbol)\n+    .map(key => (Symbol as any)[key])\n+    .filter(value => typeof value === 'symbol')\n+)\n+\n+function get(\n+  target: any,\n+  key: string | symbol,\n+  receiver: any,\n+  toObsevable: (t: any) => any\n+) {\n+  const res = Reflect.get(target, key, receiver)\n+  if (typeof key === 'symbol' && builtInSymbols.has(key)) {\n+    return res\n+  }\n+  track(target, OperationTypes.GET, key)\n+  return res !== null && typeof res === 'object' ? toObsevable(res) : res\n+}\n+\n+function set(\n+  target: any,\n+  key: string | symbol,\n+  value: any,\n+  receiver: any\n+): boolean {\n+  value = unwrap(value)\n+  const hadKey = hasOwnProperty.call(target, key)\n+  const oldValue = target[key]\n+  const result = Reflect.set(target, key, value, receiver)\n+  // don't trigger if target is something up in the prototype chain of original\n+  if (target === unwrap(receiver)) {\n+    if (__DEV__) {\n+      const extraInfo = { oldValue, newValue: value }\n+      if (!hadKey) {\n+        trigger(target, OperationTypes.ADD, key, extraInfo)\n+      } else if (value !== oldValue) {\n+        trigger(target, OperationTypes.SET, key, extraInfo)\n+      }\n+    } else {\n+      if (!hadKey) {\n+        trigger(target, OperationTypes.ADD, key)\n+      } else if (value !== oldValue) {\n+        trigger(target, OperationTypes.SET, key)\n+      }\n+    }\n+  }\n+  return result\n+}\n+\n+function deleteProperty(target: any, key: string | symbol): boolean {\n+  const hadKey = hasOwnProperty.call(target, key)\n+  const oldValue = target[key]\n+  const result = Reflect.deleteProperty(target, key)\n+  if (hadKey) {\n+    if (__DEV__) {\n+      trigger(target, OperationTypes.DELETE, key, { oldValue })\n+    } else {\n+      trigger(target, OperationTypes.DELETE, key)\n+    }\n+  }\n+  return result\n+}\n+\n+function has(target: any, key: string | symbol): boolean {\n+  const result = Reflect.has(target, key)\n+  track(target, OperationTypes.HAS, key)\n+  return result\n+}\n+\n+function ownKeys(target: any): (string | number | symbol)[] {\n+  track(target, OperationTypes.ITERATE)\n+  return Reflect.ownKeys(target)\n+}\n+\n+export const mutableHandlers: ProxyHandler<any> = {\n+  get: (target: any, key: string | symbol, receiver: any) =>\n+    get(target, key, receiver, observable),\n+  set,\n+  deleteProperty,\n+  has,\n+  ownKeys\n+}\n+\n+export const immutableHandlers: ProxyHandler<any> = {\n+  get: (target: any, key: string | symbol, receiver: any) =>\n+    get(target, key, receiver, LOCKED ? immutable : observable),\n+\n+  set(target: any, key: string | symbol, value: any, receiver: any): boolean {\n+    if (LOCKED) {\n+      if (__DEV__) {\n+        console.warn(`Set operation failed: target is immutable.`, target)\n+      }\n+      return true\n+    } else {\n+      return set(target, key, value, receiver)\n+    }\n+  },\n+\n+  deleteProperty(target: any, key: string | symbol): boolean {\n+    if (LOCKED) {\n+      if (__DEV__) {\n+        console.warn(`Delete operation failed: target is immutable.`, target)\n+      }\n+      return true\n+    } else {\n+      return deleteProperty(target, key)\n+    }\n+  },\n+\n+  has,\n+  ownKeys\n+}",
        "custom": {
          "status": "done",
          "notes": "\n提供了实现 Proxy 的各种方法\n\n> [Proxy - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy)\n\n> [Proxy 和 Reflect 中的 receiver 到底是什么？ · Issue #52 · sl1673495/notes](https://github.com/sl1673495/notes/issues/52)\n\n> [Symbol - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol)\n\n### get 方法\n\n1. 通过 `Reflect.get` 获取值\n2. 如果 key 是内置 symbol，则返回值\n3. 跟踪 `OperationTypes.GET` 操作\n4. 如果值是一个对象，则通过参数提供的包装方法，返回一个 observable 的对象\n\n思考：\n1. 内置 Symbol 都是啥？\n\n答：Symbol 是一个内置对象，通过它构造出原子 symbol 值，它是唯一的，唯一的表现就是：通常给对象设置一个字符串属性，如果相同属性则会覆盖，但是每个 symbol 值都是唯一，通过同个字符串构造出来 symbol 值也是各自独立，设置到对象属性不会有冲突，另一方面也帮助隐藏一些信息，避免被常规代码访问到。\n\n2. 为什么不拦截跟踪？\n\nSymbol 值通常是用来给对象添加属性，一方面是不希望跟开发者设置的对象属性冲突，也侧面说明是为了隐藏一些独有的「属性」，所以不希望开发者在常规实现中去拦截它，另一方面，我们实际要跟踪拦截的是 touch 到的属性值，用于展示和计算，而内置的 Symbol，例如 Symbol.iterator、Symbol.split，对于拦截这些内置 Symbol 也毫无意义。\n\n### set 方法\n\n1. 拆箱\n2. 判断 key 是否存在\n3. 通过 Reflect.set 设置值，得到结果 result\n4. 如果 receiver 就是 target，则触发相关设置事件\n5. 返回 result\n\n思考：\n1. 为什么需要判断 receiver 是否 为 target\n\n答：因为 receiver 可以是 target 的继承对象（target 在 receiver 原型链上），因为 Proxy 本身要拦截的是 target，而非它的继承者，所以对于继承者的设置，不应该由这个 proxy 去响应 set 事件。实际上如果需要继承者响应，那么应该把继承者 observed，既然没有 observed，就说明更不该去响应 set 事件。\n\n\n### deleteProperty 方法\n\n1. 通过 Reflect.deleteProperty 删除属性\n2. 触发 delete 事件\n\n### has 方法\n\n1. 通过 Reflect.has 获取结果\n2. 跟踪 `OperationTypes.HAS` 操作\n\n### mutableHandlers & immutableHandlers\n\n返回一个对象包装了以上的一堆 handler 方法，两者的区别主要是 immutableHandlers 的特殊:\n\n1. 在 set、delete 方法的时候，实际不去做任何操作，开发环境报错\n2. get 方法中，传入的 toObsevable 会根据全局标识 `LOCKED` 来确定返回值包装方法是 `immutable` 还是 `observable`\n\n"
        }
      },
      {
        "sha": "859677e9768ad56142e778bcb4de335cda3a4b5c",
        "filename": "packages/observer/src/collectionHandlers.ts",
        "status": "added",
        "additions": 161,
        "deletions": 0,
        "changes": 161,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2FcollectionHandlers.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2FcollectionHandlers.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2FcollectionHandlers.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,161 @@\n+import { unwrap } from './index'\n+import { track, trigger } from './autorun'\n+import { OperationTypes } from './operations'\n+\n+function instrument(\n+  target: any,\n+  key: string | symbol,\n+  args: any[],\n+  type: OperationTypes\n+) {\n+  target = unwrap(target)\n+  const proto: any = Reflect.getPrototypeOf(target)\n+  track(target, type)\n+  return proto[key].apply(target, args)\n+}\n+\n+function get(key: string | symbol) {\n+  return instrument(this, key, [key], OperationTypes.GET)\n+}\n+\n+function has(key: string | symbol): boolean {\n+  return instrument(this, key, [key], OperationTypes.HAS)\n+}\n+\n+function size(target: any) {\n+  target = unwrap(target)\n+  const proto = Reflect.getPrototypeOf(target)\n+  track(target, OperationTypes.ITERATE)\n+  return Reflect.get(proto, 'size', target)\n+}\n+\n+function makeWarning(type: OperationTypes) {\n+  return function() {\n+    if (__DEV__) {\n+      console.warn(\n+        `${type} operation failed: target is immutable.`,\n+        unwrap(this)\n+      )\n+    }\n+  }\n+}\n+\n+const mutableInstrumentations: any = {\n+  get,\n+  has,\n+\n+  get size() {\n+    return size(this)\n+  },\n+\n+  add(key: any) {\n+    const target = unwrap(this)\n+    const proto: any = Reflect.getPrototypeOf(this)\n+    const hadKey = proto.has.call(target, key)\n+    const result = proto.add.apply(target, arguments)\n+    if (!hadKey) {\n+      if (__DEV__) {\n+        trigger(target, OperationTypes.ADD, key, { value: key })\n+      } else {\n+        trigger(target, OperationTypes.ADD, key)\n+      }\n+    }\n+    return result\n+  },\n+\n+  set(key: any, value: any) {\n+    const target = unwrap(this)\n+    const proto: any = Reflect.getPrototypeOf(this)\n+    const hadKey = proto.has.call(target, key)\n+    const oldValue = proto.get.call(target, key)\n+    const result = proto.set.apply(target, arguments)\n+    if (__DEV__) {\n+      const extraInfo = { oldValue, newValue: value }\n+      if (!hadKey) {\n+        trigger(target, OperationTypes.ADD, key, extraInfo)\n+      } else {\n+        trigger(target, OperationTypes.SET, key, extraInfo)\n+      }\n+    } else {\n+      if (!hadKey) {\n+        trigger(target, OperationTypes.ADD, key)\n+      } else {\n+        trigger(target, OperationTypes.SET, key)\n+      }\n+    }\n+    return result\n+  },\n+\n+  delete(key: any) {\n+    const target = unwrap(this)\n+    const proto: any = Reflect.getPrototypeOf(this)\n+    const hadKey = proto.has.call(target, key)\n+    const oldValue = proto.get ? proto.get.call(target, key) : undefined\n+    // forward the operation before queueing reactions\n+    const result = proto.delete.apply(target, arguments)\n+    if (hadKey) {\n+      if (__DEV__) {\n+        trigger(target, OperationTypes.DELETE, key, { oldValue })\n+      } else {\n+        trigger(target, OperationTypes.DELETE, key)\n+      }\n+    }\n+    return result\n+  },\n+\n+  clear() {\n+    const target = unwrap(this)\n+    const proto: any = Reflect.getPrototypeOf(this)\n+    const hadItems = target.size !== 0\n+    const oldTarget = target instanceof Map ? new Map(target) : new Set(target)\n+    // forward the operation before queueing reactions\n+    const result = proto.clear.apply(target, arguments)\n+    if (hadItems) {\n+      if (__DEV__) {\n+        trigger(target, OperationTypes.CLEAR, void 0, { oldTarget })\n+      } else {\n+        trigger(target, OperationTypes.CLEAR)\n+      }\n+    }\n+    return result\n+  }\n+}\n+\n+const immutableInstrumentations: any = {\n+  get,\n+  has,\n+  get size() {\n+    return size(this)\n+  },\n+  add: makeWarning(OperationTypes.ADD),\n+  set: makeWarning(OperationTypes.SET),\n+  delete: makeWarning(OperationTypes.DELETE),\n+  clear: makeWarning(OperationTypes.CLEAR)\n+}\n+;['forEach', 'keys', 'values', 'entries', Symbol.iterator].forEach(key => {\n+  mutableInstrumentations[key] = immutableInstrumentations[key] = function(\n+    ...args: any[]\n+  ) {\n+    return instrument(this, key, args, OperationTypes.ITERATE)\n+  }\n+})\n+\n+function getInstrumented(\n+  target: any,\n+  key: string | symbol,\n+  receiver: any,\n+  instrumentations: any\n+) {\n+  target = instrumentations.hasOwnProperty(key) ? instrumentations : target\n+  return Reflect.get(target, key, receiver)\n+}\n+\n+export const mutableCollectionHandlers: ProxyHandler<any> = {\n+  get: (target: any, key: string | symbol, receiver: any) =>\n+    getInstrumented(target, key, receiver, mutableInstrumentations)\n+}\n+\n+export const immutableCollectionHandlers: ProxyHandler<any> = {\n+  get: (target: any, key: string | symbol, receiver: any) =>\n+    getInstrumented(target, key, receiver, immutableInstrumentations)\n+}",
        "custom": {
          "notes": "> [Reflect.get() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect/get)\n> \n对于集合类型(Set, Map, WeakMap, WeakSet) 的 target，使用该 collectionHandlers 作为 proxy 的 handler。这样处理可以保证对集合使用内置的 add、delete 等方法都可以进行响应式 trigger。\n\n@思考\n1. 为什么需要用 Reflect.getPrototypeOf 获取，并用 proto.add 去增加，而不是直接 target.add?\n\n答：\n\n## 方法对象\n\n### mutableCollectionHandlers\n如果需要代理集合的方法，本质也是拦截集合的属性访问，\n\n```ts\nexport const mutableCollectionHandlers: ProxyHandler<any> = {\n  get: (target: any, key: string | symbol, receiver: any) =>\n    getInstrumented(target, key, receiver, mutableInstrumentations)\n}\n```\n\ngetInstrumented 做的事情就是，如果拦截的属性存在参数 mutableInstrumentations 中则直接用，否则用 target 本身的\n\n### mutableInstrumentations 对象\n\n```ts\nmutableInstrumentations={\n get(key: string | symbol)\n has(key: string | symbol): boolean\n get size()\n add(value: any)\n set(key: any, value: any)\n delete(key: any)\n clear()\n forEach()\n keys()\n values()\n entries()\n size()\n}\n```\n通过  proxy 集合的一些操作方法，保证集合对象能够支持响应式。\n\n里面的操作都是通过：\n\n1. unwrap\n2. Reflect.getPrototypeOf 获取到 target 原型链上集合的方法\n3. 操作返回结果\n\nget、has、size、forEach、keys、values、entries 方法内会进行 track，对 set、add、delete、clear 方法中会进行 trigger。总结就是查询类 tract，修改类的 trigger。\n\n### immutableInstrumentations 对象\n\n查询类的跟 mutableInstrumentations 一样，设置类的方法在 dev 时报 warning。\n\n",
          "status": "done"
        }
      },
      {
        "sha": "01a4f7e79129dd5c0fb40fb8a77861ed75604419",
        "filename": "packages/observer/src/computed.ts",
        "status": "added",
        "additions": 44,
        "deletions": 0,
        "changes": 44,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Fcomputed.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Fcomputed.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Fcomputed.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,44 @@\n+import { autorun, stop } from './index'\n+import { Autorun, activeAutorunStack } from './autorun'\n+\n+export interface ComputedGetter {\n+  (): any\n+  stop: () => void\n+}\n+\n+export function computed(getter: Function, context?: any): ComputedGetter {\n+  let dirty: boolean = true\n+  let value: any = undefined\n+  const runner = autorun(() => getter.call(context, context), {\n+    lazy: true,\n+    scheduler: () => {\n+      dirty = true\n+    }\n+  })\n+  const computedGetter = (() => {\n+    if (dirty) {\n+      value = runner()\n+      dirty = false\n+    }\n+    // When computed autoruns are accessed in a parent autorun, the parent\n+    // should track all the dependencies the computed property has tracked.\n+    // This should also apply for chained computed properties.\n+    trackChildRun(runner)\n+    return value\n+  }) as ComputedGetter\n+  computedGetter.stop = () => stop(runner)\n+  return computedGetter\n+}\n+\n+function trackChildRun(childRunner: Autorun) {\n+  const parentRunner = activeAutorunStack[activeAutorunStack.length - 1]\n+  if (parentRunner) {\n+    for (let i = 0; i < childRunner.deps.length; i++) {\n+      const dep = childRunner.deps[i]\n+      if (!dep.has(parentRunner)) {\n+        dep.add(parentRunner)\n+        parentRunner.deps.push(dep)\n+      }\n+    }\n+  }\n+}",
        "custom": {
          "notes": "计算属性的核心实现\n\n## 方法\n\n### computed(getter: Function\n\n这里包含一个设计思想，computed 是计算属性，如果依赖侦测的目标有变化，那么 computed 对应的 getter 方法就会重新运行执行。\n但是在目标有变化的那一刻，不一定要立即执行 getter 计算，而是在目标变化 trigger runner 执行时，简单的标记一个 dirty 为 true。\n\n```ts\nlet dirty: boolean = true\nlet value: any = undefined\n```\n\ncomputed 返回的是一个缓存 value 的方法，如果通过 runner 计算后，runner 没有再次被 trigger，则一直使用之前计算得到的 value\n\n使用 trackChildRun 是要把父层 runner 也跟该计算属性的 runner.deps 做关联，要不然如果目标变化后，trigger 到计算属性的 runner，\n但是计算属性没有本身不在响应式侦测以来的属性里，所以必须把父级 runner 也关联起来。\n\n```ts\nconst computedGetter = (() => {\n  if (dirty) {\n    value = runner()\n    dirty = false\n  }\n  trackChildRun(runner)\n  return value\n}) as ComputedGetter\n```\n\n```ts\ncomputedGetter.stop = () => stop(runner)\nreturn computedGetter\n```\n\n### trackChildRun 方法\n\n去除 autorun 栈的最后一个就是父级 runner，因为 trackChildRun 是在 computed 对应 runner 执行完之后在调用的，\n也就是 computed runner 退出后，autorun 栈最后一个就是父级\n\n```ts\nfunction trackChildRun(childRunner: Autorun) {\n  const parentRunner = activeAutorunStack[activeAutorunStack.length - 1]\n  if (parentRunner) {\n    for (let i = 0; i < childRunner.deps.length; i++) {\n      const dep = childRunner.deps[i]\n      if (!dep.has(parentRunner)) {\n        dep.add(parentRunner)\n        parentRunner.deps.push(dep)\n      }\n    }\n  }\n}\n```",
          "status": "done"
        }
      },
      {
        "sha": "1aa0c1d1b4d9d028587a060a91f3fe2a3dc72e59",
        "filename": "packages/observer/src/index.ts",
        "status": "added",
        "additions": 152,
        "deletions": 0,
        "changes": 152,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Findex.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,152 @@\n+import { mutableHandlers, immutableHandlers } from './baseHandlers'\n+\n+import {\n+  mutableCollectionHandlers,\n+  immutableCollectionHandlers\n+} from './collectionHandlers'\n+\n+import {\n+  targetMap,\n+  observedToRaw,\n+  rawToObserved,\n+  immutableToRaw,\n+  rawToImmutable,\n+  immutableValues,\n+  nonReactiveValues\n+} from './state'\n+\n+import {\n+  createAutorun,\n+  cleanup,\n+  Autorun,\n+  AutorunOptions,\n+  DebuggerEvent\n+} from './autorun'\n+\n+export { Autorun, DebuggerEvent }\n+export { computed, ComputedGetter } from './computed'\n+export { lock, unlock } from './lock'\n+\n+const EMPTY_OBJ = {}\n+const collectionTypes: Set<any> = new Set([Set, Map, WeakMap, WeakSet])\n+const observableValueRE = /^\\[object (?:Object|Array|Map|Set|WeakMap|WeakSet)\\]$/\n+\n+const canObserve = (value: any): boolean => {\n+  return (\n+    !value._isVue &&\n+    !value._isVNode &&\n+    observableValueRE.test(Object.prototype.toString.call(value)) &&\n+    !nonReactiveValues.has(value)\n+  )\n+}\n+\n+type identity = <T>(target: T) => T\n+\n+export const observable = ((target: any = {}): any => {\n+  // if trying to observe an immutable proxy, return the immutable version.\n+  if (immutableToRaw.has(target)) {\n+    return target\n+  }\n+  // target is explicitly marked as immutable by user\n+  if (immutableValues.has(target)) {\n+    return immutable(target)\n+  }\n+  return createObservable(\n+    target,\n+    rawToObserved,\n+    observedToRaw,\n+    mutableHandlers,\n+    mutableCollectionHandlers\n+  )\n+}) as identity\n+\n+export const immutable = ((target: any = {}): any => {\n+  // value is a mutable observable, retrive its original and return\n+  // a readonly version.\n+  if (observedToRaw.has(target)) {\n+    target = observedToRaw.get(target)\n+  }\n+  return createObservable(\n+    target,\n+    rawToImmutable,\n+    immutableToRaw,\n+    immutableHandlers,\n+    immutableCollectionHandlers\n+  )\n+}) as identity\n+\n+function createObservable(\n+  target: any,\n+  toProxy: WeakMap<any, any>,\n+  toRaw: WeakMap<any, any>,\n+  baseHandlers: ProxyHandler<any>,\n+  collectionHandlers: ProxyHandler<any>\n+) {\n+  if ((__DEV__ && target === null) || typeof target !== 'object') {\n+    throw new Error(`value is not observable: ${String(target)}`)\n+  }\n+  // target already has corresponding Proxy\n+  let observed = toProxy.get(target)\n+  if (observed !== void 0) {\n+    return observed\n+  }\n+  // target is already a Proxy\n+  if (toRaw.has(target)) {\n+    return target\n+  }\n+  // only a whitelist of value types can be observed.\n+  if (!canObserve(target)) {\n+    return target\n+  }\n+  const handlers = collectionTypes.has(target.constructor)\n+    ? collectionHandlers\n+    : baseHandlers\n+  observed = new Proxy(target, handlers)\n+  toProxy.set(target, observed)\n+  toRaw.set(observed, target)\n+  targetMap.set(target, new Map())\n+  return observed\n+}\n+\n+export function autorun(\n+  fn: Function,\n+  options: AutorunOptions = EMPTY_OBJ\n+): Autorun {\n+  if ((fn as Autorun).isAutorun) {\n+    fn = (fn as Autorun).raw\n+  }\n+  const runner = createAutorun(fn, options)\n+  if (!options.lazy) {\n+    runner()\n+  }\n+  return runner\n+}\n+\n+export function stop(runner: Autorun) {\n+  if (runner.active) {\n+    cleanup(runner)\n+    runner.active = false\n+  }\n+}\n+\n+export function isObservable(value: any): boolean {\n+  return observedToRaw.has(value) || immutableToRaw.has(value)\n+}\n+\n+export function isImmutable(value: any): boolean {\n+  return immutableToRaw.has(value)\n+}\n+\n+export function unwrap<T>(observed: T): T {\n+  return observedToRaw.get(observed) || immutableToRaw.get(observed) || observed\n+}\n+\n+export function markImmutable<T>(value: T): T {\n+  immutableValues.add(value)\n+  return value\n+}\n+\n+export function markNonReactive<T>(value: T): T {\n+  nonReactiveValues.add(value)\n+  return value\n+}",
        "custom": {
          "notes": "## 方法\n\n### createObservable 私有方法\n\n1. 确保 typeof 是 'object'\n2. 如果 target 有对应的 observed，则返回 `toProxy: WeakMap<target, 返回值>` \n3. 如果 target 是 Proxy，则直接返回 `toRaw: WeakMap<target, 返回值>`\n4. 如果 **不能 observe**则返回 target，(包括:vue 对象 / VNode /  toString 结果非对象 / 明确标记不能 observe)\n5. 如果是内置集合构造器，获取相应集合构造器 handler，否则使用 baseHandler\n6. new Proxy\n7. 设置相关 Map\n\n### observable 方法\n根据 target 返回 observable Proxy\n\n1. 如果 target 是一个 immutable Proxy，则返回 target \n2. 如果 target 是一个用户标记的 immutable，则使用 immutable 方法重新包装返回\n3. 调用 createObservable，传入 observed 相关的 Map 和 Handlers\n\n### immutable 方法\n根据 target 返回 immutable Proxy\n\n1. 如果 target 是一个 observed 包装，则拿到 raw target\n2. 调用 createObservable，传入 immutable 相关的 Map 和 Handlers\n\n### autorun 方法\n\n把一个 function 包装返回一个 runner，返回的方法能够侦测依赖属性，然后会自动运行。\n\n### stop 方法\n\n停止一个 runner 运行，并设置相应状态。\n\n## 其他工具方法\n\nisObservable /isImmutable / unwrap /markImmutable /markNonReactive\n\n基本上都是在相关 Map 获取判断\n\n\n\n",
          "status": "done"
        }
      },
      {
        "sha": "417526be361f2b86eb85114b21e7a8384210dda4",
        "filename": "packages/observer/src/lock.ts",
        "status": "added",
        "additions": 10,
        "deletions": 0,
        "changes": 10,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Flock.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Flock.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Flock.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,10 @@\n+// global immutability lock\n+export let LOCKED = true\n+\n+export function lock() {\n+  LOCKED = true\n+}\n+\n+export function unlock() {\n+  LOCKED = false\n+}",
        "custom": {
          "notes": "提供一个 LOCKED 变量，和相应设置方法\n\n## 思考\n```ts\n// global immutability lock\nexport let LOCKED = true\n\nexport function lock() {\n  LOCKED = true\n}\n```\n\n在其他文件 import LOCKED  from  lcok.ts 之后，后续 lock() 调用的话，import 的 LOCKED 会跟着变化？实验：\n\n```ts\nimport { LOCKED, unlock } from \"./lock\";\nlet value = LOCKED;\nconsole.log(LOCKED); // true\nunlock();\nconsole.log(LOCKED); // false\n\n```",
          "status": "done"
        }
      },
      {
        "sha": "9f6ac5264c633d270446de23198bc13825ff3f63",
        "filename": "packages/observer/src/operations.ts",
        "status": "added",
        "additions": 11,
        "deletions": 0,
        "changes": 11,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Foperations.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Foperations.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Foperations.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,11 @@\n+export const enum OperationTypes {\n+  // using literal strings instead of numbers so that it's easier to inspect\n+  // debugger events\n+  SET = 'set',\n+  ADD = 'add',\n+  DELETE = 'delete',\n+  CLEAR = 'clear',\n+  GET = 'get',\n+  HAS = 'has',\n+  ITERATE = 'iterate'\n+}",
        "custom": {
          "notes": "'forEach', 'keys', 'values', 'entries', Symbol.iterator 这类遍历相关的方法字段，都归到 ITERATE。\n只有集合才有 CLEAR。\n\n```\nexport const enum OperationTypes {\n  SET = 'set',\n  ADD = 'add',\n  DELETE = 'delete',\n  CLEAR = 'clear', // 只有集合对象有\n  GET = 'get',\n  HAS = 'has',\n  \n\n  ITERATE = 'iterate'\n}\n\n```",
          "status": "done"
        }
      },
      {
        "sha": "9efbe37337be8b53711d0a70101fc85ea94b8735",
        "filename": "packages/observer/src/state.ts",
        "status": "added",
        "additions": 20,
        "deletions": 0,
        "changes": 20,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Fstate.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fobserver%2Fsrc%2Fstate.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Fstate.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,20 @@\n+import { Autorun } from './autorun'\n+\n+// The main WeakMap that stores {target -> key -> dep} connections.\n+// Conceptually, it's easier to think of a dependency as a Dep class\n+// which maintains a Set of subscribers, but we simply store them as\n+// raw Sets to reduce memory overhead.\n+export type Dep = Set<Autorun>\n+export type KeyToDepMap = Map<string | symbol, Dep>\n+export const targetMap: WeakMap<any, KeyToDepMap> = new WeakMap()\n+\n+// WeakMaps that store {raw <-> observed} pairs.\n+export const rawToObserved: WeakMap<any, any> = new WeakMap()\n+export const observedToRaw: WeakMap<any, any> = new WeakMap()\n+export const rawToImmutable: WeakMap<any, any> = new WeakMap()\n+export const immutableToRaw: WeakMap<any, any> = new WeakMap()\n+\n+// WeakSets for values that are marked immutable or non-reactive during\n+// observable creation.\n+export const immutableValues: WeakSet<any> = new WeakSet()\n+export const nonReactiveValues: WeakSet<any> = new WeakSet()",
        "custom": {
          "notes": "存放各种 Map、Set，主要三类：\n\n1. {target -> key -> dep}\n2. {raw <-> observed}\n3. marked immutable or non-reactive",
          "status": "done"
        }
      },
      {
        "sha": "aa5ee6263b2b30d39c11577cd9aa99dad163bd07",
        "filename": "packages/runtime-dom/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2F.npmignore?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages"
      },
      {
        "sha": "e351b743e759abdffcde40ab912f61725de1505e",
        "filename": "packages/runtime-dom/README.md",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2FREADME.md?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,21 @@\n+# @vue/runtime-dom\n+\n+``` js\n+import { h, render, Component } from '@vue/runtime-dom'\n+\n+class App extends Component {\n+  data () {\n+    return {\n+      msg: 'Hello World!'\n+    }\n+  }\n+  render () {\n+    return h('div', this.msg)\n+  }\n+}\n+\n+render(\n+  h(App),\n+  document.getElementById('app')\n+)\n+```"
      },
      {
        "sha": "cdc29b2a87973414d948be98c0261326c0a51344",
        "filename": "packages/runtime-dom/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Findex.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/runtime-dom.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/runtime-dom.cjs.js')\n+}"
      },
      {
        "sha": "4277265e7af57ec3c92b573e19fded9a26dd6c96",
        "filename": "packages/runtime-dom/package.json",
        "status": "added",
        "additions": 30,
        "deletions": 0,
        "changes": 30,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fpackage.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,30 @@\n+{\n+  \"name\": \"@vue/runtime-dom\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/runtime-dom\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/runtime-dom.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"unpkg\": \"dist/runtime-dom.umd.js\",\n+  \"buildOptions\": {\n+    \"name\": \"Vue\",\n+    \"formats\": [\"esm\", \"cjs\", \"umd\", \"esm-browser\"]\n+  },\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/runtime-dom#readme\",\n+  \"dependencies\": {\n+    \"@vue/core\": \"3.0.0-alpha.1\",\n+    \"@vue/scheduler\": \"3.0.0-alpha.1\"\n+  }\n+}"
      },
      {
        "sha": "cef0a3e0e9c5653524913dca7155f62015e6dcd1",
        "filename": "packages/runtime-dom/src/index.ts",
        "status": "added",
        "additions": 39,
        "deletions": 0,
        "changes": 39,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2Findex.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,39 @@\n+import {\n+  h,\n+  cloneVNode,\n+  createPortal,\n+  Component,\n+  createRenderer\n+} from '@vue/core'\n+\n+import { queueJob, nextTick } from '@vue/scheduler'\n+\n+import { nodeOps } from './nodeOps'\n+import { patchData } from './patchData'\n+import { teardownVNode } from './teardownVNode'\n+\n+const { render } = createRenderer({\n+  queueJob,\n+  nodeOps,\n+  patchData,\n+  teardownVNode\n+})\n+\n+// important: inline the definition for nextTick\n+const publicNextTick = nextTick as (fn: Function) => Promise<void>\n+\n+export { h, cloneVNode, createPortal, Component, render, publicNextTick as nextTick }\n+\n+// also expose observer API\n+export {\n+  autorun,\n+  stop,\n+  observable,\n+  immutable,\n+  computed,\n+  isObservable,\n+  isImmutable,\n+  markImmutable,\n+  markNonReactive,\n+  unwrap\n+} from '@vue/core'"
      },
      {
        "sha": "d32f6608e0177da967076b0f8ffcdfd5346f1241",
        "filename": "packages/runtime-dom/src/modules/attrs.ts",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fattrs.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fattrs.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fattrs.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,31 @@\n+export function patchAttr(\n+  el: Element,\n+  key: string,\n+  value: any,\n+  isSVG: boolean\n+) {\n+  // isSVG short-circuits isXlink check\n+  if (isSVG && isXlink(key)) {\n+    if (value == null) {\n+      el.removeAttributeNS(xlinkNS, getXlinkProp(key))\n+    } else {\n+      el.setAttributeNS(xlinkNS, key, value)\n+    }\n+  } else {\n+    if (value == null) {\n+      el.removeAttribute(key)\n+    } else {\n+      el.setAttribute(key, value)\n+    }\n+  }\n+}\n+\n+const xlinkNS = 'http://www.w3.org/1999/xlink'\n+\n+function isXlink(name: string): boolean {\n+  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n+}\n+\n+function getXlinkProp(name: string): string {\n+  return isXlink(name) ? name.slice(6, name.length) : ''\n+}"
      },
      {
        "sha": "f953d46f693e72463b0ed9e29aff9a006cb3b16d",
        "filename": "packages/runtime-dom/src/modules/class.ts",
        "status": "added",
        "additions": 29,
        "deletions": 0,
        "changes": 29,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fclass.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fclass.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fclass.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,29 @@\n+// compiler should normlaize class + :class bindings on the same element\n+// into a single binding ['staticClass', dynamic]\n+\n+export function patchClass(el: Element, value: any, isSVG: boolean) {\n+  // directly setting className should be faster than setAttribute in theory\n+  if (isSVG) {\n+    el.setAttribute('class', normalizeClass(value))\n+  } else {\n+    el.className = normalizeClass(value)\n+  }\n+}\n+\n+function normalizeClass(value: any): string {\n+  let res = ''\n+  if (typeof value === 'string') {\n+    res = value\n+  } else if (Array.isArray(value)) {\n+    for (let i = 0; i < value.length; i++) {\n+      res += normalizeClass(value[i]) + ' '\n+    }\n+  } else if (typeof value === 'object') {\n+    for (const name in value) {\n+      if (value[name]) {\n+        res += name + ' '\n+      }\n+    }\n+  }\n+  return res.trim()\n+}"
      },
      {
        "sha": "452ff001406a9b26163544f2c720eb6cd1778a03",
        "filename": "packages/runtime-dom/src/modules/events.ts",
        "status": "added",
        "additions": 142,
        "deletions": 0,
        "changes": 142,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fevents.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fevents.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fevents.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,142 @@\n+const delegateRE = /^(?:click|dblclick|submit|(?:key|mouse|touch).*)$/\n+\n+type EventValue = Function | Function[]\n+type TargetRef = { el: Element | Document }\n+\n+export function patchEvent(\n+  el: Element,\n+  name: string,\n+  prevValue: EventValue | null,\n+  nextValue: EventValue | null\n+) {\n+  if (delegateRE.test(name)) {\n+    handleDelegatedEvent(el, name, nextValue)\n+  } else {\n+    handleNormalEvent(el, name, prevValue, nextValue)\n+  }\n+}\n+\n+const eventCounts: Record<string, number> = {}\n+const attachedGlobalHandlers: Record<string, Function> = {}\n+\n+export function handleDelegatedEvent(\n+  el: any,\n+  name: string,\n+  value: EventValue | null\n+) {\n+  const count = eventCounts[name]\n+  let store = el.__events\n+  if (value) {\n+    if (!count) {\n+      attachGlobalHandler(name)\n+    }\n+    if (!store) {\n+      store = el.__events = {}\n+    }\n+    if (!store[name]) {\n+      eventCounts[name]++\n+    }\n+    store[name] = value\n+  } else if (store && store[name]) {\n+    eventCounts[name]--\n+    store[name] = null\n+    if (count === 1) {\n+      removeGlobalHandler(name)\n+    }\n+  }\n+}\n+\n+function attachGlobalHandler(name: string) {\n+  const handler = (attachedGlobalHandlers[name] = (e: Event) => {\n+    const { type } = e\n+    const isClick = type === 'click' || type === 'dblclick'\n+    if (isClick && (e as MouseEvent).button !== 0) {\n+      e.stopPropagation()\n+      return false\n+    }\n+    e.stopPropagation = stopPropagation\n+    const targetRef: TargetRef = { el: document }\n+    Object.defineProperty(e, 'currentTarget', {\n+      configurable: true,\n+      get() {\n+        return targetRef.el\n+      }\n+    })\n+    dispatchEvent(e, name, isClick, targetRef)\n+  })\n+  document.addEventListener(name, handler)\n+  eventCounts[name] = 0\n+}\n+\n+function stopPropagation() {\n+  this.cancelBubble = true\n+  if (!this.immediatePropagationStopped) {\n+    this.stopImmediatePropagation()\n+  }\n+}\n+\n+function dispatchEvent(\n+  e: Event,\n+  name: string,\n+  isClick: boolean,\n+  targetRef: TargetRef\n+) {\n+  let el = e.target as any\n+  while (el != null) {\n+    // Don't process clicks on disabled elements\n+    if (isClick && el.disabled) {\n+      break\n+    }\n+    const store = el.__events\n+    if (store) {\n+      const value = store[name]\n+      if (value) {\n+        targetRef.el = el\n+        invokeEvents(e, value)\n+        if (e.cancelBubble) {\n+          break\n+        }\n+      }\n+    }\n+    el = el.parentNode\n+  }\n+}\n+\n+function invokeEvents(e: Event, value: EventValue) {\n+  if (Array.isArray(value)) {\n+    for (let i = 0; i < value.length; i++) {\n+      value[i](e)\n+    }\n+  } else {\n+    value(e)\n+  }\n+}\n+\n+function removeGlobalHandler(name: string) {\n+  document.removeEventListener(name, attachedGlobalHandlers[name] as any)\n+  eventCounts[name] = 0\n+}\n+\n+function handleNormalEvent(el: Element, name: string, prev: any, next: any) {\n+  const invoker = prev && prev.invoker\n+  if (next) {\n+    if (invoker) {\n+      prev.invoker = null\n+      invoker.value = next\n+      next.invoker = invoker\n+    } else {\n+      el.addEventListener(name, createInvoker(next))\n+    }\n+  } else if (invoker) {\n+    el.removeEventListener(name, invoker)\n+  }\n+}\n+\n+function createInvoker(value: any) {\n+  const invoker = ((e: Event) => {\n+    invokeEvents(e, invoker.value)\n+  }) as any\n+  invoker.value = value\n+  value.invoker = invoker\n+  return invoker\n+}"
      },
      {
        "sha": "f2e6bd7385df8b2af5b1ea4bc4f9c2acd06442ff",
        "filename": "packages/runtime-dom/src/modules/props.ts",
        "status": "added",
        "additions": 18,
        "deletions": 0,
        "changes": 18,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fprops.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fprops.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fprops.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,18 @@\n+import { VNode, ChildrenFlags } from '@vue/core'\n+\n+export function patchDOMProp(\n+  el: any,\n+  key: string,\n+  value: any,\n+  prevVNode: VNode,\n+  unmountChildren: any\n+) {\n+  if (key === 'innerHTML' || key === 'textContent') {\n+    if (prevVNode && prevVNode.children) {\n+      unmountChildren(prevVNode.children, prevVNode.childFlags)\n+      prevVNode.children = null\n+      prevVNode.childFlags = ChildrenFlags.NO_CHILDREN\n+    }\n+  }\n+  el[key] = value\n+}"
      },
      {
        "sha": "1652949d44b1a0bca5e0c807652f30b370c56e2f",
        "filename": "packages/runtime-dom/src/modules/style.ts",
        "status": "added",
        "additions": 54,
        "deletions": 0,
        "changes": 54,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fstyle.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fstyle.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2Fmodules%2Fstyle.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,54 @@\n+import { isObservable } from '@vue/core'\n+\n+// style properties that should NOT have \"px\" added when numeric\n+const nonNumericRE = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i\n+\n+export function patchStyle(el: any, prev: any, next: any, data: any) {\n+  // If next is observed, the user is likely to mutate the style object.\n+  // We need to normalize + clone it and replace data.style with the clone.\n+  if (isObservable(next)) {\n+    data.style = normalizeStyle(next)\n+  }\n+\n+  const { style } = el\n+  if (!next) {\n+    el.removeAttribute('style')\n+  } else if (typeof next === 'string') {\n+    style.cssText = next\n+  } else {\n+    // TODO: warn invalid value in dev\n+    next = normalizeStyle(next)\n+    for (const key in next) {\n+      let value = next[key]\n+      if (typeof value === 'number' && !nonNumericRE.test(key)) {\n+        value = value + 'px'\n+      }\n+      style.setProperty(key, value)\n+    }\n+    if (prev && typeof prev !== 'string') {\n+      prev = normalizeStyle(prev)\n+      for (const key in prev) {\n+        if (!next[key]) {\n+          style.setProperty(key, '')\n+        }\n+      }\n+    }\n+  }\n+}\n+\n+function normalizeStyle(value: any): Record<string, string | number> | void {\n+  if (value && typeof value === 'object') {\n+    return value\n+  } else if (Array.isArray(value)) {\n+    const res: Record<string, string | number> = {}\n+    for (let i = 0; i < value.length; i++) {\n+      const normalized = normalizeStyle(value[i])\n+      if (normalized) {\n+        for (const key in normalized) {\n+          res[key] = normalized[key]\n+        }\n+      }\n+    }\n+    return res\n+  }\n+}"
      },
      {
        "sha": "df17fcd3eba281a272e287ab517f40498b33b5eb",
        "filename": "packages/runtime-dom/src/nodeOps.ts",
        "status": "added",
        "additions": 39,
        "deletions": 0,
        "changes": 39,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2FnodeOps.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2FnodeOps.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2FnodeOps.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,39 @@\n+const svgNS = 'http://www.w3.org/2000/svg'\n+\n+export const nodeOps = {\n+  createElement: (tag: string, isSVG?: boolean): Element =>\n+    isSVG ? document.createElementNS(svgNS, tag) : document.createElement(tag),\n+\n+  createText: (text: string): Text => document.createTextNode(text),\n+\n+  setText: (node: Text, text: string) => {\n+    node.nodeValue = text\n+  },\n+\n+  appendChild: (parent: Node, child: Node) => {\n+    parent.appendChild(child)\n+  },\n+\n+  insertBefore: (parent: Node, child: Node, ref: Node) => {\n+    parent.insertBefore(child, ref)\n+  },\n+\n+  replaceChild: (parent: Node, oldChild: Node, newChild: Node) => {\n+    parent.replaceChild(newChild, oldChild)\n+  },\n+\n+  removeChild: (parent: Node, child: Node) => {\n+    parent.removeChild(child)\n+  },\n+\n+  clearContent: (node: Node) => {\n+    node.textContent = ''\n+  },\n+\n+  parentNode: (node: Node): Node | null => node.parentNode,\n+\n+  nextSibling: (node: Node): Node | null => node.nextSibling,\n+\n+  querySelector: (selector: string): Node | null =>\n+    document.querySelector(selector)\n+}"
      },
      {
        "sha": "884d5c436c19de7ed42d2924c4994b159af5f6bf",
        "filename": "packages/runtime-dom/src/patchData.ts",
        "status": "added",
        "additions": 42,
        "deletions": 0,
        "changes": 42,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2FpatchData.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2FpatchData.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2FpatchData.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,42 @@\n+import { VNode } from '@vue/core'\n+import { patchClass } from './modules/class'\n+import { patchStyle } from './modules/style'\n+import { patchAttr } from './modules/attrs'\n+import { patchDOMProp } from './modules/props'\n+import { patchEvent } from './modules/events'\n+\n+export function patchData(\n+  el: Element,\n+  key: string,\n+  prevValue: any,\n+  nextValue: any,\n+  prevVNode: VNode,\n+  nextVNode: VNode,\n+  isSVG: boolean,\n+  unmountChildren: any\n+) {\n+  switch (key) {\n+    // special\n+    case 'class':\n+      patchClass(el, nextValue, isSVG)\n+      break\n+    case 'style':\n+      patchStyle(el, prevValue, nextValue, nextVNode.data)\n+      break\n+    default:\n+      if (key.startsWith('on')) {\n+        patchEvent(el, key.toLowerCase().slice(2), prevValue, nextValue)\n+      } else if (key.startsWith('domProps')) {\n+        patchDOMProp(\n+          el,\n+          key[8].toLowerCase() + key.slice(9),\n+          nextValue,\n+          prevVNode,\n+          unmountChildren\n+        )\n+      } else {\n+        patchAttr(el, key, nextValue, isSVG)\n+      }\n+      break\n+  }\n+}"
      },
      {
        "sha": "e1302c5e5e84aac68a2d6edf13302c237c7d5336",
        "filename": "packages/runtime-dom/src/teardownVNode.ts",
        "status": "added",
        "additions": 13,
        "deletions": 0,
        "changes": 13,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2FteardownVNode.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fruntime-dom%2Fsrc%2FteardownVNode.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Fsrc%2FteardownVNode.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,13 @@\n+import { VNode } from '@vue/core'\n+import { handleDelegatedEvent } from './modules/events'\n+\n+export function teardownVNode(vnode: VNode) {\n+  const { el, data } = vnode\n+  if (data != null) {\n+    for (const key in data) {\n+      if (key.startsWith('on')) {\n+        handleDelegatedEvent(el, key.toLowerCase().slice(2), null)\n+      }\n+    }\n+  }\n+}"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/scheduler/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fscheduler%2F.npmignore?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "826934e7e15eb9aa65564bbce5557d2f4744947e",
        "filename": "packages/scheduler/README.md",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fscheduler%2FREADME.md?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,3 @@\n+# @vue/scheduler\n+\n+> This package is published only for typing and building custom renderers. It is NOT meant to be used in applications.",
        "custom": { "status": "done" }
      },
      {
        "sha": "9a0883bfca8b17d3dc0fa854e7d9c36569fe4b37",
        "filename": "packages/scheduler/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fscheduler%2Findex.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/scheduler.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/scheduler.cjs.js')\n+}",
        "custom": { "status": "done" }
      },
      {
        "sha": "b65d87c852552e5881bbbf12c63076b449a0ec02",
        "filename": "packages/scheduler/package.json",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fscheduler%2Fpackage.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,21 @@\n+{\n+  \"name\": \"@vue/scheduler\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/scheduler\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/scheduler.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/scheduler#readme\"\n+}",
        "custom": { "status": "done" }
      },
      {
        "sha": "31f52297c7feae39f835a41811a3fb013d004986",
        "filename": "packages/scheduler/src/index.ts",
        "status": "added",
        "additions": 40,
        "deletions": 0,
        "changes": 40,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/packages%2Fscheduler%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fscheduler%2Fsrc%2Findex.ts?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,40 @@\n+const queue: Array<() => void> = []\n+const postFlushCbs: Array<() => void> = []\n+const p = Promise.resolve()\n+let flushing = false\n+\n+export function nextTick(fn: () => void) {\n+  p.then(fn)\n+}\n+\n+export function queueJob(job: () => void, postFlushCb?: () => void) {\n+  if (queue.indexOf(job) === -1) {\n+    if (flushing) {\n+      job()\n+    } else {\n+      queue.push(job)\n+    }\n+  }\n+  if (postFlushCb) {\n+    queuePostFlushCb(postFlushCb)\n+  }\n+  if (!flushing) {\n+    nextTick(flushJobs)\n+  }\n+}\n+\n+export function queuePostFlushCb(cb: () => void) {\n+  postFlushCbs.push(cb)\n+}\n+\n+export function flushJobs() {\n+  flushing = true\n+  let job\n+  while ((job = queue.shift())) {\n+    job()\n+  }\n+  while ((job = postFlushCbs.shift())) {\n+    job()\n+  }\n+  flushing = false\n+}",
        "custom": {
          "notes": "> [Microtasks](https://javascript.info/microtask-queue)\n\n任务队列\n\n## 方法\n\n### nextTick\n\n把函数放到一个 microtask 任务队列。\n\n```\nexport function nextTick(fn: () => void) {\n  Promise.resolve().then(fn)\n}\n```\n\n###  queueJob(job, postFlushCb) {\n\n如果正在 flush，那么直接执行任务否则进入队列，nextTick 后把列队所有任务执行。\n\n其中 postFlushCb 是要保证当前 flush 之后（nextTick）再执行。\n\n",
          "status": "done"
        }
      },
      {
        "sha": "320edf5f5afd6be9b36a6e99d6cd46af425a9d20",
        "filename": "rollup.config.js",
        "status": "added",
        "additions": 147,
        "deletions": 0,
        "changes": 147,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/rollup.config.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/rollup.config.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/rollup.config.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,147 @@\n+const fs = require('fs')\n+const path = require('path')\n+const ts = require('rollup-plugin-typescript2')\n+const replace = require('rollup-plugin-replace')\n+const alias = require('rollup-plugin-alias')\n+\n+if (!process.env.TARGET) {\n+  throw new Error('TARGET package must be specified via --environment flag.')\n+}\n+\n+const packagesDir = path.resolve(__dirname, 'packages')\n+const packageDir = path.resolve(packagesDir, process.env.TARGET)\n+const name = path.basename(packageDir)\n+const resolve = p => path.resolve(packageDir, p)\n+const pkg = require(resolve(`package.json`))\n+const packageOptions = pkg.buildOptions || {}\n+\n+// build aliases dynamically\n+const aliasOptions = { resolve: ['.ts'] }\n+fs.readdirSync(packagesDir).forEach(dir => {\n+  if (fs.statSync(path.resolve(packagesDir, dir)).isDirectory()) {\n+    aliasOptions[`@vue/${dir}`] = path.resolve(packagesDir, `${dir}/src/index`)\n+  }\n+})\n+const aliasPlugin = alias(aliasOptions)\n+\n+// ensure TS checks only once for each build\n+let hasTSChecked = false\n+\n+const configs = {\n+  esm: {\n+    file: resolve(`dist/${name}.esm.js`),\n+    format: `es`\n+  },\n+  cjs: {\n+    file: resolve(`dist/${name}.cjs.js`),\n+    format: `cjs`\n+  },\n+  umd: {\n+    file: resolve(`dist/${name}.umd.js`),\n+    format: `umd`\n+  },\n+  'esm-browser': {\n+    file: resolve(`dist/${name}.esm-browser.js`),\n+    format: `es`\n+  }\n+}\n+\n+const defaultFormats = ['esm', 'cjs']\n+const inlineFromats = process.env.FORMATS && process.env.FORMATS.split(',')\n+const packageFormats = inlineFromats || packageOptions.formats || defaultFormats\n+const packageConfigs = packageFormats.map(format => createConfig(configs[format]))\n+\n+if (process.env.NODE_ENV === 'production') {\n+  packageFormats.forEach(format => {\n+    if (format === 'cjs') {\n+      packageConfigs.push(createProductionConfig(format))\n+    }\n+    if (format === 'umd' || format === 'esm-browser') {\n+      packageConfigs.push(createMinifiedConfig(format))\n+    }\n+  })\n+}\n+\n+module.exports = packageConfigs\n+\n+function createConfig(output, plugins = []) {\n+  const isProductionBuild = /\\.prod\\.js$/.test(output.file)\n+  const isUMDBuild = /\\.umd(\\.prod)?\\.js$/.test(output.file)\n+  const isBunlderESMBuild = /\\.esm\\.js$/.test(output.file)\n+  const isBrowserESMBuild = /esm-browser(\\.prod)?\\.js$/.test(output.file)\n+\n+  if (isUMDBuild) {\n+    output.name = packageOptions.name\n+  }\n+\n+  const tsPlugin = ts({\n+    check: process.env.NODE_ENV === 'production' && !hasTSChecked,\n+    tsconfig: path.resolve(__dirname, 'tsconfig.json'),\n+    cacheRoot: path.resolve(__dirname, 'node_modules/.rts2_cache'),\n+    tsconfigOverride: {\n+      compilerOptions: {\n+        declaration: process.env.NODE_ENV === 'production' && !hasTSChecked\n+      }\n+    }\n+  })\n+  // we only need to check TS and generate declarations once for each build.\n+  // it also seems to run into weird issues when checking multiple times\n+  // during a single build.\n+  hasTSChecked = true\n+\n+  return {\n+    input: resolve(`src/index.ts`),\n+    // UMD and Browser ESM builds inlines everything so that they can be\n+    // used alone.\n+    external: isUMDBuild || isBrowserESMBuild\n+      ? []\n+      : Object.keys(aliasOptions),\n+    plugins: [\n+      tsPlugin,\n+      aliasPlugin,\n+      createReplacePlugin(isProductionBuild, isBunlderESMBuild),\n+      ...plugins\n+    ],\n+    output,\n+    onwarn: (msg, warn) => {\n+      if (!/Circular/.test(msg)) {\n+        warn(msg)\n+      }\n+    }\n+  }\n+}\n+\n+function createReplacePlugin(isProduction, isBunlderESMBuild) {\n+  return replace({\n+    __DEV__: isBunlderESMBuild\n+      // preserve to be handled by bundlers\n+      ? `process.env.NODE_ENV !== 'production'`\n+      // hard coded dev/prod builds\n+      : !isProduction,\n+    // compatibility builds\n+    __COMPAT__: !!process.env.COMPAT\n+  })\n+}\n+\n+function createProductionConfig(format) {\n+  return createConfig({\n+    file: resolve(`dist/${name}.${format}.prod.js`),\n+    format: /^esm/.test(format) ? 'es' : format\n+  })\n+}\n+\n+function createMinifiedConfig(format) {\n+  const { terser } = require('rollup-plugin-terser')\n+  const isESM = /^esm/.test(format)\n+  return createConfig(\n+    {\n+      file: resolve(`dist/${name}.${format}.prod.js`),\n+      format: isESM ? 'es' : format\n+    },\n+    [\n+      terser({\n+        module: isESM\n+      })\n+    ]\n+  )\n+}"
      },
      {
        "sha": "21098b3fb44cab571b320b038a462154c8127f2c",
        "filename": "scripts/bootstrap.js",
        "status": "added",
        "additions": 75,
        "deletions": 0,
        "changes": 75,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/scripts%2Fbootstrap.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/scripts%2Fbootstrap.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Fbootstrap.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,75 @@\n+// create package.json, README, etc. for packages that don't have them yet\n+\n+const args = require('minimist')(process.argv.slice(2))\n+const fs = require('fs')\n+const path = require('path')\n+const baseVersion = require('../lerna.json').version\n+\n+const packagesDir = path.resolve(__dirname, '../packages')\n+const files = fs.readdirSync(packagesDir)\n+\n+files.forEach(shortName => {\n+  if (!fs.statSync(path.join(packagesDir, shortName)).isDirectory()) {\n+    return\n+  }\n+\n+  const name = shortName === `vue` ? shortName : `@vue/${shortName}`\n+  const pkgPath = path.join(packagesDir, shortName, `package.json`)\n+  if (args.force || !fs.existsSync(pkgPath)) {\n+    const json = {\n+      name,\n+      version: baseVersion,\n+      description: name,\n+      main: 'index.js',\n+      module: `dist/${shortName}.esm.js`,\n+      typings: 'dist/index.d.ts',\n+      repository: {\n+        type: 'git',\n+        url: 'git+https://github.com/vuejs/vue.git'\n+      },\n+      keywords: ['vue'],\n+      author: 'Evan You',\n+      license: 'MIT',\n+      bugs: {\n+        url: 'https://github.com/vuejs/vue/issues'\n+      },\n+      homepage: `https://github.com/vuejs/vue/tree/dev/packages/${shortName}#readme`\n+    }\n+    fs.writeFileSync(pkgPath, JSON.stringify(json, null, 2))\n+  }\n+\n+  const readmePath = path.join(packagesDir, shortName, `README.md`)\n+  if (args.force || !fs.existsSync(readmePath)) {\n+    fs.writeFileSync(readmePath, `# ${name}`)\n+  }\n+\n+  const npmIgnorePath = path.join(packagesDir, shortName, `.npmignore`)\n+  if (args.force || !fs.existsSync(npmIgnorePath)) {\n+    fs.writeFileSync(npmIgnorePath, `__tests__/\\n__mocks__/\\ndist/packages`)\n+  }\n+\n+  const srcDir = path.join(packagesDir, shortName, `src`)\n+  const indexPath = path.join(packagesDir, shortName, `src/index.ts`)\n+  if (args.force || !fs.existsSync(indexPath)) {\n+    if (!fs.existsSync(srcDir)) {\n+      fs.mkdirSync(srcDir)\n+    }\n+    fs.writeFileSync(indexPath, ``)\n+  }\n+\n+  const nodeIndexPath = path.join(packagesDir, shortName, 'index.js')\n+  if (args.force || !fs.existsSync(nodeIndexPath)) {\n+    fs.writeFileSync(\n+      nodeIndexPath,\n+      `\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/${shortName}.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/${shortName}.cjs.js')\n+}\n+    `.trim() + '\\n'\n+    )\n+  }\n+})"
      },
      {
        "sha": "98c97399d9bfcfc407aa1f962100cb4b8718c55e",
        "filename": "scripts/build.js",
        "status": "added",
        "additions": 70,
        "deletions": 0,
        "changes": 70,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/scripts%2Fbuild.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/scripts%2Fbuild.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Fbuild.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,70 @@\n+const fs = require('fs-extra')\n+const path = require('path')\n+const zlib = require('zlib')\n+const chalk = require('chalk')\n+const execa = require('execa')\n+const dts = require('dts-bundle')\n+const { targets, fuzzyMatchTarget } = require('./utils')\n+\n+const target = process.argv[2]\n+\n+;(async () => {\n+  if (!target) {\n+    await buildAll(targets)\n+    checkAllSizes(targets)\n+  } else {\n+    await buildAll(fuzzyMatchTarget(target))\n+    checkAllSizes(fuzzyMatchTarget(target))\n+  }\n+})()\n+\n+async function buildAll (targets) {\n+  for (const target of targets) {\n+    await build(target)\n+  }\n+}\n+\n+async function build (target) {\n+  const pkgDir = path.resolve(`packages/${target}`)\n+\n+  await fs.remove(`${pkgDir}/dist`)\n+\n+  await execa('rollup', [\n+    '-c',\n+    '--environment',\n+    `NODE_ENV:production,TARGET:${target}`\n+  ], { stdio: 'inherit' })\n+\n+  const dtsOptions = {\n+    name: target === 'vue' ? target : `@vue/${target}`,\n+    main: `${pkgDir}/dist/packages/${target}/src/index.d.ts`,\n+    out: `${pkgDir}/dist/index.d.ts`\n+  }\n+  dts.bundle(dtsOptions)\n+  console.log()\n+  console.log(chalk.blue(chalk.bold(`generated typings at ${dtsOptions.out}`)))\n+\n+  await fs.remove(`${pkgDir}/dist/packages`)\n+}\n+\n+function checkAllSizes (targets) {\n+  console.log()\n+  for (const target of targets) {\n+    checkSize(target)\n+  }\n+  console.log()\n+}\n+\n+function checkSize (target) {\n+  const pkgDir = path.resolve(`packages/${target}`)\n+  const esmProdBuild = `${pkgDir}/dist/${target}.esm-browser.prod.js`\n+  if (fs.existsSync(esmProdBuild)) {\n+    const file = fs.readFileSync(esmProdBuild)\n+    const minSize = (file.length / 1024).toFixed(2) + 'kb'\n+    const gzipped = zlib.gzipSync(file)\n+    const gzipSize = (gzipped.length / 1024).toFixed(2) + 'kb'\n+    console.log(`${\n+      chalk.gray(chalk.bold(target))\n+    } min:${minSize} / gzip:${gzipSize}`)\n+  }\n+}"
      },
      {
        "sha": "7f71703b51a28c71d32239e0bc89cabf53b5735c",
        "filename": "scripts/dev.js",
        "status": "added",
        "additions": 25,
        "deletions": 0,
        "changes": 25,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/scripts%2Fdev.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/scripts%2Fdev.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Fdev.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,25 @@\n+// Run Rollup in watch mode for a single package for development.\n+// Only the ES modules format will be generated, as it is expected to be tested\n+// in a modern browser using <script type=\"module\">.\n+// Defaults to watch the `vue` meta package.\n+// To specific the package to watch, simply pass its name. e.g.\n+// ```\n+// yarn dev observer\n+// ```\n+\n+const execa = require('execa')\n+const { targets, fuzzyMatchTarget } = require('./utils')\n+\n+const target = fuzzyMatchTarget(process.argv[2] || 'runtime-dom')\n+\n+execa(\n+  'rollup',\n+  [\n+    '-wc',\n+    '--environment',\n+    `TARGET:${target},FORMATS:umd`\n+  ],\n+  {\n+    stdio: 'inherit'\n+  }\n+)"
      },
      {
        "sha": "aa1ca3dbd783bd01f7549208acc93ed35fb2a6e6",
        "filename": "scripts/utils.js",
        "status": "added",
        "additions": 19,
        "deletions": 0,
        "changes": 19,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/scripts%2Futils.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/scripts%2Futils.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Futils.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,19 @@\n+const fs = require('fs')\n+\n+const targets = exports.targets = fs.readdirSync('packages').filter(f => {\n+  return fs.statSync(`packages/${f}`).isDirectory()\n+})\n+\n+exports.fuzzyMatchTarget = partialTarget => {\n+  const matched = []\n+  for (const target of targets) {\n+    if (target.match(partialTarget)) {\n+      matched.push(target)\n+    }\n+  }\n+  if (matched.length) {\n+    return matched\n+  } else {\n+    throw new Error(`Target ${partialTarget} not found!`)\n+  }\n+}"
      },
      {
        "sha": "4741c06f40431388e72f73e750db9a9876b59669",
        "filename": "scripts/verifyCommit.js",
        "status": "added",
        "additions": 32,
        "deletions": 0,
        "changes": 32,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/scripts%2FverifyCommit.js",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/scripts%2FverifyCommit.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2FverifyCommit.js?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,32 @@\n+// Invoked on the commit-msg git hook by yorkie.\n+\n+const chalk = require('chalk')\n+const msgPath = process.env.GIT_PARAMS\n+const msg = require('fs')\n+  .readFileSync(msgPath, 'utf-8')\n+  .trim()\n+\n+const commitRE = /^(revert: )?(feat|fix|docs|style|refactor|perf|test|workflow|ci|chore|types)(\\(.+\\))?: .{1,50}/\n+\n+if (!commitRE.test(msg)) {\n+  console.log()\n+  console.error(\n+    `  ${chalk.bgRed.white(' ERROR ')} ${chalk.red(\n+      `invalid commit message format.`\n+    )}\\n\\n` +\n+      chalk.red(\n+        `  Proper commit message format is required for automated changelog generation. Examples:\\n\\n`\n+      ) +\n+      `    ${chalk.green(`feat(compiler): add 'comments' option`)}\\n` +\n+      `    ${chalk.green(\n+        `fix(v-model): handle events on blur (close #28)`\n+      )}\\n\\n` +\n+      chalk.red(`  See .github/COMMIT_CONVENTION.md for more details.\\n`) +\n+      chalk.red(\n+        `  You can also use ${chalk.cyan(\n+          `npm run commit`\n+        )} to interactively generate a commit message.\\n`\n+      )\n+  )\n+  process.exit(1)\n+}"
      },
      {
        "sha": "cc1cedfa7ca4c557a37dc235fb837ef9f3bd72a0",
        "filename": "tsconfig.json",
        "status": "added",
        "additions": 31,
        "deletions": 0,
        "changes": 31,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/tsconfig.json",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/tsconfig.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/tsconfig.json?ref=3401f6b460196ce254a73df05ce571802b365054",
        "patch": "@@ -0,0 +1,31 @@\n+{\n+  \"compilerOptions\": {\n+    \"baseUrl\": \".\",\n+    \"outDir\": \"dist\",\n+    \"sourceMap\": false,\n+    \"target\": \"esnext\",\n+    \"module\": \"esnext\",\n+    \"moduleResolution\": \"node\",\n+    // \"declaration\": true,\n+    \"allowJs\": false,\n+    \"noUnusedLocals\": true,\n+    \"strictNullChecks\": true,\n+    \"noImplicitAny\": true,\n+    \"experimentalDecorators\": true,\n+    \"removeComments\": false,\n+    \"lib\": [\n+      \"esnext\",\n+      \"dom\"\n+    ],\n+    \"rootDir\": \".\",\n+    \"paths\": {\n+      \"@vue/core\": [\"packages/core/src\"],\n+      \"@vue/observer\": [\"packages/observer/src\"],\n+      \"@vue/scheduler\": [\"packages/scheduler/src\"]\n+    }\n+  },\n+  \"include\": [\n+    \"packages/global.d.ts\",\n+    \"packages/*/src\"\n+  ]\n+}",
        "custom": {
          "notes": "compilerOptions:\n- `\"target\"` : \"esnext\", //指定编译的ECMAScript目标版本\n- `\"module\"`: \"esnext\", //指定生成哪个模块系统代码。枚举值: \"None\" ,\n\"CommonJS\", \"AMD\", \"System\", \"UMD\", \"ES6\", \"ES2015\", \"ESNext\"\n- `'moduleResolution\"` : \"node\" // 在 /root/src/a.js 中 import 'b'\n    - 相对路径\n        1. 拼接查找 /root/src/b.ts\n        2. /root/src/b/package.json 中 main 字段对应路径\n        3. /root/src/b/index.ts\n    - 非相对路径\n        1. /root/src/node_modules/b.js\n        2. /root/src/node_modules/b/package.json (\"main\" 字段)\n        3. /root/src/node_modules/b/index.js\n        4. /root/node_modules/b.js\n        5. /root/node_modules/b/package.json (\"main\" 字段)\n        6. /root/node_modules/b/index.js\n        7. /node_modules/b.js\n        8. /node_modules/b/package.json (\"main\" 字段)\n        9. /node_modules/b/index.js\n\n指令：\n- `/// <reference no-default-lib=\"true\"/>`  表示作为默认库，lib.d.ts 都会有这个指令，如果其他文件有这个指令，则告诉编译器编译该文件时不要引入 lib.d.ts，因为指令表明它要作为一个默认类型库，默认库当然不会引入默认库 lib.d.ts",
          "status": "done"
        }
      },
      {
        "sha": "b5a927a8b27f7329f4fb993b21175ee4db64ab1c",
        "filename": "yarn.lock",
        "status": "added",
        "additions": 4042,
        "deletions": 0,
        "changes": 4042,
        "blob_url": "https://github.com/vuejs/core/blob/3401f6b460196ce254a73df05ce571802b365054/yarn.lock",
        "raw_url": "https://github.com/vuejs/core/raw/3401f6b460196ce254a73df05ce571802b365054/yarn.lock",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/yarn.lock?ref=3401f6b460196ce254a73df05ce571802b365054"
      }
    ]
  },
  "c0d9f3ab1536857212474abac49ae62f2ab8473c": {
    "content": "",
    "date": 1649399322397,
    "files": [
      {
        "sha": "a825457e51449c8cb81484c2148fc181f96226d2",
        "filename": "package.json",
        "status": "modified",
        "additions": 17,
        "deletions": 1,
        "changes": 18,
        "blob_url": "https://github.com/vuejs/core/blob/c0d9f3ab1536857212474abac49ae62f2ab8473c/package.json",
        "raw_url": "https://github.com/vuejs/core/raw/c0d9f3ab1536857212474abac49ae62f2ab8473c/package.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/package.json?ref=c0d9f3ab1536857212474abac49ae62f2ab8473c",
        "patch": "@@ -8,19 +8,35 @@\n     \"build\": \"node scripts/build.js\",\n     \"lint\": \"prettier --write --parser typescript 'packages/*/src/**/*.ts'\"\n   },\n+  \"gitHooks\": {\n+    \"pre-commit\": \"lint-staged\",\n+    \"commit-msg\": \"node scripts/verifyCommit.js\"\n+  },\n+  \"lint-staged\": {\n+    \"*.js\": [\n+      \"prettier --write\",\n+      \"git add\"\n+    ],\n+    \"*.ts\": [\n+      \"prettier --parser=typescript --write\",\n+      \"git add\"\n+    ]\n+  },\n   \"devDependencies\": {\n     \"chalk\": \"^2.4.1\",\n     \"dts-bundle\": \"^0.7.3\",\n     \"execa\": \"^1.0.0\",\n     \"fs-extra\": \"^7.0.0\",\n     \"lerna\": \"^3.4.0\",\n+    \"lint-staged\": \"^7.2.2\",\n     \"minimist\": \"^1.2.0\",\n     \"prettier\": \"^1.14.2\",\n     \"rollup\": \"^0.65.0\",\n     \"rollup-plugin-alias\": \"^1.4.0\",\n     \"rollup-plugin-replace\": \"^2.0.0\",\n     \"rollup-plugin-terser\": \"^2.0.2\",\n     \"rollup-plugin-typescript2\": \"^0.17.0\",\n-    \"typescript\": \"^3.0.3\"\n+    \"typescript\": \"^3.0.3\",\n+    \"yorkie\": \"^2.0.0\"\n   }\n }"
      },
      {
        "sha": "4e705fde7315d1b912f7660d59801782a4ad667a",
        "filename": "yarn.lock",
        "status": "modified",
        "additions": 315,
        "deletions": 9,
        "changes": 324,
        "blob_url": "https://github.com/vuejs/core/blob/c0d9f3ab1536857212474abac49ae62f2ab8473c/yarn.lock",
        "raw_url": "https://github.com/vuejs/core/raw/c0d9f3ab1536857212474abac49ae62f2ab8473c/yarn.lock",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/yarn.lock?ref=c0d9f3ab1536857212474abac49ae62f2ab8473c",
        "patch": "@@ -539,6 +539,12 @@\n   version \"1.1.2\"\n   resolved \"https://registry.yarnpkg.com/@nodelib/fs.stat/-/fs.stat-1.1.2.tgz#54c5a964462be3d4d78af631363c18d6fa91ac26\"\n \n+\"@samverschueren/stream-to-observable@^0.3.0\":\n+  version \"0.3.0\"\n+  resolved \"https://registry.yarnpkg.com/@samverschueren/stream-to-observable/-/stream-to-observable-0.3.0.tgz#ecdf48d532c58ea477acfcab80348424f8d0662f\"\n+  dependencies:\n+    any-observable \"^0.3.0\"\n+\n \"@types/detect-indent@0.1.30\":\n   version \"0.1.30\"\n   resolved \"https://registry.yarnpkg.com/@types/detect-indent/-/detect-indent-0.1.30.tgz#dc682bb412b4e65ba098e70edad73b4833fb910d\"\n@@ -602,6 +608,10 @@ ajv@^5.3.0:\n     fast-json-stable-stringify \"^2.0.0\"\n     json-schema-traverse \"^0.3.0\"\n \n+ansi-escapes@^1.0.0:\n+  version \"1.4.0\"\n+  resolved \"https://registry.yarnpkg.com/ansi-escapes/-/ansi-escapes-1.4.0.tgz#d3a8a83b319aa67793662b13e761c7911422306e\"\n+\n ansi-escapes@^3.0.0:\n   version \"3.1.0\"\n   resolved \"https://registry.yarnpkg.com/ansi-escapes/-/ansi-escapes-3.1.0.tgz#f73207bb81207d75fd6c83f125af26eea378ca30\"\n@@ -614,12 +624,20 @@ ansi-regex@^3.0.0:\n   version \"3.0.0\"\n   resolved \"https://registry.yarnpkg.com/ansi-regex/-/ansi-regex-3.0.0.tgz#ed0317c322064f79466c02966bddb605ab37d998\"\n \n-ansi-styles@^3.2.1:\n+ansi-styles@^2.2.1:\n+  version \"2.2.1\"\n+  resolved \"https://registry.yarnpkg.com/ansi-styles/-/ansi-styles-2.2.1.tgz#b432dd3358b634cf75e1e4664368240533c1ddbe\"\n+\n+ansi-styles@^3.2.0, ansi-styles@^3.2.1:\n   version \"3.2.1\"\n   resolved \"https://registry.yarnpkg.com/ansi-styles/-/ansi-styles-3.2.1.tgz#41fbb20243e50b12be0f04b8dedbf07520ce841d\"\n   dependencies:\n     color-convert \"^1.9.0\"\n \n+any-observable@^0.3.0:\n+  version \"0.3.0\"\n+  resolved \"https://registry.yarnpkg.com/any-observable/-/any-observable-0.3.0.tgz#af933475e5806a67d0d7df090dd5e8bef65d119b\"\n+\n aproba@^1.0.3, aproba@^1.1.1:\n   version \"1.2.0\"\n   resolved \"https://registry.yarnpkg.com/aproba/-/aproba-1.2.0.tgz#6802e6264efd18c790a1b0d517f0f2627bf2c94a\"\n@@ -879,7 +897,17 @@ caseless@~0.12.0:\n   version \"0.12.0\"\n   resolved \"https://registry.yarnpkg.com/caseless/-/caseless-0.12.0.tgz#1b681c21ff84033c826543090689420d187151dc\"\n \n-chalk@^2.0.0, chalk@^2.3.1, chalk@^2.4.1:\n+chalk@^1.0.0, chalk@^1.1.3:\n+  version \"1.1.3\"\n+  resolved \"http://registry.npmjs.org/chalk/-/chalk-1.1.3.tgz#a8115c55e4a702fe4d150abd3872822a7e09fc98\"\n+  dependencies:\n+    ansi-styles \"^2.2.1\"\n+    escape-string-regexp \"^1.0.2\"\n+    has-ansi \"^2.0.0\"\n+    strip-ansi \"^3.0.0\"\n+    supports-color \"^2.0.0\"\n+\n+chalk@^2.0.0, chalk@^2.0.1, chalk@^2.3.1, chalk@^2.4.1:\n   version \"2.4.1\"\n   resolved \"https://registry.yarnpkg.com/chalk/-/chalk-2.4.1.tgz#18c49ab16a037b6eb0152cc83e3471338215b66e\"\n   dependencies:\n@@ -908,12 +936,25 @@ class-utils@^0.3.5:\n     isobject \"^3.0.0\"\n     static-extend \"^0.1.1\"\n \n+cli-cursor@^1.0.2:\n+  version \"1.0.2\"\n+  resolved \"https://registry.yarnpkg.com/cli-cursor/-/cli-cursor-1.0.2.tgz#64da3f7d56a54412e59794bd62dc35295e8f2987\"\n+  dependencies:\n+    restore-cursor \"^1.0.1\"\n+\n cli-cursor@^2.1.0:\n   version \"2.1.0\"\n   resolved \"https://registry.yarnpkg.com/cli-cursor/-/cli-cursor-2.1.0.tgz#b35dac376479facc3e94747d41d0d0f5238ffcb5\"\n   dependencies:\n     restore-cursor \"^2.0.0\"\n \n+cli-truncate@^0.2.1:\n+  version \"0.2.1\"\n+  resolved \"https://registry.yarnpkg.com/cli-truncate/-/cli-truncate-0.2.1.tgz#9f15cfbb0705005369216c626ac7d05ab90dd574\"\n+  dependencies:\n+    slice-ansi \"0.0.4\"\n+    string-width \"^1.0.1\"\n+\n cli-width@^2.0.0:\n   version \"2.2.0\"\n   resolved \"https://registry.yarnpkg.com/cli-width/-/cli-width-2.2.0.tgz#ff19ede8a9a5e579324147b0c11f0fbcbabed639\"\n@@ -981,7 +1022,7 @@ combined-stream@~1.0.6:\n   dependencies:\n     delayed-stream \"~1.0.0\"\n \n-commander@^2.9.0:\n+commander@^2.14.1, commander@^2.9.0:\n   version \"2.18.0\"\n   resolved \"https://registry.yarnpkg.com/commander/-/commander-2.18.0.tgz#2bf063ddee7c7891176981a2cc798e5754bc6970\"\n \n@@ -1127,6 +1168,14 @@ cosmiconfig@^5.0.2:\n     js-yaml \"^3.9.0\"\n     parse-json \"^4.0.0\"\n \n+cross-spawn@^5.0.1:\n+  version \"5.1.0\"\n+  resolved \"https://registry.yarnpkg.com/cross-spawn/-/cross-spawn-5.1.0.tgz#e8bd0efee58fcff6f8f94510a0a554bbfa235449\"\n+  dependencies:\n+    lru-cache \"^4.0.1\"\n+    shebang-command \"^1.2.0\"\n+    which \"^1.2.9\"\n+\n cross-spawn@^6.0.0:\n   version \"6.0.5\"\n   resolved \"https://registry.yarnpkg.com/cross-spawn/-/cross-spawn-6.0.5.tgz#4a5ec7c64dfae22c3a14124dbacdee846d80cbc4\"\n@@ -1159,6 +1208,10 @@ dashdash@^1.12.0:\n   dependencies:\n     assert-plus \"^1.0.0\"\n \n+date-fns@^1.27.2:\n+  version \"1.29.0\"\n+  resolved \"https://registry.yarnpkg.com/date-fns/-/date-fns-1.29.0.tgz#12e609cdcb935127311d04d33334e2960a2a54e6\"\n+\n dateformat@^3.0.0:\n   version \"3.0.3\"\n   resolved \"https://registry.yarnpkg.com/dateformat/-/dateformat-3.0.3.tgz#a6e37499a4d9a9cf85ef5872044d62901c9889ae\"\n@@ -1313,6 +1366,10 @@ ecc-jsbn@~0.1.1:\n     jsbn \"~0.1.0\"\n     safer-buffer \"^2.1.0\"\n \n+elegant-spinner@^1.0.1:\n+  version \"1.0.1\"\n+  resolved \"https://registry.yarnpkg.com/elegant-spinner/-/elegant-spinner-1.0.1.tgz#db043521c95d7e303fd8f345bedc3349cfb0729e\"\n+\n encoding@^0.1.11:\n   version \"0.1.12\"\n   resolved \"https://registry.yarnpkg.com/encoding/-/encoding-0.1.12.tgz#538b66f3ee62cd1ab51ec323829d1f9480c74beb\"\n@@ -1345,7 +1402,7 @@ es6-promisify@^5.0.0:\n   dependencies:\n     es6-promise \"^4.0.3\"\n \n-escape-string-regexp@^1.0.5:\n+escape-string-regexp@^1.0.2, escape-string-regexp@^1.0.5:\n   version \"1.0.5\"\n   resolved \"https://registry.yarnpkg.com/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz#1b61c0562190a8dff6ae3bb2cf0200ca130b86d4\"\n \n@@ -1373,6 +1430,30 @@ execa@^0.10.0:\n     signal-exit \"^3.0.0\"\n     strip-eof \"^1.0.0\"\n \n+execa@^0.8.0:\n+  version \"0.8.0\"\n+  resolved \"https://registry.yarnpkg.com/execa/-/execa-0.8.0.tgz#d8d76bbc1b55217ed190fd6dd49d3c774ecfc8da\"\n+  dependencies:\n+    cross-spawn \"^5.0.1\"\n+    get-stream \"^3.0.0\"\n+    is-stream \"^1.1.0\"\n+    npm-run-path \"^2.0.0\"\n+    p-finally \"^1.0.0\"\n+    signal-exit \"^3.0.0\"\n+    strip-eof \"^1.0.0\"\n+\n+execa@^0.9.0:\n+  version \"0.9.0\"\n+  resolved \"https://registry.yarnpkg.com/execa/-/execa-0.9.0.tgz#adb7ce62cf985071f60580deb4a88b9e34712d01\"\n+  dependencies:\n+    cross-spawn \"^5.0.1\"\n+    get-stream \"^3.0.0\"\n+    is-stream \"^1.1.0\"\n+    npm-run-path \"^2.0.0\"\n+    p-finally \"^1.0.0\"\n+    signal-exit \"^3.0.0\"\n+    strip-eof \"^1.0.0\"\n+\n execa@^1.0.0:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/execa/-/execa-1.0.0.tgz#c6236a5bb4df6d6f15e88e7f017798216749ddd8\"\n@@ -1385,6 +1466,10 @@ execa@^1.0.0:\n     signal-exit \"^3.0.0\"\n     strip-eof \"^1.0.0\"\n \n+exit-hook@^1.0.0:\n+  version \"1.1.1\"\n+  resolved \"https://registry.yarnpkg.com/exit-hook/-/exit-hook-1.1.1.tgz#f05ca233b48c05d54fff07765df8507e95c02ff8\"\n+\n expand-brackets@^0.1.4:\n   version \"0.1.5\"\n   resolved \"https://registry.yarnpkg.com/expand-brackets/-/expand-brackets-0.1.5.tgz#df07284e342a807cd733ac5af72411e581d1177b\"\n@@ -1484,6 +1569,13 @@ figgy-pudding@^3.1.0, figgy-pudding@^3.2.1, figgy-pudding@^3.4.1, figgy-pudding@\n   version \"3.5.1\"\n   resolved \"https://registry.yarnpkg.com/figgy-pudding/-/figgy-pudding-3.5.1.tgz#862470112901c727a0e495a80744bd5baa1d6790\"\n \n+figures@^1.7.0:\n+  version \"1.7.0\"\n+  resolved \"https://registry.yarnpkg.com/figures/-/figures-1.7.0.tgz#cbe1e3affcf1cd44b80cadfed28dc793a9701d2e\"\n+  dependencies:\n+    escape-string-regexp \"^1.0.5\"\n+    object-assign \"^4.1.0\"\n+\n figures@^2.0.0:\n   version \"2.0.0\"\n   resolved \"https://registry.yarnpkg.com/figures/-/figures-2.0.0.tgz#3ab1a2d2a62c8bfb431a0c94cb797a2fce27c962\"\n@@ -1513,6 +1605,10 @@ fill-range@^4.0.0:\n     repeat-string \"^1.6.1\"\n     to-regex-range \"^2.1.0\"\n \n+find-parent-dir@^0.3.0:\n+  version \"0.3.0\"\n+  resolved \"https://registry.yarnpkg.com/find-parent-dir/-/find-parent-dir-0.3.0.tgz#33c44b429ab2b2f0646299c5f9f718f376ff8d54\"\n+\n find-up@^1.0.0:\n   version \"1.1.2\"\n   resolved \"https://registry.yarnpkg.com/find-up/-/find-up-1.1.2.tgz#6b2e9822b1a2ce0a60ab64d610eccad53cb24d0f\"\n@@ -1631,6 +1727,10 @@ get-caller-file@^1.0.1:\n   version \"1.0.3\"\n   resolved \"https://registry.yarnpkg.com/get-caller-file/-/get-caller-file-1.0.3.tgz#f978fa4c90d1dfe7ff2d6beda2a515e713bdcf4a\"\n \n+get-own-enumerable-property-symbols@^2.0.1:\n+  version \"2.0.1\"\n+  resolved \"https://registry.yarnpkg.com/get-own-enumerable-property-symbols/-/get-own-enumerable-property-symbols-2.0.1.tgz#5c4ad87f2834c4b9b4e84549dc1e0650fb38c24b\"\n+\n get-pkg-repo@^1.0.0:\n   version \"1.4.0\"\n   resolved \"https://registry.yarnpkg.com/get-pkg-repo/-/get-pkg-repo-1.4.0.tgz#c73b489c06d80cc5536c2c853f9e05232056972d\"\n@@ -1785,6 +1885,12 @@ har-validator@~5.1.0:\n     ajv \"^5.3.0\"\n     har-schema \"^2.0.0\"\n \n+has-ansi@^2.0.0:\n+  version \"2.0.0\"\n+  resolved \"https://registry.yarnpkg.com/has-ansi/-/has-ansi-2.0.0.tgz#34f5049ce1ecdf2b0649af3ef24e45ed35416d91\"\n+  dependencies:\n+    ansi-regex \"^2.0.0\"\n+\n has-flag@^3.0.0:\n   version \"3.0.0\"\n   resolved \"https://registry.yarnpkg.com/has-flag/-/has-flag-3.0.0.tgz#b5d454dc2199ae225699f3467e5a07f3b955bafd\"\n@@ -2093,10 +2199,16 @@ is-number@^4.0.0:\n   version \"4.0.0\"\n   resolved \"https://registry.yarnpkg.com/is-number/-/is-number-4.0.0.tgz#0026e37f5454d73e356dfe6564699867c6a7f0ff\"\n \n-is-obj@^1.0.0:\n+is-obj@^1.0.0, is-obj@^1.0.1:\n   version \"1.0.1\"\n   resolved \"http://registry.npmjs.org/is-obj/-/is-obj-1.0.1.tgz#3e4729ac1f5fde025cd7d83a896dab9f4f67db0f\"\n \n+is-observable@^1.1.0:\n+  version \"1.1.0\"\n+  resolved \"https://registry.yarnpkg.com/is-observable/-/is-observable-1.1.0.tgz#b3e986c8f44de950867cab5403f5a3465005975e\"\n+  dependencies:\n+    symbol-observable \"^1.1.0\"\n+\n is-plain-obj@^1.0.0, is-plain-obj@^1.1.0:\n   version \"1.1.0\"\n   resolved \"https://registry.yarnpkg.com/is-plain-obj/-/is-plain-obj-1.1.0.tgz#71a50c8429dfca773c92a390a4a03b39fcd51d3e\"\n@@ -2119,6 +2231,10 @@ is-promise@^2.1.0:\n   version \"2.1.0\"\n   resolved \"https://registry.yarnpkg.com/is-promise/-/is-promise-2.1.0.tgz#79a2a9ece7f096e80f36d2b2f3bc16c1ff4bf3fa\"\n \n+is-regexp@^1.0.0:\n+  version \"1.0.0\"\n+  resolved \"https://registry.yarnpkg.com/is-regexp/-/is-regexp-1.0.0.tgz#fd2d883545c46bac5a633e7b9a09e87fa2cb5069\"\n+\n is-stream@^1.1.0:\n   version \"1.1.0\"\n   resolved \"https://registry.yarnpkg.com/is-stream/-/is-stream-1.1.0.tgz#12d4a3dd4e68e0b79ceb8dbc84173ae80d91ca44\"\n@@ -2167,6 +2283,19 @@ isstream@~0.1.2:\n   version \"0.1.2\"\n   resolved \"https://registry.yarnpkg.com/isstream/-/isstream-0.1.2.tgz#47e63f7af55afa6f92e1500e690eb8b8529c099a\"\n \n+jest-get-type@^22.1.0:\n+  version \"22.4.3\"\n+  resolved \"https://registry.yarnpkg.com/jest-get-type/-/jest-get-type-22.4.3.tgz#e3a8504d8479342dd4420236b322869f18900ce4\"\n+\n+jest-validate@^23.5.0:\n+  version \"23.6.0\"\n+  resolved \"https://registry.yarnpkg.com/jest-validate/-/jest-validate-23.6.0.tgz#36761f99d1ed33fcd425b4e4c5595d62b6597474\"\n+  dependencies:\n+    chalk \"^2.0.1\"\n+    jest-get-type \"^22.1.0\"\n+    leven \"^2.1.0\"\n+    pretty-format \"^23.6.0\"\n+\n jest-worker@^23.2.0:\n   version \"23.2.0\"\n   resolved \"https://registry.yarnpkg.com/jest-worker/-/jest-worker-23.2.0.tgz#faf706a8da36fae60eb26957257fa7b5d8ea02b9\"\n@@ -2271,6 +2400,10 @@ lerna@^3.4.0:\n     import-local \"^1.0.0\"\n     npmlog \"^4.1.2\"\n \n+leven@^2.1.0:\n+  version \"2.1.0\"\n+  resolved \"https://registry.yarnpkg.com/leven/-/leven-2.1.0.tgz#c2e7a9f772094dee9d34202ae8acce4687875580\"\n+\n libnpmaccess@^3.0.0:\n   version \"3.0.0\"\n   resolved \"https://registry.yarnpkg.com/libnpmaccess/-/libnpmaccess-3.0.0.tgz#33cc9c8a5cb53e87d06bf2e547c2eba974f619af\"\n@@ -2280,6 +2413,73 @@ libnpmaccess@^3.0.0:\n     npm-package-arg \"^6.1.0\"\n     npm-registry-fetch \"^3.8.0\"\n \n+lint-staged@^7.2.2:\n+  version \"7.2.2\"\n+  resolved \"https://registry.yarnpkg.com/lint-staged/-/lint-staged-7.2.2.tgz#0983d55d497f19f36d11ff2c8242b2f56cc2dd05\"\n+  dependencies:\n+    chalk \"^2.3.1\"\n+    commander \"^2.14.1\"\n+    cosmiconfig \"^5.0.2\"\n+    debug \"^3.1.0\"\n+    dedent \"^0.7.0\"\n+    execa \"^0.9.0\"\n+    find-parent-dir \"^0.3.0\"\n+    is-glob \"^4.0.0\"\n+    is-windows \"^1.0.2\"\n+    jest-validate \"^23.5.0\"\n+    listr \"^0.14.1\"\n+    lodash \"^4.17.5\"\n+    log-symbols \"^2.2.0\"\n+    micromatch \"^3.1.8\"\n+    npm-which \"^3.0.1\"\n+    p-map \"^1.1.1\"\n+    path-is-inside \"^1.0.2\"\n+    pify \"^3.0.0\"\n+    please-upgrade-node \"^3.0.2\"\n+    staged-git-files \"1.1.1\"\n+    string-argv \"^0.0.2\"\n+    stringify-object \"^3.2.2\"\n+\n+listr-silent-renderer@^1.1.1:\n+  version \"1.1.1\"\n+  resolved \"https://registry.yarnpkg.com/listr-silent-renderer/-/listr-silent-renderer-1.1.1.tgz#924b5a3757153770bf1a8e3fbf74b8bbf3f9242e\"\n+\n+listr-update-renderer@^0.4.0:\n+  version \"0.4.0\"\n+  resolved \"https://registry.yarnpkg.com/listr-update-renderer/-/listr-update-renderer-0.4.0.tgz#344d980da2ca2e8b145ba305908f32ae3f4cc8a7\"\n+  dependencies:\n+    chalk \"^1.1.3\"\n+    cli-truncate \"^0.2.1\"\n+    elegant-spinner \"^1.0.1\"\n+    figures \"^1.7.0\"\n+    indent-string \"^3.0.0\"\n+    log-symbols \"^1.0.2\"\n+    log-update \"^1.0.2\"\n+    strip-ansi \"^3.0.1\"\n+\n+listr-verbose-renderer@^0.4.0:\n+  version \"0.4.1\"\n+  resolved \"https://registry.yarnpkg.com/listr-verbose-renderer/-/listr-verbose-renderer-0.4.1.tgz#8206f4cf6d52ddc5827e5fd14989e0e965933a35\"\n+  dependencies:\n+    chalk \"^1.1.3\"\n+    cli-cursor \"^1.0.2\"\n+    date-fns \"^1.27.2\"\n+    figures \"^1.7.0\"\n+\n+listr@^0.14.1:\n+  version \"0.14.2\"\n+  resolved \"https://registry.yarnpkg.com/listr/-/listr-0.14.2.tgz#cbe44b021100a15376addfc2d79349ee430bfe14\"\n+  dependencies:\n+    \"@samverschueren/stream-to-observable\" \"^0.3.0\"\n+    is-observable \"^1.1.0\"\n+    is-promise \"^2.1.0\"\n+    is-stream \"^1.1.0\"\n+    listr-silent-renderer \"^1.1.1\"\n+    listr-update-renderer \"^0.4.0\"\n+    listr-verbose-renderer \"^0.4.0\"\n+    p-map \"^1.1.1\"\n+    rxjs \"^6.1.0\"\n+\n load-json-file@^1.0.0:\n   version \"1.1.0\"\n   resolved \"http://registry.npmjs.org/load-json-file/-/load-json-file-1.1.0.tgz#956905708d58b4bab4c2261b04f59f31c99374c0\"\n@@ -2338,14 +2538,33 @@ lodash@^4.17.10, lodash@^4.17.5, lodash@^4.2.1:\n   version \"4.17.11\"\n   resolved \"https://registry.yarnpkg.com/lodash/-/lodash-4.17.11.tgz#b39ea6229ef607ecd89e2c8df12536891cac9b8d\"\n \n+log-symbols@^1.0.2:\n+  version \"1.0.2\"\n+  resolved \"https://registry.yarnpkg.com/log-symbols/-/log-symbols-1.0.2.tgz#376ff7b58ea3086a0f09facc74617eca501e1a18\"\n+  dependencies:\n+    chalk \"^1.0.0\"\n+\n+log-symbols@^2.2.0:\n+  version \"2.2.0\"\n+  resolved \"https://registry.yarnpkg.com/log-symbols/-/log-symbols-2.2.0.tgz#5740e1c5d6f0dfda4ad9323b5332107ef6b4c40a\"\n+  dependencies:\n+    chalk \"^2.0.1\"\n+\n+log-update@^1.0.2:\n+  version \"1.0.2\"\n+  resolved \"https://registry.yarnpkg.com/log-update/-/log-update-1.0.2.tgz#19929f64c4093d2d2e7075a1dad8af59c296b8d1\"\n+  dependencies:\n+    ansi-escapes \"^1.0.0\"\n+    cli-cursor \"^1.0.2\"\n+\n loud-rejection@^1.0.0:\n   version \"1.6.0\"\n   resolved \"https://registry.yarnpkg.com/loud-rejection/-/loud-rejection-1.6.0.tgz#5b46f80147edee578870f086d04821cf998e551f\"\n   dependencies:\n     currently-unhandled \"^0.4.1\"\n     signal-exit \"^3.0.0\"\n \n-lru-cache@^4.1.2, lru-cache@^4.1.3:\n+lru-cache@^4.0.1, lru-cache@^4.1.2, lru-cache@^4.1.3:\n   version \"4.1.3\"\n   resolved \"https://registry.yarnpkg.com/lru-cache/-/lru-cache-4.1.3.tgz#a1175cf3496dfc8436c156c334b4955992bce69c\"\n   dependencies:\n@@ -2473,7 +2692,7 @@ micromatch@^2.3.11:\n     parse-glob \"^3.0.4\"\n     regex-cache \"^0.4.2\"\n \n-micromatch@^3.1.10:\n+micromatch@^3.1.10, micromatch@^3.1.8:\n   version \"3.1.10\"\n   resolved \"https://registry.yarnpkg.com/micromatch/-/micromatch-3.1.10.tgz#70859bc95c9840952f359a068a3fc49f9ecfac23\"\n   dependencies:\n@@ -2671,6 +2890,10 @@ normalize-package-data@^2.0.0, normalize-package-data@^2.3.0, normalize-package-\n     semver \"2 || 3 || 4 || 5\"\n     validate-npm-package-license \"^3.0.1\"\n \n+normalize-path@^1.0.0:\n+  version \"1.0.0\"\n+  resolved \"https://registry.yarnpkg.com/normalize-path/-/normalize-path-1.0.0.tgz#32d0e472f91ff345701c15a8311018d3b0a90379\"\n+\n normalize-path@^2.0.1:\n   version \"2.1.1\"\n   resolved \"https://registry.yarnpkg.com/normalize-path/-/normalize-path-2.1.1.tgz#1ab28b556e198363a8c1a6f7e6fa20137fe6aed9\"\n@@ -2710,6 +2933,12 @@ npm-packlist@^1.1.10:\n     ignore-walk \"^3.0.1\"\n     npm-bundled \"^1.0.1\"\n \n+npm-path@^2.0.2:\n+  version \"2.0.4\"\n+  resolved \"https://registry.yarnpkg.com/npm-path/-/npm-path-2.0.4.tgz#c641347a5ff9d6a09e4d9bce5580c4f505278e64\"\n+  dependencies:\n+    which \"^1.2.10\"\n+\n npm-pick-manifest@^2.1.0:\n   version \"2.1.0\"\n   resolved \"https://registry.yarnpkg.com/npm-pick-manifest/-/npm-pick-manifest-2.1.0.tgz#dc381bdd670c35d81655e1d5a94aa3dd4d87fce5\"\n@@ -2734,6 +2963,14 @@ npm-run-path@^2.0.0:\n   dependencies:\n     path-key \"^2.0.0\"\n \n+npm-which@^3.0.1:\n+  version \"3.0.1\"\n+  resolved \"https://registry.yarnpkg.com/npm-which/-/npm-which-3.0.1.tgz#9225f26ec3a285c209cae67c3b11a6b4ab7140aa\"\n+  dependencies:\n+    commander \"^2.9.0\"\n+    npm-path \"^2.0.2\"\n+    which \"^1.2.10\"\n+\n \"npmlog@0 || 1 || 2 || 3 || 4\", npmlog@^4.1.2:\n   version \"4.1.2\"\n   resolved \"https://registry.yarnpkg.com/npmlog/-/npmlog-4.1.2.tgz#08a7f2a8bf734604779a9efa4ad5cc717abb954b\"\n@@ -2788,6 +3025,10 @@ once@^1.3.0, once@^1.3.1, once@^1.4.0:\n   dependencies:\n     wrappy \"1\"\n \n+onetime@^1.0.0:\n+  version \"1.1.0\"\n+  resolved \"http://registry.npmjs.org/onetime/-/onetime-1.1.0.tgz#a1f7838f8314c516f05ecefcbc4ccfe04b4ed789\"\n+\n onetime@^2.0.0:\n   version \"2.0.1\"\n   resolved \"https://registry.yarnpkg.com/onetime/-/onetime-2.0.1.tgz#067428230fd67443b2794b22bba528b6867962d4\"\n@@ -2866,7 +3107,7 @@ p-map-series@^1.0.0:\n   dependencies:\n     p-reduce \"^1.0.0\"\n \n-p-map@^1.2.0:\n+p-map@^1.1.1, p-map@^1.2.0:\n   version \"1.2.0\"\n   resolved \"https://registry.yarnpkg.com/p-map/-/p-map-1.2.0.tgz#e4e94f311eabbc8633a1e79908165fca26241b6b\"\n \n@@ -2980,6 +3221,10 @@ path-is-absolute@^1.0.0:\n   version \"1.0.1\"\n   resolved \"https://registry.yarnpkg.com/path-is-absolute/-/path-is-absolute-1.0.1.tgz#174b9268735534ffbc7ace6bf53a5a9e1b5c5f5f\"\n \n+path-is-inside@^1.0.2:\n+  version \"1.0.2\"\n+  resolved \"https://registry.yarnpkg.com/path-is-inside/-/path-is-inside-1.0.2.tgz#365417dede44430d1c11af61027facf074bdfc53\"\n+\n path-key@^2.0.0, path-key@^2.0.1:\n   version \"2.0.1\"\n   resolved \"https://registry.yarnpkg.com/path-key/-/path-key-2.0.1.tgz#411cadb574c5a140d3a4b1910d40d80cc9f40b40\"\n@@ -3030,6 +3275,12 @@ pkg-dir@^2.0.0:\n   dependencies:\n     find-up \"^2.1.0\"\n \n+please-upgrade-node@^3.0.2:\n+  version \"3.1.1\"\n+  resolved \"https://registry.yarnpkg.com/please-upgrade-node/-/please-upgrade-node-3.1.1.tgz#ed320051dfcc5024fae696712c8288993595e8ac\"\n+  dependencies:\n+    semver-compare \"^1.0.0\"\n+\n posix-character-classes@^0.1.0:\n   version \"0.1.1\"\n   resolved \"https://registry.yarnpkg.com/posix-character-classes/-/posix-character-classes-0.1.1.tgz#01eac0fe3b5af71a2a6c02feabb8c1fef7e00eab\"\n@@ -3042,6 +3293,13 @@ prettier@^1.14.2:\n   version \"1.14.2\"\n   resolved \"https://registry.yarnpkg.com/prettier/-/prettier-1.14.2.tgz#0ac1c6e1a90baa22a62925f41963c841983282f9\"\n \n+pretty-format@^23.6.0:\n+  version \"23.6.0\"\n+  resolved \"https://registry.yarnpkg.com/pretty-format/-/pretty-format-23.6.0.tgz#5eaac8eeb6b33b987b7fe6097ea6a8a146ab5760\"\n+  dependencies:\n+    ansi-regex \"^3.0.0\"\n+    ansi-styles \"^3.2.0\"\n+\n process-nextick-args@~2.0.0:\n   version \"2.0.0\"\n   resolved \"https://registry.yarnpkg.com/process-nextick-args/-/process-nextick-args-2.0.0.tgz#a37d732f4271b4ab1ad070d35508e8290788ffaa\"\n@@ -3317,6 +3575,13 @@ resolve@1.8.1:\n   dependencies:\n     path-parse \"^1.0.5\"\n \n+restore-cursor@^1.0.1:\n+  version \"1.0.1\"\n+  resolved \"https://registry.yarnpkg.com/restore-cursor/-/restore-cursor-1.0.1.tgz#34661f46886327fed2991479152252df92daa541\"\n+  dependencies:\n+    exit-hook \"^1.0.0\"\n+    onetime \"^1.0.0\"\n+\n restore-cursor@^2.0.0:\n   version \"2.0.0\"\n   resolved \"https://registry.yarnpkg.com/restore-cursor/-/restore-cursor-2.0.0.tgz#9f7ee287f82fd326d4fd162923d62129eee0dfaf\"\n@@ -3415,6 +3680,10 @@ safe-regex@^1.1.0:\n   version \"2.1.2\"\n   resolved \"https://registry.yarnpkg.com/safer-buffer/-/safer-buffer-2.1.2.tgz#44fa161b0187b9549dd84bb91802f9bd8385cd6a\"\n \n+semver-compare@^1.0.0:\n+  version \"1.0.0\"\n+  resolved \"https://registry.yarnpkg.com/semver-compare/-/semver-compare-1.0.0.tgz#0dee216a1c941ab37e9efb1788f6afc5ff5537fc\"\n+\n \"semver@2 || 3 || 4 || 5\", \"semver@2.x || 3.x || 4 || 5\", semver@^5.4.1, semver@^5.5.0:\n   version \"5.5.1\"\n   resolved \"https://registry.yarnpkg.com/semver/-/semver-5.5.1.tgz#7dfdd8814bdb7cabc7be0fb1d734cfb66c940477\"\n@@ -3463,6 +3732,10 @@ slash@^1.0.0:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/slash/-/slash-1.0.0.tgz#c41f2f6c39fc16d1cd17ad4b5d896114ae470d55\"\n \n+slice-ansi@0.0.4:\n+  version \"0.0.4\"\n+  resolved \"https://registry.yarnpkg.com/slice-ansi/-/slice-ansi-0.0.4.tgz#edbf8903f66f7ce2f8eafd6ceed65e264c831b35\"\n+\n slide@^1.1.6:\n   version \"1.1.6\"\n   resolved \"https://registry.yarnpkg.com/slide/-/slide-1.1.6.tgz#56eb027d65b4d2dce6cb2e2d32c4d4afc9e1d707\"\n@@ -3612,6 +3885,10 @@ ssri@^6.0.0:\n   dependencies:\n     figgy-pudding \"^3.5.1\"\n \n+staged-git-files@1.1.1:\n+  version \"1.1.1\"\n+  resolved \"https://registry.yarnpkg.com/staged-git-files/-/staged-git-files-1.1.1.tgz#37c2218ef0d6d26178b1310719309a16a59f8f7b\"\n+\n static-extend@^0.1.1:\n   version \"0.1.2\"\n   resolved \"https://registry.yarnpkg.com/static-extend/-/static-extend-0.1.2.tgz#60809c39cbff55337226fd5e0b520f341f1fb5c6\"\n@@ -3630,6 +3907,10 @@ stream-shift@^1.0.0:\n   version \"1.0.0\"\n   resolved \"https://registry.yarnpkg.com/stream-shift/-/stream-shift-1.0.0.tgz#d5c752825e5367e786f78e18e445ea223a155952\"\n \n+string-argv@^0.0.2:\n+  version \"0.0.2\"\n+  resolved \"https://registry.yarnpkg.com/string-argv/-/string-argv-0.0.2.tgz#dac30408690c21f3c3630a3ff3a05877bdcbd736\"\n+\n string-width@^1.0.1:\n   version \"1.0.2\"\n   resolved \"https://registry.yarnpkg.com/string-width/-/string-width-1.0.2.tgz#118bdf5b8cdc51a2a7e70d211e07e2b0b9b107d3\"\n@@ -3651,6 +3932,14 @@ string_decoder@~1.1.1:\n   dependencies:\n     safe-buffer \"~5.1.0\"\n \n+stringify-object@^3.2.2:\n+  version \"3.2.2\"\n+  resolved \"https://registry.yarnpkg.com/stringify-object/-/stringify-object-3.2.2.tgz#9853052e5a88fb605a44cd27445aa257ad7ffbcd\"\n+  dependencies:\n+    get-own-enumerable-property-symbols \"^2.0.1\"\n+    is-obj \"^1.0.1\"\n+    is-regexp \"^1.0.0\"\n+\n strip-ansi@^3.0.0, strip-ansi@^3.0.1:\n   version \"3.0.1\"\n   resolved \"https://registry.yarnpkg.com/strip-ansi/-/strip-ansi-3.0.1.tgz#6a385fb8853d952d5ff05d0e8aaf94278dc63dcf\"\n@@ -3696,12 +3985,20 @@ strong-log-transformer@^2.0.0:\n     minimist \"^1.2.0\"\n     through \"^2.3.4\"\n \n+supports-color@^2.0.0:\n+  version \"2.0.0\"\n+  resolved \"https://registry.yarnpkg.com/supports-color/-/supports-color-2.0.0.tgz#535d045ce6b6363fa40117084629995e9df324c7\"\n+\n supports-color@^5.3.0:\n   version \"5.5.0\"\n   resolved \"https://registry.yarnpkg.com/supports-color/-/supports-color-5.5.0.tgz#e2e69a44ac8772f78a1ec0b35b689df6530efc8f\"\n   dependencies:\n     has-flag \"^3.0.0\"\n \n+symbol-observable@^1.1.0:\n+  version \"1.2.0\"\n+  resolved \"https://registry.yarnpkg.com/symbol-observable/-/symbol-observable-1.2.0.tgz#c22688aed4eab3cdc2dfeacbb561660560a00804\"\n+\n tar@^2.0.0:\n   version \"2.2.1\"\n   resolved \"https://registry.yarnpkg.com/tar/-/tar-2.2.1.tgz#8e4d2a256c0e2185c6b18ad694aec968b83cb1d1\"\n@@ -3945,7 +4242,7 @@ which-module@^2.0.0:\n   version \"2.0.0\"\n   resolved \"https://registry.yarnpkg.com/which-module/-/which-module-2.0.0.tgz#d9ef07dce77b9902b8a3a8fa4b31c3e3f7e6e87a\"\n \n-which@1, which@^1.2.9, which@^1.3.0, which@^1.3.1:\n+which@1, which@^1.2.10, which@^1.2.9, which@^1.3.0, which@^1.3.1:\n   version \"1.3.1\"\n   resolved \"https://registry.yarnpkg.com/which/-/which-1.3.1.tgz#a45043d54f5805316da8d62f9f50918d3da70b0a\"\n   dependencies:\n@@ -4040,3 +4337,12 @@ yargs@^12.0.1:\n     which-module \"^2.0.0\"\n     y18n \"^3.2.1 || ^4.0.0\"\n     yargs-parser \"^10.1.0\"\n+\n+yorkie@^2.0.0:\n+  version \"2.0.0\"\n+  resolved \"https://registry.yarnpkg.com/yorkie/-/yorkie-2.0.0.tgz#92411912d435214e12c51c2ae1093e54b6bb83d9\"\n+  dependencies:\n+    execa \"^0.8.0\"\n+    is-ci \"^1.0.10\"\n+    normalize-path \"^1.0.0\"\n+    strip-indent \"^2.0.0\""
      }
    ]
  },
  "9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932": {
    "content": "",
    "date": 1649384705474,
    "files": [
      {
        "sha": "04d9ccd18f9c411fd0137f3a53d497bed0e8172f",
        "filename": "packages/core/src/componentComputed.ts",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/vuejs/core/blob/9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932/packages%2Fcore%2Fsrc%2FcomponentComputed.ts",
        "raw_url": "https://github.com/vuejs/core/raw/9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932/packages%2Fcore%2Fsrc%2FcomponentComputed.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcomponentComputed.ts?ref=9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932",
        "patch": "@@ -1,5 +1,5 @@\n import { EMPTY_OBJ } from './utils'\n-import { computed, ComputedGetter } from '@vue/observer'\n+import { computed, stop, ComputedGetter } from '@vue/observer'\n import { Component, ComponentClass } from './component'\n import { ComponentComputedOptions } from './componentOptions'\n \n@@ -59,7 +59,7 @@ export function teardownComputed(instance: Component) {\n   const handles = instance._computedGetters\n   if (handles !== null) {\n     for (const key in handles) {\n-      handles[key].stop()\n+      stop(handles[key].runner)\n     }\n   }\n }"
      },
      {
        "sha": "973e3c0fdb895b77c8518ffbb78ddb3e82bcc48e",
        "filename": "packages/observer/__tests__/computed.spec.ts",
        "status": "modified",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/vuejs/core/blob/9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932/packages%2Fobserver%2F__tests__%2Fcomputed.spec.ts",
        "raw_url": "https://github.com/vuejs/core/raw/9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932/packages%2Fobserver%2F__tests__%2Fcomputed.spec.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2F__tests__%2Fcomputed.spec.ts?ref=9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932",
        "patch": "@@ -1,4 +1,4 @@\n-import { computed, observable, autorun } from '../src'\n+import { computed, observable, autorun, stop } from '../src'\n \n describe('observer/computed', () => {\n   it('should return updated value', () => {\n@@ -132,7 +132,7 @@ describe('observer/computed', () => {\n     expect(dummy).toBe(undefined)\n     value.foo = 1\n     expect(dummy).toBe(1)\n-    cValue.stop()\n+    stop(cValue.runner)\n     value.foo = 2\n     expect(dummy).toBe(1)\n   })"
      },
      {
        "sha": "d63588d0e92b697017b3b072db2844512b971aa4",
        "filename": "packages/observer/src/computed.ts",
        "status": "modified",
        "additions": 6,
        "deletions": 5,
        "changes": 11,
        "blob_url": "https://github.com/vuejs/core/blob/9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932/packages%2Fobserver%2Fsrc%2Fcomputed.ts",
        "raw_url": "https://github.com/vuejs/core/raw/9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932/packages%2Fobserver%2Fsrc%2Fcomputed.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2Fsrc%2Fcomputed.ts?ref=9b50a5abb9d2e93e41e17bcf8a2717c2c70c2932",
        "patch": "@@ -1,9 +1,9 @@\n-import { autorun, stop } from './index'\n+import { autorun } from './index'\n import { Autorun, activeAutorunStack } from './autorun'\n \n export interface ComputedGetter {\n   (): any\n-  stop: () => void\n+  runner: Autorun\n }\n \n export function computed(getter: Function, context?: any): ComputedGetter {\n@@ -15,8 +15,6 @@ export function computed(getter: Function, context?: any): ComputedGetter {\n       dirty = true\n     }\n   })\n-  // mark runner as computed so that it gets priority during trigger\n-  runner.computed = true\n   const computedGetter = (() => {\n     if (dirty) {\n       value = runner()\n@@ -28,7 +26,10 @@ export function computed(getter: Function, context?: any): ComputedGetter {\n     trackChildRun(runner)\n     return value\n   }) as ComputedGetter\n-  computedGetter.stop = () => stop(runner)\n+  // expose runner so computed can be stopped\n+  computedGetter.runner = runner\n+  // mark runner as computed so that it gets priority during trigger\n+  runner.computed = true\n   return computedGetter\n }\n "
      }
    ]
  },
  "a8522cf48c09efbb2063f129cf1bea0dae09f10a": {
    "content": "",
    "date": 1649389683557,
    "files": [
      {
        "sha": "ddae8cf435e7c554f307fe3a5816f29883a92b6c",
        "filename": "packages/core/src/createRenderer.ts",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/vuejs/core/blob/a8522cf48c09efbb2063f129cf1bea0dae09f10a/packages%2Fcore%2Fsrc%2FcreateRenderer.ts",
        "raw_url": "https://github.com/vuejs/core/raw/a8522cf48c09efbb2063f129cf1bea0dae09f10a/packages%2Fcore%2Fsrc%2FcreateRenderer.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcore%2Fsrc%2FcreateRenderer.ts?ref=a8522cf48c09efbb2063f129cf1bea0dae09f10a",
        "patch": "@@ -265,7 +265,7 @@ export function createRenderer(options: RendererOptions) {\n       el = mountComponentInstance(\n         vnode,\n         tag as ComponentClass,\n-        container,\n+        null,\n         parentComponent,\n         isSVG,\n         endNode"
      }
    ]
  },
  "898b1106c93876aff9a7019237b52d869a1122e0": {
    "content": "",
    "date": 1649389685095,
    "files": [
      {
        "sha": "035212b0be1da0f70097b4ed683a3063a4a4dff0",
        "filename": "scripts/build.js",
        "status": "modified",
        "additions": 37,
        "deletions": 14,
        "changes": 51,
        "blob_url": "https://github.com/vuejs/core/blob/898b1106c93876aff9a7019237b52d869a1122e0/scripts%2Fbuild.js",
        "raw_url": "https://github.com/vuejs/core/raw/898b1106c93876aff9a7019237b52d869a1122e0/scripts%2Fbuild.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Fbuild.js?ref=898b1106c93876aff9a7019237b52d869a1122e0",
        "patch": "@@ -1,3 +1,19 @@\n+/*\n+Produce prodcution builds and stitch toegether d.ts files.\n+\n+To specific the package to build, simply pass its name and the desired build\n+formats to output (defaults to `buildOptions.formats` specified in that package,\n+or \"esm,cjs\"):\n+\n+```\n+# name supports fuzzy match. will build all packages with name containing \"dom\":\n+yarn build dom\n+\n+# specify the format to output\n+yarn build core --formats cjs\n+```\n+*/\n+\n const fs = require('fs-extra')\n const path = require('path')\n const zlib = require('zlib')\n@@ -6,8 +22,9 @@ const execa = require('execa')\n const dts = require('dts-bundle')\n const { targets, fuzzyMatchTarget } = require('./utils')\n \n-const target = process.argv[2]\n-\n+const args = require('minimist')(process.argv.slice(2))\n+const target = args._[0]\n+const formats = args.formats || args.f\n ;(async () => {\n   if (!target) {\n     await buildAll(targets)\n@@ -18,22 +35,28 @@ const target = process.argv[2]\n   }\n })()\n \n-async function buildAll (targets) {\n+async function buildAll(targets) {\n   for (const target of targets) {\n     await build(target)\n   }\n }\n \n-async function build (target) {\n+async function build(target) {\n   const pkgDir = path.resolve(`packages/${target}`)\n \n   await fs.remove(`${pkgDir}/dist`)\n \n-  await execa('rollup', [\n-    '-c',\n-    '--environment',\n-    `NODE_ENV:production,TARGET:${target}`\n-  ], { stdio: 'inherit' })\n+  await execa(\n+    'rollup',\n+    [\n+      '-c',\n+      '--environment',\n+      `NODE_ENV:production,` +\n+        `TARGET:${target}` +\n+        (formats ? `FORMATS:${formats}` : ``)\n+    ],\n+    { stdio: 'inherit' }\n+  )\n \n   const dtsOptions = {\n     name: target === 'vue' ? target : `@vue/${target}`,\n@@ -47,24 +70,24 @@ async function build (target) {\n   await fs.remove(`${pkgDir}/dist/packages`)\n }\n \n-function checkAllSizes (targets) {\n+function checkAllSizes(targets) {\n   console.log()\n   for (const target of targets) {\n     checkSize(target)\n   }\n   console.log()\n }\n \n-function checkSize (target) {\n+function checkSize(target) {\n   const pkgDir = path.resolve(`packages/${target}`)\n   const esmProdBuild = `${pkgDir}/dist/${target}.esm-browser.prod.js`\n   if (fs.existsSync(esmProdBuild)) {\n     const file = fs.readFileSync(esmProdBuild)\n     const minSize = (file.length / 1024).toFixed(2) + 'kb'\n     const gzipped = zlib.gzipSync(file)\n     const gzipSize = (gzipped.length / 1024).toFixed(2) + 'kb'\n-    console.log(`${\n-      chalk.gray(chalk.bold(target))\n-    } min:${minSize} / gzip:${gzipSize}`)\n+    console.log(\n+      `${chalk.gray(chalk.bold(target))} min:${minSize} / gzip:${gzipSize}`\n+    )\n   }\n }"
      },
      {
        "sha": "6a4fa307d990c0b1167c39014df34432e8888f62",
        "filename": "scripts/dev.js",
        "status": "modified",
        "additions": 18,
        "deletions": 14,
        "changes": 32,
        "blob_url": "https://github.com/vuejs/core/blob/898b1106c93876aff9a7019237b52d869a1122e0/scripts%2Fdev.js",
        "raw_url": "https://github.com/vuejs/core/raw/898b1106c93876aff9a7019237b52d869a1122e0/scripts%2Fdev.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Fdev.js?ref=898b1106c93876aff9a7019237b52d869a1122e0",
        "patch": "@@ -1,24 +1,28 @@\n-// Run Rollup in watch mode for a single package for development.\n-// Only the ES modules format will be generated, as it is expected to be tested\n-// in a modern browser using <script type=\"module\">.\n-// Defaults to watch the `vue` meta package.\n-// To specific the package to watch, simply pass its name. e.g.\n-// ```\n-// yarn dev observer\n-// ```\n+/*\n+Run Rollup in watch mode for development.\n+\n+To specific the package to watch, simply pass its name and the desired build\n+formats to watch (defaults to \"umd\"):\n+\n+```\n+# name supports fuzzy match. will watch all packages with name containing \"dom\"\n+yarn dev dom\n+\n+# specify the format to output\n+yarn dev core --formats cjs\n+```\n+*/\n \n const execa = require('execa')\n const { targets, fuzzyMatchTarget } = require('./utils')\n \n-const target = fuzzyMatchTarget(process.argv[2] || 'runtime-dom')\n+const args = require('minimist')(process.argv.slice(2))\n+const target = fuzzyMatchTarget(args._[0] || 'runtime-dom')\n+const formats = args.formats || args.f\n \n execa(\n   'rollup',\n-  [\n-    '-wc',\n-    '--environment',\n-    `TARGET:${target},FORMATS:umd`\n-  ],\n+  ['-wc', '--environment', `TARGET:${target},FORMATS:${formats || 'umd'}`],\n   {\n     stdio: 'inherit'\n   }"
      }
    ]
  },
  "2e9a3426524a54c6a743600572f8f08bc0a02061": {
    "content": "",
    "date": 1649389481369,
    "files": [
      {
        "sha": "33a82ccf53c96a02e97802a1e05627c2d256f601",
        "filename": "packages/compiler-core/README.md",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-core%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-core%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2FREADME.md?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1 +0,0 @@\n-# @vue/compiler-core\n\\ No newline at end of file"
      },
      {
        "sha": "d3fc54f4510cad90421cb67bd985d9eae6c925ee",
        "filename": "packages/compiler-core/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-core%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-core%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2Findex.js?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,7 +0,0 @@\n-'use strict'\n-\n-if (process.env.NODE_ENV === 'production') {\n-  module.exports = require('./dist/compiler-core.cjs.prod.js')\n-} else {\n-  module.exports = require('./dist/compiler-core.cjs.js')\n-}"
      },
      {
        "sha": "7d500b33fbbb4a6440d0b3a5c0eca28026fd0991",
        "filename": "packages/compiler-core/package.json",
        "status": "removed",
        "additions": 0,
        "deletions": 21,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-core%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-core%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2Fpackage.json?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,21 +0,0 @@\n-{\n-  \"name\": \"@vue/compiler-core\",\n-  \"version\": \"3.0.0-alpha.1\",\n-  \"description\": \"@vue/compiler-core\",\n-  \"main\": \"index.js\",\n-  \"module\": \"dist/compiler-core.esm-bundler.js\",\n-  \"typings\": \"dist/index.d.ts\",\n-  \"repository\": {\n-    \"type\": \"git\",\n-    \"url\": \"git+https://github.com/vuejs/vue.git\"\n-  },\n-  \"keywords\": [\n-    \"vue\"\n-  ],\n-  \"author\": \"Evan You\",\n-  \"license\": \"MIT\",\n-  \"bugs\": {\n-    \"url\": \"https://github.com/vuejs/vue/issues\"\n-  },\n-  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler-core#readme\"\n-}"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/compiler-dom/.npmignore",
        "status": "removed",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2F.npmignore?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,3 +0,0 @@\n-__tests__/\n-__mocks__/\n-dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "0027f542659505b4384cd0dc301996a381345a20",
        "filename": "packages/compiler-dom/README.md",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2FREADME.md?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1 +0,0 @@\n-# @vue/compiler-dom\n\\ No newline at end of file"
      },
      {
        "sha": "b5f7a05ea10eb8dab379bd2d37a6994ab6b5f221",
        "filename": "packages/compiler-dom/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2Findex.js?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,7 +0,0 @@\n-'use strict'\n-\n-if (process.env.NODE_ENV === 'production') {\n-  module.exports = require('./dist/compiler-dom.cjs.prod.js')\n-} else {\n-  module.exports = require('./dist/compiler-dom.cjs.js')\n-}"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/compiler-dom/src/index.ts",
        "status": "removed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-dom%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2Fsrc%2Findex.ts?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/compiler-server/.npmignore",
        "status": "removed",
        "additions": 0,
        "deletions": 3,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2F.npmignore?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,3 +0,0 @@\n-__tests__/\n-__mocks__/\n-dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "24d04239d7a0d1501e0c70cc31b67a95ba6e8177",
        "filename": "packages/compiler-server/README.md",
        "status": "removed",
        "additions": 0,
        "deletions": 1,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2FREADME.md?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1 +0,0 @@\n-# @vue/compiler-server\n\\ No newline at end of file"
      },
      {
        "sha": "31c34293e09e0f211f1e0d44fd056e4e965e431d",
        "filename": "packages/compiler-server/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2Findex.js?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,7 +0,0 @@\n-'use strict'\n-\n-if (process.env.NODE_ENV === 'production') {\n-  module.exports = require('./dist/compiler-server.cjs.prod.js')\n-} else {\n-  module.exports = require('./dist/compiler-server.cjs.js')\n-}"
      },
      {
        "sha": "1e508dd7bce83a0762d5323991f481cbd6baf7a0",
        "filename": "packages/compiler-server/package.json",
        "status": "removed",
        "additions": 0,
        "deletions": 21,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2Fpackage.json?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a",
        "patch": "@@ -1,21 +0,0 @@\n-{\n-  \"name\": \"@vue/compiler-server\",\n-  \"version\": \"3.0.0-alpha.1\",\n-  \"description\": \"@vue/compiler-server\",\n-  \"main\": \"index.js\",\n-  \"module\": \"dist/compiler-server.esm-bundler.js\",\n-  \"typings\": \"dist/index.d.ts\",\n-  \"repository\": {\n-    \"type\": \"git\",\n-    \"url\": \"git+https://github.com/vuejs/vue.git\"\n-  },\n-  \"keywords\": [\n-    \"vue\"\n-  ],\n-  \"author\": \"Evan You\",\n-  \"license\": \"MIT\",\n-  \"bugs\": {\n-    \"url\": \"https://github.com/vuejs/vue/issues\"\n-  },\n-  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler-server#readme\"\n-}"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/compiler-server/src/index.ts",
        "status": "removed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/360ab65117c0b8c0ba3b1038ae2e18b56ddf651a/packages%2Fcompiler-server%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2Fsrc%2Findex.ts?ref=360ab65117c0b8c0ba3b1038ae2e18b56ddf651a"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/compiler/.npmignore",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler%2F.npmignore?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "previous_filename": "packages/compiler-core/.npmignore"
      },
      {
        "sha": "f5a8b4f3fa071d5170c60d21a5343f0037711be2",
        "filename": "packages/compiler/README.md",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler%2FREADME.md?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "patch": "@@ -0,0 +1 @@\n+# @vue/compiler\n\\ No newline at end of file"
      },
      {
        "sha": "388d86ef1c41b2ab2b62ddf70ff59dae608511e4",
        "filename": "packages/compiler/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler%2Findex.js?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/compiler.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/compiler.cjs.js')\n+}"
      },
      {
        "sha": "edd6837a21bc6cb0db461ad62ff531d378d52b1c",
        "filename": "packages/compiler/package.json",
        "status": "renamed",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler%2Fpackage.json?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "patch": "@@ -1,9 +1,9 @@\n {\n-  \"name\": \"@vue/compiler-dom\",\n+  \"name\": \"@vue/compiler\",\n   \"version\": \"3.0.0-alpha.1\",\n-  \"description\": \"@vue/compiler-dom\",\n+  \"description\": \"@vue/compiler\",\n   \"main\": \"index.js\",\n-  \"module\": \"dist/compiler-dom.esm-bundler.js\",\n+  \"module\": \"dist/compiler.esm-bundler.js\",\n   \"typings\": \"dist/index.d.ts\",\n   \"repository\": {\n     \"type\": \"git\",\n@@ -17,5 +17,5 @@\n   \"bugs\": {\n     \"url\": \"https://github.com/vuejs/vue/issues\"\n   },\n-  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler-dom#readme\"\n-}\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler#readme\"\n+}\n\\ No newline at end of file",
        "previous_filename": "packages/compiler-dom/package.json"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/compiler/src/index.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fcompiler%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler%2Fsrc%2Findex.ts?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "previous_filename": "packages/compiler-core/src/index.ts"
      },
      {
        "sha": "bb99db93098d873ca961efcc0b863594fd1e79f8",
        "filename": "packages/observer/__tests__/collections.spec.ts",
        "status": "modified",
        "additions": 3,
        "deletions": 1,
        "changes": 4,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fobserver%2F__tests__%2Fcollections.spec.ts",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/packages%2Fobserver%2F__tests__%2Fcollections.spec.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2F__tests__%2Fcollections.spec.ts?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "patch": "@@ -1 +1,3 @@\n-describe('observer/collections', () => {})\n+describe('observer/collections', () => {\n+  describe('Map', () => {})\n+})"
      },
      {
        "sha": "59fbad3f1609b00a5b503830d9ef4efdbad19b96",
        "filename": "tsconfig.json",
        "status": "modified",
        "additions": 1,
        "deletions": 3,
        "changes": 4,
        "blob_url": "https://github.com/vuejs/core/blob/2e9a3426524a54c6a743600572f8f08bc0a02061/tsconfig.json",
        "raw_url": "https://github.com/vuejs/core/raw/2e9a3426524a54c6a743600572f8f08bc0a02061/tsconfig.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/tsconfig.json?ref=2e9a3426524a54c6a743600572f8f08bc0a02061",
        "patch": "@@ -24,9 +24,7 @@\n       \"@vue/scheduler\": [\"packages/scheduler/src\"],\n       \"@vue/renderer-dom\": [\"packages/renderer-dom/src\"],\n       \"@vue/renderer-server\": [\"packages/renderer-server/src\"],\n-      \"@vue/compiler-core\": [\"packages/compiler-core/src\"],\n-      \"@vue/compiler-dom\": [\"packages/compiler-dom/src\"],\n-      \"@vue/compiler-server\": [\"packages/compiler-server/src\"]\n+      \"@vue/compiler\": [\"packages/compiler-core/src\"]\n     }\n   },\n   \"include\": ["
      }
    ]
  },
  "d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9": {
    "content": "",
    "date": 1649391240422,
    "files": [
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/compiler-core/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2F.npmignore?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "33a82ccf53c96a02e97802a1e05627c2d256f601",
        "filename": "packages/compiler-core/README.md",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2FREADME.md?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1 @@\n+# @vue/compiler-core\n\\ No newline at end of file"
      },
      {
        "sha": "d3fc54f4510cad90421cb67bd985d9eae6c925ee",
        "filename": "packages/compiler-core/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2Findex.js?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/compiler-core.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/compiler-core.cjs.js')\n+}"
      },
      {
        "sha": "9b84d9f4e4adf726122503294f07147a538da25f",
        "filename": "packages/compiler-core/package.json",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2Fpackage.json?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,21 @@\n+{\n+  \"name\": \"@vue/compiler-core\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/compiler-core\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/compiler-core.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler-core#readme\"\n+}\n\\ No newline at end of file"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/compiler-core/src/index.ts",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-core%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-core%2Fsrc%2Findex.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/compiler-dom/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2F.npmignore?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "0027f542659505b4384cd0dc301996a381345a20",
        "filename": "packages/compiler-dom/README.md",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2FREADME.md?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1 @@\n+# @vue/compiler-dom\n\\ No newline at end of file"
      },
      {
        "sha": "b5f7a05ea10eb8dab379bd2d37a6994ab6b5f221",
        "filename": "packages/compiler-dom/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2Findex.js?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/compiler-dom.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/compiler-dom.cjs.js')\n+}"
      },
      {
        "sha": "b2bb68afc11fff0d6c02afe18509978ec8ef7a8b",
        "filename": "packages/compiler-dom/package.json",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2Fpackage.json?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,21 @@\n+{\n+  \"name\": \"@vue/compiler-dom\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/compiler-dom\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/compiler-dom.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler-dom#readme\"\n+}\n\\ No newline at end of file"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/compiler-dom/src/index.ts",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-dom%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-dom%2Fsrc%2Findex.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/compiler-server/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2F.npmignore?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "24d04239d7a0d1501e0c70cc31b67a95ba6e8177",
        "filename": "packages/compiler-server/README.md",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2FREADME.md?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1 @@\n+# @vue/compiler-server\n\\ No newline at end of file"
      },
      {
        "sha": "31c34293e09e0f211f1e0d44fd056e4e965e431d",
        "filename": "packages/compiler-server/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2Findex.js?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/compiler-server.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/compiler-server.cjs.js')\n+}"
      },
      {
        "sha": "b8c1e017869ed7eceb701b8bfafe1351be67c1dc",
        "filename": "packages/compiler-server/package.json",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2Fpackage.json?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,21 @@\n+{\n+  \"name\": \"@vue/compiler-server\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/compiler-server\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/compiler-server.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/compiler-server#readme\"\n+}\n\\ No newline at end of file"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/compiler-server/src/index.ts",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fcompiler-server%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fcompiler-server%2Fsrc%2Findex.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9"
      },
      {
        "sha": "4e42994421611f4f3d049804d7e72c4eb935a380",
        "filename": "packages/observer/README.md",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fobserver%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Fobserver%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fobserver%2FREADME.md?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -1,3 +1,3 @@\n # @vue/observer\n \n-> This package is inlined into UMD & Browser ESM builds of user-facing renderers (e.g. `@vue/runtime-dom`), but also published as a package that can be used standalone. The standalone build should not be used alongside a pre-bundled build of a user-facing renderer, as they will have different internal storage for reactivity connections. A user-facing renderer should re-export all APIs from this package.\n+> This package is inlined into UMD & Browser ESM builds of user-facing renderers (e.g. `@vue/renderer-dom`), but also published as a package that can be used standalone. The standalone build should not be used alongside a pre-bundled build of a user-facing renderer, as they will have different internal storage for reactivity connections. A user-facing renderer should re-export all APIs from this package."
      },
      {
        "sha": "aa5ee6263b2b30d39c11577cd9aa99dad163bd07",
        "filename": "packages/renderer-dom/.npmignore",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2F.npmignore?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/.npmignore"
      },
      {
        "sha": "9e2c326b89a51703829c4ecd86a2e5415b7d2843",
        "filename": "packages/renderer-dom/README.md",
        "status": "renamed",
        "additions": 2,
        "deletions": 2,
        "changes": 4,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2FREADME.md?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -1,7 +1,7 @@\n-# @vue/runtime-dom\n+# @vue/renderer-dom\n \n ``` js\n-import { h, render, Component } from '@vue/runtime-dom'\n+import { h, render, Component } from '@vue/renderer-dom'\n \n class App extends Component {\n   data () {",
        "previous_filename": "packages/runtime-dom/README.md"
      },
      {
        "sha": "b722383cf332d4486aeb7c1db046f30bfb693fb8",
        "filename": "packages/renderer-dom/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Findex.js?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/renderer-dom.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/renderer-dom.cjs.js')\n+}"
      },
      {
        "sha": "17b55aafd82ecdd8113119def824f1a9909b4738",
        "filename": "packages/renderer-dom/package.json",
        "status": "renamed",
        "additions": 5,
        "deletions": 5,
        "changes": 10,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fpackage.json?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -1,11 +1,11 @@\n {\n-  \"name\": \"@vue/runtime-dom\",\n+  \"name\": \"@vue/renderer-dom\",\n   \"version\": \"3.0.0-alpha.1\",\n-  \"description\": \"@vue/runtime-dom\",\n+  \"description\": \"@vue/renderer-dom\",\n   \"main\": \"index.js\",\n-  \"module\": \"dist/runtime-dom.esm.js\",\n+  \"module\": \"dist/renderer-dom.esm.js\",\n   \"typings\": \"dist/index.d.ts\",\n-  \"unpkg\": \"dist/runtime-dom.umd.js\",\n+  \"unpkg\": \"dist/renderer-dom.umd.js\",\n   \"buildOptions\": {\n     \"name\": \"Vue\",\n     \"formats\": [\"esm\", \"cjs\", \"umd\", \"esm-browser\"]\n@@ -22,7 +22,7 @@\n   \"bugs\": {\n     \"url\": \"https://github.com/vuejs/vue/issues\"\n   },\n-  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/runtime-dom#readme\",\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/renderer-dom#readme\",\n   \"dependencies\": {\n     \"@vue/core\": \"3.0.0-alpha.1\",\n     \"@vue/scheduler\": \"3.0.0-alpha.1\"",
        "previous_filename": "packages/runtime-dom/package.json"
      },
      {
        "sha": "bb9e3ad68042acfd38f83978ee341351e017a978",
        "filename": "packages/renderer-dom/src/index.ts",
        "status": "renamed",
        "additions": 8,
        "deletions": 1,
        "changes": 9,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2Findex.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -22,7 +22,14 @@ const { render } = createRenderer({\n // important: inline the definition for nextTick\n const publicNextTick = nextTick as (fn: Function) => Promise<void>\n \n-export { h, cloneVNode, createPortal, Component, render, publicNextTick as nextTick }\n+export {\n+  h,\n+  cloneVNode,\n+  createPortal,\n+  Component,\n+  render,\n+  publicNextTick as nextTick\n+}\n \n // also expose observer API\n export {",
        "previous_filename": "packages/runtime-dom/src/index.ts"
      },
      {
        "sha": "d32f6608e0177da967076b0f8ffcdfd5346f1241",
        "filename": "packages/renderer-dom/src/modules/attrs.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fattrs.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fattrs.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fattrs.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/modules/attrs.ts"
      },
      {
        "sha": "f953d46f693e72463b0ed9e29aff9a006cb3b16d",
        "filename": "packages/renderer-dom/src/modules/class.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fclass.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fclass.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fclass.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/modules/class.ts"
      },
      {
        "sha": "452ff001406a9b26163544f2c720eb6cd1778a03",
        "filename": "packages/renderer-dom/src/modules/events.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fevents.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fevents.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fevents.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/modules/events.ts"
      },
      {
        "sha": "f2e6bd7385df8b2af5b1ea4bc4f9c2acd06442ff",
        "filename": "packages/renderer-dom/src/modules/props.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fprops.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fprops.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fprops.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/modules/props.ts"
      },
      {
        "sha": "1652949d44b1a0bca5e0c807652f30b370c56e2f",
        "filename": "packages/renderer-dom/src/modules/style.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fstyle.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fstyle.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2Fmodules%2Fstyle.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/modules/style.ts"
      },
      {
        "sha": "df17fcd3eba281a272e287ab517f40498b33b5eb",
        "filename": "packages/renderer-dom/src/nodeOps.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2FnodeOps.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2FnodeOps.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2FnodeOps.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/nodeOps.ts"
      },
      {
        "sha": "884d5c436c19de7ed42d2924c4994b159af5f6bf",
        "filename": "packages/renderer-dom/src/patchData.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2FpatchData.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2FpatchData.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2FpatchData.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/patchData.ts"
      },
      {
        "sha": "e1302c5e5e84aac68a2d6edf13302c237c7d5336",
        "filename": "packages/renderer-dom/src/teardownVNode.ts",
        "status": "renamed",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2FteardownVNode.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-dom%2Fsrc%2FteardownVNode.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-dom%2Fsrc%2FteardownVNode.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "previous_filename": "packages/runtime-dom/src/teardownVNode.ts"
      },
      {
        "sha": "bb5c8a541beaacc7dbb1ef5476d7864d1ce1b743",
        "filename": "packages/renderer-server/.npmignore",
        "status": "added",
        "additions": 3,
        "deletions": 0,
        "changes": 3,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2F.npmignore",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2F.npmignore",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-server%2F.npmignore?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,3 @@\n+__tests__/\n+__mocks__/\n+dist/packages\n\\ No newline at end of file"
      },
      {
        "sha": "55ff667b4ade1a2c64be65db56c2c53cf7dcaec0",
        "filename": "packages/renderer-server/README.md",
        "status": "added",
        "additions": 1,
        "deletions": 0,
        "changes": 1,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2FREADME.md",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2FREADME.md",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-server%2FREADME.md?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1 @@\n+# @vue/renderer-server\n\\ No newline at end of file"
      },
      {
        "sha": "cbf46fe711a64b484b60aee1c3cbf4fee667bc59",
        "filename": "packages/renderer-server/index.js",
        "status": "added",
        "additions": 7,
        "deletions": 0,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-server%2Findex.js?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,7 @@\n+'use strict'\n+\n+if (process.env.NODE_ENV === 'production') {\n+  module.exports = require('./dist/renderer-server.cjs.prod.js')\n+} else {\n+  module.exports = require('./dist/renderer-server.cjs.js')\n+}"
      },
      {
        "sha": "9c776548e9e2e49cc62558c2451f77136b8c18d2",
        "filename": "packages/renderer-server/package.json",
        "status": "added",
        "additions": 21,
        "deletions": 0,
        "changes": 21,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2Fpackage.json",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2Fpackage.json",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-server%2Fpackage.json?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -0,0 +1,21 @@\n+{\n+  \"name\": \"@vue/renderer-server\",\n+  \"version\": \"3.0.0-alpha.1\",\n+  \"description\": \"@vue/renderer-server\",\n+  \"main\": \"index.js\",\n+  \"module\": \"dist/renderer-server.esm.js\",\n+  \"typings\": \"dist/index.d.ts\",\n+  \"repository\": {\n+    \"type\": \"git\",\n+    \"url\": \"git+https://github.com/vuejs/vue.git\"\n+  },\n+  \"keywords\": [\n+    \"vue\"\n+  ],\n+  \"author\": \"Evan You\",\n+  \"license\": \"MIT\",\n+  \"bugs\": {\n+    \"url\": \"https://github.com/vuejs/vue/issues\"\n+  },\n+  \"homepage\": \"https://github.com/vuejs/vue/tree/dev/packages/renderer-server#readme\"\n+}\n\\ No newline at end of file"
      },
      {
        "sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391",
        "filename": "packages/renderer-server/src/index.ts",
        "status": "added",
        "additions": 0,
        "deletions": 0,
        "changes": 0,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2Fsrc%2Findex.ts",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/packages%2Frenderer-server%2Fsrc%2Findex.ts",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Frenderer-server%2Fsrc%2Findex.ts?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9"
      },
      {
        "sha": "cdc29b2a87973414d948be98c0261326c0a51344",
        "filename": "packages/runtime-dom/index.js",
        "status": "removed",
        "additions": 0,
        "deletions": 7,
        "changes": 7,
        "blob_url": "https://github.com/vuejs/core/blob/898b1106c93876aff9a7019237b52d869a1122e0/packages%2Fruntime-dom%2Findex.js",
        "raw_url": "https://github.com/vuejs/core/raw/898b1106c93876aff9a7019237b52d869a1122e0/packages%2Fruntime-dom%2Findex.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/packages%2Fruntime-dom%2Findex.js?ref=898b1106c93876aff9a7019237b52d869a1122e0",
        "patch": "@@ -1,7 +0,0 @@\n-'use strict'\n-\n-if (process.env.NODE_ENV === 'production') {\n-  module.exports = require('./dist/runtime-dom.cjs.prod.js')\n-} else {\n-  module.exports = require('./dist/runtime-dom.cjs.js')\n-}"
      },
      {
        "sha": "c0879361fa8aecd05efe9b1ab9c0b2106661ceb8",
        "filename": "scripts/dev.js",
        "status": "modified",
        "additions": 1,
        "deletions": 1,
        "changes": 2,
        "blob_url": "https://github.com/vuejs/core/blob/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/scripts%2Fdev.js",
        "raw_url": "https://github.com/vuejs/core/raw/d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9/scripts%2Fdev.js",
        "contents_url": "https://api.github.com/repos/vuejs/core/contents/scripts%2Fdev.js?ref=d1bc6ee8d61ad859c1907f1d40ee4f559cb627b9",
        "patch": "@@ -17,7 +17,7 @@ const execa = require('execa')\n const { targets, fuzzyMatchTarget } = require('./utils')\n \n const args = require('minimist')(process.argv.slice(2))\n-const target = fuzzyMatchTarget(args._[0] || 'runtime-dom')\n+const target = fuzzyMatchTarget(args._[0] || 'renderer-dom')\n const formats = args.formats || args.f\n \n execa("
      }
    ]
  }
}
